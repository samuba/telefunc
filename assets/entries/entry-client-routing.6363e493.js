import{j as se,k as l,p as _,m as pt,b as g,_ as h,s as _t,n as ht,q as B,r as E,t as j,u as y,v as Te,d as x,w as Y,x as I,y as J,z as L,A as F,B as $e,C as ie,o as m,a as mt,l as ae,D as je,E as ke,F as Ne,G as bt,H as yt,I as U,J as vt,K as Pt,L as St,c as xt,M as Fe,N as Ot,O as Ae,P as Rt,Q as k,R as wt,S as Et,T as le,g as ue,i as Q,h as Ct,U as Tt}from"../chunks/chunk-faa2de2b.js";function C(e){return typeof e!="object"||e===null?!1:Object.getPrototypeOf(e)===null?!0:e.constructor.name==="Object"}function me(e){return"["+e.map(t=>"'"+t+"'").join(", ")+"]"}function X(e,t){const r=Object.getOwnPropertyDescriptor(e,t);return!!r&&!("value"in r)&&!!r.get}function $t(e){return typeof e=="object"&&e!==null&&"then"in e&&se(e.then)}function jt(e){return[null,void 0].includes(e)?String(e):["boolean","number","string"].includes(typeof e)?JSON.stringify(e):null}function kt(e){return e.replace(/[/\-\\^$*+?.()|[\]{}]/g,"\\$&")}function A(e,t,r){const n=Ft(e,t);if(n===null)return null;const{value:o,definedAt:s}=n;return r&&Nt(o,r,t,s),n}function Nt(e,t,r,n){l(e!==null);const o=typeof e;if(o===t)return;const s=jt(e),i=s!==null?`value ${_.cyan(s)}`:`type ${_.cyan(o)}`,c=`${pt("Config",r,{definedAt:n})} has an invalid ${i}: it should be a ${_.cyan(t)} instead`;g(!1,c)}function Ft(e,t){const r=e.configValues[t];return!r||r.value===null?null:r}const At=["headings","default"],It=Object.freeze(Object.defineProperty({__proto__:null,exportNames:At},Symbol.toStringTag,{value:"Module"})),Lt=["headings","default"],Ht=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Lt},Symbol.toStringTag,{value:"Module"})),Dt=["headings","default"],Bt=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Dt},Symbol.toStringTag,{value:"Module"})),Vt=["headings","default"],zt=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Vt},Symbol.toStringTag,{value:"Module"})),Wt=["headings","default"],Mt=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Wt},Symbol.toStringTag,{value:"Module"})),Ut=["headings","default"],Gt=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Ut},Symbol.toStringTag,{value:"Module"})),Kt=["headings","default"],Yt=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Kt},Symbol.toStringTag,{value:"Module"})),Jt=["headings","default"],qt=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Jt},Symbol.toStringTag,{value:"Module"})),Qt=["headings","default"],Xt=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Qt},Symbol.toStringTag,{value:"Module"})),Zt=["headings","default"],er=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Zt},Symbol.toStringTag,{value:"Module"})),tr=["headings","default"],rr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:tr},Symbol.toStringTag,{value:"Module"})),nr=["headings","default"],or=Object.freeze(Object.defineProperty({__proto__:null,exportNames:nr},Symbol.toStringTag,{value:"Module"})),sr=["Page"],ir=Object.freeze(Object.defineProperty({__proto__:null,exportNames:sr},Symbol.toStringTag,{value:"Module"})),ar=["headings","default"],lr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:ar},Symbol.toStringTag,{value:"Module"})),ur=["headings","default"],cr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:ur},Symbol.toStringTag,{value:"Module"})),dr=["headings","default"],fr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:dr},Symbol.toStringTag,{value:"Module"})),gr=["headings","default"],pr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:gr},Symbol.toStringTag,{value:"Module"})),_r=["headings","default"],hr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:_r},Symbol.toStringTag,{value:"Module"})),mr=["headings","default"],br=Object.freeze(Object.defineProperty({__proto__:null,exportNames:mr},Symbol.toStringTag,{value:"Module"})),yr=["headings","default"],vr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:yr},Symbol.toStringTag,{value:"Module"})),Pr=["headings","default"],Sr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Pr},Symbol.toStringTag,{value:"Module"})),xr=["headings","default"],Or=Object.freeze(Object.defineProperty({__proto__:null,exportNames:xr},Symbol.toStringTag,{value:"Module"})),Rr=["headings","default"],wr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Rr},Symbol.toStringTag,{value:"Module"})),Er=["headings","default"],Cr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Er},Symbol.toStringTag,{value:"Module"})),Tr=["headings","default"],$r=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Tr},Symbol.toStringTag,{value:"Module"})),jr=["headings","default"],kr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:jr},Symbol.toStringTag,{value:"Module"})),Nr=["headings","default"],Fr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Nr},Symbol.toStringTag,{value:"Module"})),Ar=["headings","default"],Ir=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Ar},Symbol.toStringTag,{value:"Module"})),Lr=["headings","default"],Hr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Lr},Symbol.toStringTag,{value:"Module"})),Dr=["headings","default"],Br=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Dr},Symbol.toStringTag,{value:"Module"})),Vr=["headings","default"],zr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Vr},Symbol.toStringTag,{value:"Module"})),Wr=["headings","default"],Mr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Wr},Symbol.toStringTag,{value:"Module"})),Ur=["headings","default"],Gr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Ur},Symbol.toStringTag,{value:"Module"})),Kr=[],Yr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Kr},Symbol.toStringTag,{value:"Module"})),Jr=["render"],qr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Jr},Symbol.toStringTag,{value:"Module"})),Qr=[],Xr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Qr},Symbol.toStringTag,{value:"Module"})),O={},Ie={},Zr={},R={},en=[],Le={},tn=!0,rn=[],nn={configValuesImported:[]},on=Object.assign({}),sn={...on};O[".page"]=sn;const an=Object.assign({}),ln={...an};R[".page"]=ln;const un=Object.assign({"/pages/Abort.page.server.mdx":It,"/pages/RPC-vs-GraphQL-REST.page.server.mdx":Ht,"/pages/RPC.page.server.mdx":Bt,"/pages/abort-vs-error.page.server.mdx":zt,"/pages/babel-plugin.page.server.mdx":Mt,"/pages/disableNamingConvention.page.server.mdx":Gt,"/pages/error-handling.page.server.mdx":Yt,"/pages/event-based.page.server.mdx":qt,"/pages/file-upload.page.server.mdx":Xt,"/pages/form-validation.page.server.mdx":er,"/pages/getContext.page.server.mdx":rr,"/pages/httpHeaders.page.server.mdx":or,"/pages/index/index.page.server.tsx":ir,"/pages/initial-data.page.server.mdx":lr,"/pages/initial-page-data.page.server.mdx":cr,"/pages/install.page.server.mdx":fr,"/pages/next.page.server.mdx":pr,"/pages/nuxt.page.server.mdx":hr,"/pages/onAbort.page.server.mdx":br,"/pages/onBug.page.server.mdx":vr,"/pages/permissions.page.server.mdx":Sr,"/pages/react-native.page.server.mdx":Or,"/pages/root.page.server.mdx":wr,"/pages/shield.page.server.mdx":Cr,"/pages/svelte-kit.page.server.mdx":$r,"/pages/telefunc.page.server.mdx":kr,"/pages/telefuncFiles.page.server.mdx":Fr,"/pages/telefuncUrl.page.server.mdx":Ir,"/pages/transformer.page.server.mdx":Hr,"/pages/vike.page.server.mdx":Br,"/pages/vite-plugin.page.server.mdx":zr,"/pages/vite.page.server.mdx":Mr,"/pages/webpack-plugin.page.server.mdx":Gr}),cn={...un};R[".page.server"]=cn;const dn=Object.assign({}),fn={...dn};Ie[".page.route"]=fn;const gn=Object.assign({"/pages/index/index.page.client.ts":()=>h(()=>import("./pages_index_index.page.client.d0c85e9b.js"),["assets/entries/pages_index_index.page.client.d0c85e9b.js","assets/chunks/chunk-a33cf6d6.js","assets/static/index.page.client.a95a6883.css"])}),pn={...gn};O[".page.client"]=pn;const _n=Object.assign({"/pages/index/index.page.client.ts":Yr}),hn={..._n};R[".page.client"]=hn;const mn=Object.assign({"/pages/Abort.page.server.mdx":()=>h(()=>import("./pages_Abort.page.server.extractAssets.949d4f22.js").then(e=>e.A),[]),"/pages/RPC-vs-GraphQL-REST.page.server.mdx":()=>h(()=>import("./pages_RPC-vs-GraphQL-REST.page.server.extractAssets.4ed993c7.js"),[]),"/pages/RPC.page.server.mdx":()=>h(()=>import("./pages_RPC.page.server.extractAssets.4ed993c7.js"),[]),"/pages/abort-vs-error.page.server.mdx":()=>h(()=>import("./pages_abort-vs-error.page.server.extractAssets.4ed993c7.js"),[]),"/pages/babel-plugin.page.server.mdx":()=>h(()=>import("./pages_babel-plugin.page.server.extractAssets.4ed993c7.js"),[]),"/pages/disableNamingConvention.page.server.mdx":()=>h(()=>import("./pages_disableNamingConvention.page.server.extractAssets.4ed993c7.js"),[]),"/pages/error-handling.page.server.mdx":()=>h(()=>import("./pages_error-handling.page.server.extractAssets.4ed993c7.js"),[]),"/pages/event-based.page.server.mdx":()=>h(()=>import("./pages_event-based.page.server.extractAssets.4ed993c7.js"),[]),"/pages/file-upload.page.server.mdx":()=>h(()=>import("./pages_file-upload.page.server.extractAssets.4ed993c7.js"),[]),"/pages/form-validation.page.server.mdx":()=>h(()=>import("./pages_form-validation.page.server.extractAssets.4ed993c7.js"),[]),"/pages/getContext.page.server.mdx":()=>h(()=>import("./pages_getContext.page.server.extractAssets.4ed993c7.js"),[]),"/pages/httpHeaders.page.server.mdx":()=>h(()=>import("./pages_httpHeaders.page.server.extractAssets.4ed993c7.js"),[]),"/pages/index/index.page.server.tsx":()=>h(()=>import("./pages_index_index.page.server.extractAssets.3ce3e902.js"),["assets/entries/pages_index_index.page.server.extractAssets.3ce3e902.js","assets/static/index.page.server.6c2d1ceb.css"]),"/pages/initial-data.page.server.mdx":()=>h(()=>import("./pages_initial-data.page.server.extractAssets.4ed993c7.js"),[]),"/pages/initial-page-data.page.server.mdx":()=>h(()=>import("./pages_initial-page-data.page.server.extractAssets.4ed993c7.js"),[]),"/pages/install.page.server.mdx":()=>h(()=>import("./pages_install.page.server.extractAssets.4ed993c7.js"),[]),"/pages/next.page.server.mdx":()=>h(()=>import("./pages_next.page.server.extractAssets.4ed993c7.js"),[]),"/pages/nuxt.page.server.mdx":()=>h(()=>import("./pages_nuxt.page.server.extractAssets.4ed993c7.js"),[]),"/pages/onAbort.page.server.mdx":()=>h(()=>import("./pages_onAbort.page.server.extractAssets.4ed993c7.js"),[]),"/pages/onBug.page.server.mdx":()=>h(()=>import("./pages_onBug.page.server.extractAssets.4ed993c7.js"),[]),"/pages/permissions.page.server.mdx":()=>h(()=>import("./pages_permissions.page.server.extractAssets.4ed993c7.js"),[]),"/pages/react-native.page.server.mdx":()=>h(()=>import("./pages_react-native.page.server.extractAssets.4ed993c7.js"),[]),"/pages/root.page.server.mdx":()=>h(()=>import("./pages_root.page.server.extractAssets.4ed993c7.js"),[]),"/pages/shield.page.server.mdx":()=>h(()=>import("./pages_shield.page.server.extractAssets.4ed993c7.js"),[]),"/pages/svelte-kit.page.server.mdx":()=>h(()=>import("./pages_svelte-kit.page.server.extractAssets.4ed993c7.js"),[]),"/pages/telefunc.page.server.mdx":()=>h(()=>import("./pages_telefunc.page.server.extractAssets.4ed993c7.js"),[]),"/pages/telefuncFiles.page.server.mdx":()=>h(()=>import("./pages_telefuncFiles.page.server.extractAssets.4ed993c7.js"),[]),"/pages/telefuncUrl.page.server.mdx":()=>h(()=>import("./pages_telefuncUrl.page.server.extractAssets.4ed993c7.js"),[]),"/pages/transformer.page.server.mdx":()=>h(()=>import("./pages_transformer.page.server.extractAssets.4ed993c7.js"),[]),"/pages/vike.page.server.mdx":()=>h(()=>import("./pages_vike.page.server.extractAssets.4ed993c7.js"),[]),"/pages/vite-plugin.page.server.mdx":()=>h(()=>import("./pages_vite-plugin.page.server.extractAssets.4ed993c7.js"),[]),"/pages/vite.page.server.mdx":()=>h(()=>import("./pages_vite.page.server.extractAssets.4ed993c7.js"),[]),"/pages/webpack-plugin.page.server.mdx":()=>h(()=>import("./pages_webpack-plugin.page.server.extractAssets.4ed993c7.js"),[])}),bn={...mn};Le[".page.server"]=bn;R[".page.server"]=R[".page.server"]??{};R[".page.server"]["@brillout/docpress/renderer/_default.page.server.js"]=qr;O[".css"]=O[".css"]??{};O[".css"]["@brillout/docpress/renderer/_default.page.server.css"]=()=>h(()=>Promise.resolve({}),["assets/static/default.page.server.e70d4382.css"]);O[".page.client"]=O[".page.client"]??{};O[".page.client"]["@brillout/docpress/renderer/_default.page.client.js"]=()=>h(()=>import("../chunks/chunk-d6ef409d.js"),["assets/chunks/chunk-d6ef409d.js","assets/chunks/chunk-a33cf6d6.js"]);R[".page.client"]=R[".page.client"]??{};R[".page.client"]["@brillout/docpress/renderer/_default.page.client.js"]=Xr;O[".css"]=O[".css"]??{};O[".css"]["@brillout/docpress/renderer/_default.page.client.css"]=()=>h(()=>Promise.resolve({}),["assets/static/default.page.client.92e9337b.css"]);const yn=Object.freeze(Object.defineProperty({__proto__:null,isGeneratedFile:tn,neverLoaded:Le,pageConfigGlobalSerialized:nn,pageConfigsSerialized:rn,pageFilesEager:Ie,pageFilesExportNamesEager:R,pageFilesExportNamesLazy:Zr,pageFilesLazy:O,pageFilesList:en},Symbol.toStringTag,{value:"Module"}));_t(yn);function vn(){ht(),B()}function Pn(){var n,o,s,i;const e=!!((o=(n=window.__REACT_DEVTOOLS_GLOBAL_HOOK__)==null?void 0:n.renderers)!=null&&o.size),t=!!((i=(s=window.__REACT_DEVTOOLS_GLOBAL_HOOK__)==null?void 0:s.rendererInterfaces)!=null&&i.size),r=!!window.__vite_plugin_react_preamble_installed__;return e||t||r}function He(e,t){const r=Object.keys,n=typeof e;return e&&t&&n==="object"&&n===typeof t?r(e).length===r(t).length&&r(e).every(s=>He(e[s],t[s])):e===t}function Sn(e,t){return E(e)&&E(t)&&e.constructor===t.constructor&&He({...e,stack:null},{...t,stack:null})&&t.message===t.message}function G(e){window.location.href=e}function xn(e){return new Promise(t=>setTimeout(t,e))}function On(e,t){let r=!1;return()=>{r||(r=!0,setTimeout(()=>{r=!1,e()},t))}}function De(e){window.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&e()})}function Rn(e){window.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&e()})}function wn(e){return!e.startsWith("/")&&!e.startsWith(".")&&!e.startsWith("?")&&e!==""}vn();const te=j("history.ts",{});function Be(){let e=window.history.state;e||(e={});let t=!1;"timestamp"in e||(t=!0,e.timestamp=fe()),"scrollPosition"in e||(t=!0,e.scrollPosition=de()),"triggedBy"in e||(e.triggedBy="browser"),Ve(e),t&&ge(e)}function ce(){const e=window.history.state||{};return Ve(e),e}function de(){return{x:window.scrollX,y:window.scrollY}}function fe(){return new Date().getTime()}function be(){const e=de(),t=ce();ge({...t,scrollPosition:e})}function En(e,t){if(t)ge(ce(),e);else{const r=fe();Cn({timestamp:r,scrollPosition:null,triggedBy:"vike"},e)}}function Ve(e){if(l(E(e)),"timestamp"in e){const{timestamp:t}=e;l(typeof t=="number")}if("scrollPosition"in e){const{scrollPosition:t}=e;t!==null&&l(y(t,"x","number")&&y(t,"y","number"))}}function ge(e,t){window.history.replaceState(e,"",t??null)}function Cn(e,t){ze(e,"",t)}function Tn(){te.pushStateOriginal=te.pushStateOriginal??window.history.pushState,window.history.pushState=(e={},...t)=>{g(e==null||E(e),"history.pushState(state) argument state must be an object");const r={scrollPosition:de(),timestamp:fe(),...e,triggedBy:"user"};return ze(r,...t)}}function ze(...e){te.pushStateOriginal.apply(history,e)}async function $n(e,t){const n=Te(e,t).filter(s=>s.fileType===".page.server");return await Promise.all(n.map(async s=>{s.exportNames||(l(s.loadExportNames,t),await s.loadExportNames())})),{hasOnBeforeRenderServerSideOnlyHook:n.some(({exportNames:s})=>(l(s),s.includes("onBeforeRender")))}}const ye=["urlPathname","urlParsed"],jn=["Page","pageExports","exports"];function We(e){[...jn,...ye].forEach(r=>{r in e&&(ye.includes(r)?(l(r.startsWith("url")),x(!1,`pageContext.${r} is already available in the browser when using Client Routing; adding '${r}' to passToClient has no effect`,{onlyOnce:!0})):x(!1,`pageContext.${r} is a built-in that cannot be overriden; adding '${r}' to passToClient has no effect`,{onlyOnce:!0}),delete e[r])})}const kn="/";function Nn(e,t,r){const{pathnameOriginal:n,searchOriginal:o,hashOriginal:s}=Y(e,kn);e.startsWith("/")&&l(e===`${n}${o||""}${s||""}`,{url:e});const i=n.endsWith("/");let a;return r&&n!=="/"?(i?a=I(n,0,-1):a=n,l(!a.endsWith("/"),{url:e}),l(a!=="")):a=n+(i?"":"/")+"index",l(a),a=a+t,`${a}${o||""}${s||""}`}const Fn=".pageContext.json",An=!1;function In(e){return Nn(e,Fn,An)}function Me(e,{hookName:t,hookFilePath:r}){if(e==null)return;l(!t.endsWith(")"));const n=`The ${_.cyan("pageContext")} object provided by the ${t}() hook defined by ${r}`;g(E(e),`${n} should be an object (but it's ${_.cyan(`typeof pageContext === ${JSON.stringify(typeof e)}`)} instead)`),g(!("_objectCreatedByVike"in e),`${n} shouldn't be the whole ${_.cyan("pageContext")} object, see https://vike.dev/pageContext-manipulation#do-not-return-entire-pagecontext`),x(!("_pageId"in e),`${n} sets ${_.cyan("pageContext._pageId")} which means that Vike's routing is overriden. This is an experimental feature: make sure to contact a vike maintainer before using this.`,{onlyOnce:!0}),g(!("is404"in e),`${n} sets ${_.cyan("pageContext.is404")} which is forbidden, use ${_.cyan("throw render()")} instead, see https://vike.dev/render`)}function Ln(e,t,r){l(!r.endsWith(" "));const n=[],o=Object.keys(e);for(const s of o)t.includes(s)||n.push(s);g(n.length===0,[r,"returned an object with following unknown keys:",me(n)+".","Only following keys are allowed:",me(t)+"."].join(" "))}function Hn(e,t){if(e==null)return;const r=`The onBeforeRender() hook defined by ${t}`;g(C(e),`${r} should return a plain JavaScript object, ${_.cyan("undefined")}, or ${_.cyan("null")}`),Ln(e,["pageContext"],r),e.pageContext&&Me(e.pageContext,{hookName:"onBeforeRender",hookFilePath:t})}function Dn(e,t){if(!C(e))return!1;for(const r of Object.keys(e))if(!t.includes(r))return!1;return!0}function Bn(e){return typeof e=="object"&&e!==null&&Object.values(e).every(t=>typeof t=="string")}function Vn(e,t,r=n=>n){if(l(e.length>0),e.length===1)return r(e[0]);const n=e.slice(0,e.length-1),o=e[e.length-1];return n.map(r).join(", ")+` ${t} `+r(o)}J()&&B();async function zn(e,t){let r;if(e._pageFilesAll.length>0?(l(e._pageConfigs.length===0),r=Wn(e._pageId,e._pageFilesAll)):r=L(e,"guard"),!r)return;const n=r.hookFn;let o=e;const s=t(e);s&&(o=s);const i=await F(()=>n(o),r);g(i===void 0,`The guard() hook of ${r.hookFilePath} returns a value, but guard() doesn't accept any return value`)}function Wn(e,t){const r=t.find(c=>c.pageId===e&&c.fileType===".page.route");if(!r)return null;const{filePath:n,fileExports:o}=r;l(o);const s=o.guard;if(!s)return null;const i=n,a=$e("guard");return g(se(s),`guard() defined by ${i} should be a function`),{hookFn:s,hookName:"guard",hookFilePath:i,hookTimeout:a}}function Mn(e){const t=new Error("AbortRender");return m(t,{_pageContextAbort:e,[Ue]:!0}),t}const Ue="_isAbortError";function ve(e){return typeof e=="object"&&e!==null&&Ue in e}function Un(e){return e._urlRewrite||e._urlRedirect||e.abortStatusCode?(l(y(e,"_abortCall","string")),!0):!1}function Gn(e,t,r){if(t)return;const n=r._urlRewrite??r.urlOriginal;l(n);const o=e._pageContextAbort._abortCall;ie(!1,`${_.cyan(o)} intercepted while rendering ${_.cyan(n)}`,{onlyOnce:!1})}function Kn(e){Yn(e);const t={_urlRewrite:null};return e.forEach(r=>{Object.assign(t,r)}),t}function Yn(e){const t=[];e.forEach(r=>{const n=r._urlRewrite;{const o=t.indexOf(n);if(o!==-1){const s=[...t.slice(o),n].map(i=>`render('${i}')`).join(" => ");g(!1,`Infinite loop of render() calls: ${s}`)}}t.push(n)})}function Jn(e,t){const r=[e>0&&_.cyan("throw render('/some-url')"),t>0&&_.cyan("throw redirect('/some-url')")].filter(Boolean).join(" and ");g(e+t<=7,`Maximum chain length of 7 ${r} exceeded. Did you define an infinite loop of ${r}?`)}const Ge=j("router/getPageContext.ts",{});async function qn(e){const t=mt();We(t),m(t,{isHydration:!0,_hasPageContextFromClient:!1}),m(t,await ae(t._pageId,e));for(const r of["data","onBeforeRender"]){const n={...e,...t};if(qe(r,n)){const o=await Ye(r,n);m(t,o)}}return Je(t),t}async function Qn(e){const t=je(e._pageFilesAll,e._pageConfigs);if(!t)throw new Error("No error page defined.");const r={isHydration:!1,_pageId:t};return m(r,await Ke({...e,...r},!0)),r}async function Xn(e){const t={isHydration:!1,_pageId:e._pageId};return m(t,await Ke({...e,...t},!1)),Je(t),t}async function Ke(e,t){const r=async s=>{const i={_hasPageContextFromClient:!1,_pageId:s},a=await ae(s,e);return m(i,a),i};let n=await r(e._pageId),o=!1;if(!t&&await Zn({...e,...n})){const s=await eo(e);if(o=!0,!s._isError)m(n,s);else{const i=je(e._pageFilesAll,e._pageConfigs);l(i),n=await r(i),l(y(s,"is404","boolean")),l(y(s,"pageProps","object")),l(y(s.pageProps,"is404","boolean")),l(!("serverSideError"in s)),m(n,s)}}for(const s of["guard","data","onBeforeRender"]){const i={_hasPageContextFromServer:o,...e,...n};if(s==="guard")!t&&!o&&await zn(i,a=>ke(a,!0));else if(l(s==="data"||s==="onBeforeRender"),qe(s,i)||!o){const a=await Ye(s,i);m(n,a)}else l(o)}return m(n,{_hasPageContextFromServer:o}),n}async function Ye(e,t){const r=L(t,e);if(!r)return null;const n=ke(t,!0),o=await F(()=>r.hookFn(n),r),s={};if(e==="onBeforeRender"){Hn(o,r.hookFilePath);const i=o==null?void 0:o.pageContext;i&&(m(s,{_hasPageContextFromClient:!0}),m(s,i))}else{l(e==="data");const i={data:o};o&&m(s,{_hasPageContextFromClient:!0}),m(s,i)}return s}function Je(e){e._pageContextInitHasClientData&&(Ge.pageContextInitHasClientData=!0)}async function Zn(e){return!!Ge.pageContextInitHasClientData||await Pe("data",e)||await Pe("onBeforeRender",e)}async function Pe(e,t){var r;if(t._pageConfigs.length>0){const n=Ne(t._pageId,t._pageConfigs),o=((r=A(n,`${e}Env`))==null?void 0:r.value)??{};return l(E(o)),!!o.server&&!o.client}else{if(e==="data")return!1;l(e==="onBeforeRender");const{hasOnBeforeRenderServerSideOnlyHook:n}=await $n(t._pageFilesAll,t._pageId);return n}}function qe(e,t){var r;if(t._pageConfigs.length>0){const n=Ne(t._pageId,t._pageConfigs),o=((r=A(n,`${e}Env`))==null?void 0:r.value)??{};return l(E(o)),!!o.client&&!o.server}else return!1}async function eo(e){const t=In(e._urlRewrite??e.urlOriginal),r=await fetch(t);{const s=r.headers.get("content-type"),i="application/json",a=s&&s.includes(i);if(!a&&r.status===404)throw G(e.urlOriginal),ro();g(a,`Wrong Content-Type for ${t}: it should be ${i} but it's ${s} instead. Make sure to properly use pageContext.httpResponse.headers, see https://vike.dev/renderPage`)}const n=await r.text(),o=bt(n);if(l(E(o)),"serverSideError"in o)throw yt("The pageContext object couldn't be fetched from the server as an error occurred on the server-side. Check your server logs.");if(Un(o))throw Mn(o);return l(y(o,"_pageId","string")),We(o),o}function to(e){return E(e)&&!!e._alreadyServerSideRouted}function ro(){const e=new Error("Page doesn't exist");return Object.assign(e,{_alreadyServerSideRouted:!0}),e}function Qe(e,t=!0){l(e.urlOriginal),"urlPathname"in e&&(l(typeof e.urlPathname=="string"),l(X(e,"urlPathname"))),"urlParsed"in e&&l(X(e,"urlParsed")),"url"in e&&l(X(e,"url")),Object.defineProperty(e,"urlPathname",{get:Ze,enumerable:t,configurable:!0}),Object.defineProperty(e,"url",{get:no,enumerable:!1,configurable:!0}),Object.defineProperty(e,"urlParsed",{get:oo,enumerable:t,configurable:!0})}function Xe(e){let t=e._urlHandler;t||(t=o=>o);let r=e._urlRewrite??e.urlLogical??e.urlOriginal;r=t(r);const n=e._baseServer;return l(r&&typeof r=="string"),l(n.startsWith("/")),Y(r,n)}function Ze(){const{pathname:e}=Xe(this),t=e;return l(t.startsWith("/")),t}function no(){return x(!1,"`pageContext.url` is outdated. Use `pageContext.urlPathname`, `pageContext.urlParsed`, or `pageContext.urlOriginal` instead. (See https://vike.dev/migration/0.4.23 for more information.)",{onlyOnce:!0,showStackTrace:!0}),Ze.call(this)}function oo(){const e=Xe(this),{origin:t,pathname:r,pathnameOriginal:n,search:o,searchAll:s,searchOriginal:i,hash:a,hashOriginal:c}=e,f=J(),v=u=>{x(f,`pageContext.urlParsed.${u} isn't available on the server-side (HTTP requests don't include the URL hash by design)`,{onlyOnce:!0,showStackTrace:!0})},d={origin:t,pathname:r,pathnameOriginal:n,search:o,searchAll:s,searchOriginal:i,get hash(){return v("hash"),a},get hashOriginal(){return v("hashOriginal"),c},get hashString(){return x(!1,"pageContext.urlParsed.hashString has been renamed to pageContext.urlParsed.hashOriginal",{onlyOnce:!0,showStackTrace:!0}),v("hashString"),c},get searchString(){return x(!1,"pageContext.urlParsed.searchString has been renamed to pageContext.urlParsed.searchOriginal",{onlyOnce:!0,showStackTrace:!0}),i}};return z(d,"hashString"),z(d,"searchString"),f||(z(d,"hash"),z(d,"hashOriginal")),d}function z(e,t){const r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(e,t,{...r,enumerable:!1})}function so(e){l(typeof e.urlOriginal=="string"),l(typeof e.urlPathname=="string"),l(C(e.urlParsed)),l(e.urlPathname===e.urlParsed.pathname)}function io(e,t){const n=t.filter(({filesystemRoot:s})=>e.startsWith(s)).sort(U(({filesystemRoot:s})=>s.length))[0];let o;if(n){const{filesystemRoot:s,urlRoot:i}=n,a={pageId:e,filesystemRoot:s,urlRoot:i};l(i.startsWith("/")&&e.startsWith("/")&&s.startsWith("/"),a),l(e.startsWith(s),a),s!=="/"?(l(!s.endsWith("/"),a),o=I(e,s.length,0)):o=e,l(o.startsWith("/"),a),o=i+(i.endsWith("/")?"":"/")+I(o,1,0)}else o=e;return l(o.startsWith("/")),o=o.split("/").filter(s=>s!=="pages"&&s!=="src"&&s!=="index").join("/"),l(!o.includes(".page.")),l(!o.endsWith(".")),o.endsWith("/index")&&(o=I(o,0,-6)),o===""&&(o="/"),l(o.startsWith("/")),l(!o.endsWith("/")||o==="/"),o}async function ao(e,t,r){so(t);let n=e(t);if(et(n,`The Route Function ${r}`),n=await n,n===!1)return null;if(n===!0&&(n={}),g(C(n),`The Route Function ${r} should return a boolean or a plain JavaScript object (but it's ${_.cyan(`typeof result === ${JSON.stringify(typeof n)}`)} instead)`),"match"in n){const{match:i}=n;if(g(typeof i=="boolean",`The ${_.cyan("match")} value returned by the Route Function ${r} should be a boolean.`),!i)return null}let o=null;"precedence"in n&&(o=n.precedence,g(typeof o=="number",`The ${_.cyan("precedence")} value returned by the Route Function ${r} should be a number.`)),tt(n,`The ${_.cyan("routeParams")} object returned by the Route Function ${r} should`);const s=n.routeParams||{};return g(!("pageContext"in n),`Providing ${_.cyan("pageContext")} in Route Functions is prohibited, see https://vike.dev/route-function#cannot-provide-pagecontext`),l(C(s)),Object.keys(n).forEach(i=>{g(i==="match"||i==="routeParams"||i==="precedence",`The Route Function ${r} returned an object with an unknown property ${_.cyan(i)} (the known properties are ${_.cyan("match")}, ${_.cyan("routeParams")}, and ${_.cyan("precedence")})`)}),{precedence:o,routeParams:s}}function et(e,t){x(!$t(e),`${t} returned a promise, but asynchronous routing is deprecated and will be removed in the next major release, see https://vike.dev/route-function#async`,{onlyOnce:!0})}function Se(){const e=_.cyan("iKnowThePerformanceRisksOfAsyncRouteFunctions");x(!1,`${e} is deprecated and will be removed in the next major release`,{onlyOnce:!0})}function tt(e,t){l(t.endsWith(" should")),y(e,"routeParams")&&(l(t.endsWith(" should")),g(C(e.routeParams),`${t} be a plain JavaScript object.`),g(Bn(e.routeParams),`${t} only hold string values.`))}async function lo(e,t,r,n){await Promise.all(e.filter(a=>a.fileType===".page.route").map(a=>{var c;return(c=a.loadFile)==null?void 0:c.call(a)}));const{onBeforeRouteHook:o,filesystemRoots:s}=co(e,t,r);return{pageRoutes:uo(s,e,t,n),onBeforeRouteHook:o}}function uo(e,t,r,n){const o=[];let s=[...n];if(r.length>0){l(e===null);const i=!0;r.filter(a=>!a.isErrorPage).forEach(a=>{const c=a.pageId;s=go(s,c);let f=null;{const v="route",d=A(a,v);if(d){const u=d.value,b=vt(d.definedAt,v);typeof u=="string"?f={pageId:c,comesFromV1PageConfig:i,routeString:u,routeDefinedAt:b,routeType:"STRING"}:(l(se(u)),A(a,"iKnowThePerformanceRisksOfAsyncRouteFunctions","boolean")&&Se(),f={pageId:c,comesFromV1PageConfig:i,routeFunction:u,routeDefinedAt:b,routeType:"FUNCTION"})}}if(!f){const{routeFilesystem:v}=a;l(v);const{routeString:d,definedBy:u}=v;l(v.routeString.startsWith("/")),f={pageId:c,routeFilesystemDefinedBy:u,comesFromV1PageConfig:i,routeString:d,routeDefinedAt:null,routeType:"FILESYSTEM"}}l(f),o.push(f)})}if(r.length===0){l(e);const i=!1;s.filter(a=>!Pt(a)).forEach(a=>{const c=t.find(f=>f.pageId===a&&f.fileType===".page.route");if(!c||!("default"in c.fileExports)){const f=io(a,e);l(f.startsWith("/")),l(!f.endsWith("/")||f==="/"),o.push({pageId:a,comesFromV1PageConfig:i,routeString:f,routeDefinedAt:null,routeFilesystemDefinedBy:`${a}.page.*`,routeType:"FILESYSTEM"})}else{const{filePath:f,fileExports:v}=c;if(l(v.default),y(v,"default","string")){const d=v.default;g(d.startsWith("/"),`A Route String should start with a leading slash '/' but ${f} has \`export default '${d}'\`. Make sure to \`export default '/${d}'\` instead.`),o.push({pageId:a,comesFromV1PageConfig:i,routeString:d,routeDefinedAt:f,routeType:"STRING"});return}if(y(v,"default","function")){const d=v.default;"iKnowThePerformanceRisksOfAsyncRouteFunctions"in v&&Se(),o.push({pageId:a,comesFromV1PageConfig:i,routeFunction:d,routeDefinedAt:f,routeType:"FUNCTION"});return}g(!1,`The default export of ${f} should be a string or a function.`)}})}return o}function co(e,t,r){if(t.length>0)return{onBeforeRouteHook:St(r,"onBeforeRoute"),filesystemRoots:null};let n=null;const o=[];return e.filter(s=>s.fileType===".page.route"&&s.isDefaultPageFile).forEach(({filePath:s,fileExports:i})=>{if(l(i),"onBeforeRoute"in i){g(y(i,"onBeforeRoute","function"),`\`export { onBeforeRoute }\` of ${s} should be a function.`);const{onBeforeRoute:a}=i,c="onBeforeRoute";n={hookFilePath:s,hookFn:a,hookName:c,hookTimeout:$e(c)}}"filesystemRoutingRoot"in i&&(g(y(i,"filesystemRoutingRoot","string"),`\`export { filesystemRoutingRoot }\` of ${s} should be a string.`),g(y(i,"filesystemRoutingRoot","string"),`\`export { filesystemRoutingRoot }\` of ${s} is \`'${i.filesystemRoutingRoot}'\` but it should start with a leading slash \`/\`.`),o.push({filesystemRoot:fo(s),urlRoot:i.filesystemRoutingRoot}))}),{onBeforeRouteHook:n,filesystemRoots:o}}function fo(e){l(e.startsWith("/")),l(!e.endsWith("/"));const t=e.split("/"),r=I(t,0,-1).join("/")||"/";return l(r.startsWith("/")),l(!r.endsWith("/")||r==="/"),r}function go(e,t){const{length:r}=e;return e=e.filter(n=>n!==t),l(e.length===r-1),e}function rt(){const e="/";return l(po(e)),e}function po(e){return e.startsWith("/")}const Z=j("createPageContext.ts",{});async function nt(e){Z.pageFilesData||(Z.pageFilesData=await xt(!0));const{pageFilesAll:t,allPageIds:r,pageConfigs:n,pageConfigGlobal:o}=Z.pageFilesData,{pageRoutes:s,onBeforeRouteHook:i}=await lo(t,n,o,r),a=rt();l(Fe(a));const f={urlOriginal:e,_objectCreatedByVike:!0,_urlHandler:null,_urlRewrite:null,_baseServer:a,_isProduction:!0,_pageFilesAll:t,_pageConfigs:n,_pageConfigGlobal:o,_allPageIds:r,_pageRoutes:s,_onBeforeRouteHook:i};return Qe(f),f}function ot(e){const t=e.getAttribute("href");return!!(t===null||t===""||wn(t)||ho(e)||mo(t)||!bo(t)||!Ot(t)||!_o(e))}function _o(e){if(yo()){const r=e.getAttribute("data-vike-link");return r!==null&&r!=="false"}else return!0}function ho(e){const t=e.getAttribute("target"),r=e.getAttribute("rel");return t==="_blank"||t==="_external"||r==="external"||e.hasAttribute("download")}function mo(e){if(e.startsWith("#"))return!0;const t=r=>r.split("#")[0];return!!(e.includes("#")&&t(e)===t(window.location.href))}function bo(e){const t=rt();l(Fe(t));const{hasBaseServer:r}=Y(e,t);return r}function yo(){return!!window._disableAutomaticLinkInterception}function vo(e,t){let r=Po(e,t);return r==="viewport"&&!e._isProduction&&(ie(!1,"Viewport prefetching is disabled in development",{onlyOnce:!0}),r="hover"),{prefetchStaticAssets:r}}function Po(e,t){{const r=So(t);if(r!==null)return r}if("prefetchLinks"in e.exports&&g(!1,"`export { prefetchLinks }` is deprecated, use `export { prefetchStaticAssets }` instead."),"prefetchStaticAssets"in e.exports){const{prefetchStaticAssets:r}=e.exports;if(r===!1)return!1;if(r==="hover")return"hover";if(r==="viewport")return"viewport";const n="prefetchStaticAssets value should be false, 'hover', or 'viewport'";g(C(r),n);const o=Object.keys(r);g(o.length===1&&o[0]==="when",n);const{when:s}=r;if(s==="HOVER"||s==="VIEWPORT"){const i=s.toLowerCase();return x(!1,`prefetchStaticAssets value \`{ when: '${s}' }\` is outdated: set prefetchStaticAssets to '${i}' instead`,{onlyOnce:!0}),i}g(!1,n)}return"hover"}function So(e){const t=e.getAttribute("data-prefetch-static-assets"),r=e.getAttribute("data-prefetch");if(t===null&&r===null)return null;const n="The attribute data-prefetch is outdated, use data-prefetch-static-assets instead.";if(t){if(g(r===null,n),t==="hover"||t==="viewport")return t;if(t==="false")return!1;g(!1,`data-prefetch-static-assets has value "${t}" but it should instead be "false", "hover", or "viewport"`)}if(r){if(l(!t),x(!1,n,{onlyOnce:!0}),r==="true")return"viewport";if(r==="false")return"hover";g(!1,`data-prefetch has value "${r}" but it should instead be "true" or "false"`)}l(!1)}const st=new Map;function xo(e){const t=it(e);return st.has(t)}function Oo(e){const t=it(e);st.set(t,!0)}function it(e){return Y(e,"/").pathname}function H(e){return e.fileType===".css"?[]:e.exportNames?e.exportNames:(l(e.fileExports,e.filePath),Object.keys(e.fileExports))}function Ro({pageFilesClientSide:e,pageFilesServerSide:t,pageId:r}){return{isHtmlOnly:n(),isClientRouting:s()};function n(){return t.some(a=>a.pageId===r&&a.fileType===".page")?(o(),!1):!(!t.some(a=>a.pageId===r&&a.fileType===".page.server")||e.some(a=>a.pageId===r&&a.fileType===".page.client"&&H(a).includes("render")))}function o(){const i=e.some(a=>H(a).includes("render"));g(i,["No client-side `render()` hook found.","See https://vike.dev/render-modes for more information.",["Loaded client-side page files (none of them `export { render }`):",...e.map((a,c)=>` (${c+1}): ${a.filePath}`)].join(`
`)].join(" "))}function s(){return e.some(a=>H(a).includes("clientRouting"))}}function wo({pageFilesClientSide:e,pageFilesServerSide:t,isHtmlOnly:r,isClientRouting:n}){let o=[];const s=t.filter(a=>!e.includes(a)),i=[];if(i.push(...e.map(a=>({id:a.filePath,onlyAssets:!1,eagerlyImported:!1}))),i.push(...s.map(a=>({id:a.filePath,onlyAssets:!0,eagerlyImported:!1}))),r)o=e.map(a=>a.filePath);else{const a=Eo(n);i.push({id:a,onlyAssets:!1,eagerlyImported:!1}),o=[a]}return{clientEntries:o,clientDependencies:i}}function Eo(e){return e?"@@vike/dist/esm/client/client-routing-runtime/entry.js":"@@vike/dist/esm/client/server-routing-runtime/entry.js"}function Co(e,t){let r=Ae(e,t);const n=Te(e,t),{isHtmlOnly:o,isClientRouting:s}=Ro({pageFilesClientSide:r,pageFilesServerSide:n,pageId:t});o&&(r=r.filter(c=>c.isEnv("CLIENT_ONLY")&&!H(c).includes("render")),r=$o(r));const{clientEntries:i,clientDependencies:a}=wo({pageFilesClientSide:r,pageFilesServerSide:n,isHtmlOnly:o,isClientRouting:s});return{isHtmlOnly:o,isClientRouting:s,clientEntries:i,clientDependencies:a,pageFilesClientSide:r,pageFilesServerSide:n}}async function To(e,t,{sharedPageFilesAlreadyLoaded:r}){const n=Ae(e,t);await Promise.all(n.map(async o=>{var s;l(o.isEnv("CLIENT_ONLY")||o.isEnv("CLIENT_AND_SERVER")),!(r&&o.isEnv("CLIENT_AND_SERVER"))&&await((s=o.loadExportNames)==null?void 0:s.call(o))}))}function $o(e){const t=[];for(const r of e)if(t.push(r),H(r).includes("overrideDefaultPages"))break;return t}function jo(e,t,r){var n,o;if(e){const s=((n=A(e,"clientRouting","boolean"))==null?void 0:n.value)??!1;return{isClientSideRenderable:((o=A(e,"isClientSideRenderable","boolean"))==null?void 0:o.value)??!1,isClientRouting:s}}else{const{isHtmlOnly:s,isClientRouting:i}=Co(t,r);return{isClientSideRenderable:!s,isClientRouting:i}}}async function at(e,t){await To(t._pageFilesAll,e,{sharedPageFilesAlreadyLoaded:!1});const r=Rt(t._pageConfigs,e),{isClientSideRenderable:n,isClientRouting:o}=jo(r,t._pageFilesAll,e);return n&&o}const lt="@",re=":";function ko(e,t="Invalid"){let r=`${t} Route String ${$(e)}`;g(e!=="",`${r} (empty string): set it to ${$("/")} instead`),g(["/","*"].includes(e[0]),`${r}: it should start with ${$("/")} or ${$("*")}`),g(!e.includes("**"),`${r}: set it to ${$(e.split("**").join("*"))} instead`)}function ne(e,t){ko(e);const r=ut(e),n=r.map(d=>d.param?"[^/]+":d.glob?d.isLastDir?"|/.*":".*":kt(d.static)).map(d=>`(${d})`).join(""),o=new RegExp(`^${n}/?$`),s=t.match(o);if(!s)return null;const i={},[a,...c]=s;let f=0;const v=r.filter(d=>d.glob).length>1;return r.forEach((d,u)=>{let b=c[u];if(d.param&&(i[d.param]=b),d.glob){const T=`*${v?++f:""}`;d.isLastDir&&(b=b.slice(1)),i[T]=b}}),{routeParams:i}}function ut(e){const t=[],r=o=>{const s=t[t.length-1];s!=null&&s.static?s.static+=o:t.push({static:o})},n=e.split("/");return n.forEach((o,s)=>{const i=s===0,a=s===n.length-1;No(o)?(x(!o.startsWith(re),`Outdated Route String ${$(e)}, use ${$(e.split(re).join(lt))} instead`,{onlyOnce:!0}),i||r("/"),t.push({param:o.slice(1)})):o==="*"&&a&&e!=="*"&&e!=="/*"?t.push({glob:!0,isLastDir:!0}):(i||r("/"),o.split("*").forEach((c,f)=>{f!==0&&t.push({glob:!0}),c!==""&&r(c)}))}),t}function W(e){const t=ut(e),r=a=>(a==null?void 0:a.split("/").filter(Boolean).length)||0;let n=0;for(const a of t){if(!a.static)break;n+=r(a.static)}const o=t.map(a=>r(a.static)).reduce((a,c)=>a+c,0),s=t.filter(a=>a.param).length,i=t.filter(a=>a.glob).length;return{numberOfStaticPartsBeginning:n,numberOfStaticParts:o,numberOfParams:s,numberOfGlobs:i}}function No(e){return e.startsWith(lt)||e.startsWith(re)}function xe(e){const r=ne(e,e);return l(r),Object.keys(r.routeParams).length===0}function $(e){return J()?`'${e}'`:(e===""&&(e="''"),_.cyan(e))}function Fo(e){e.sort(Ao).sort(k(t=>t.routeType==="FUNCTION"&&!!t.precedence&&t.precedence<0)).sort(k(t=>t.routeType==="STRING"&&xe(t.routeString)===!1)).sort(k(t=>t.routeType==="FUNCTION"&&!t.precedence)).sort(k(t=>t.routeType==="STRING"&&xe(t.routeString)===!0)).sort(k(t=>t.routeType==="FILESYSTEM")).sort(k(t=>t.routeType==="FUNCTION"&&!!t.precedence&&t.precedence>0))}function Ao(e,t){{const r=e.precedence??0,n=t.precedence??0;if(r!==n)return r>n?-1:1}if(!t.routeString||!e.routeString)return 0;{const n=U(o=>W(o).numberOfStaticPartsBeginning)(e.routeString,t.routeString);if(n!==0)return n}{const n=U(o=>W(o).numberOfStaticParts)(e.routeString,t.routeString);if(n!==0)return n}{const n=wt(o=>W(o).numberOfGlobs)(e.routeString,t.routeString);if(n!==0)return n}{const n=U(o=>W(o).numberOfParams)(e.routeString,t.routeString);if(n!==0)return n}return 0}async function Io(e){const t={};if(!e._onBeforeRouteHook)return null;const r=await Lo(e._onBeforeRouteHook,e);return r&&(m(t,r),y(t,"_pageId","string")||y(t,"_pageId","null"))?(y(t,"routeParams")?l(y(t,"routeParams","object")):m(t,{routeParams:{}}),m(t,{_routingProvidedByOnBeforeRouteHook:!0,_debugRouteMatches:"CUSTOM_ROUTING"}),t):(m(t,{_routingProvidedByOnBeforeRouteHook:!1}),t)}async function Lo(e,t){let r=e.hookFn(t);et(r,`The onBeforeRoute() hook ${e.hookFilePath}`),r=await F(()=>r,e);const n=`The onBeforeRoute() hook defined by ${e.hookFilePath}`;if(g(r==null||Dn(r,["pageContext"])&&y(r,"pageContext"),`${n} should return ${_.cyan("null")}, ${_.cyan("undefined")}, or a plain JavaScript object ${_.cyan("{ pageContext: { /* ... */ } }")}`),r==null)return null;if(g(y(r,"pageContext","object"),`${n} returned ${_.cyan("{ pageContext }")} but pageContext should be a plain JavaScript object.`),y(r.pageContext,"_pageId")&&!y(r.pageContext,"_pageId","null")){const i=`${n} returned ${_.cyan("{ pageContext: { _pageId } }")} but ${_.cyan("_pageId")} should be`;g(y(r.pageContext,"_pageId","string"),`${i} a string or null`),g(t._allPageIds.includes(r.pageContext._pageId),`${i} ${Vn(t._allPageIds.map(a=>_.cyan(a)),"or")}`)}y(r.pageContext,"routeParams")&&tt(r.pageContext,`${n} returned ${_.cyan("{ pageContext: { routeParams } }")} but routeParams should`);const o=i=>`${n} returned ${_.cyan(`{ pageContext: { ${i} } }`)} which is deprecated. Return ${_.cyan("{ pageContext: { urlLogical } }")} instead.`;y(r.pageContext,"url")&&(x(!1,o("url"),{onlyOnce:!0}),r.pageContext.urlLogical=r.pageContext.url,delete r.pageContext.url),y(r.pageContext,"urlOriginal")&&(x(!1,o("urlOriginal"),{onlyOnce:!0}),r.pageContext.urlLogical=r.pageContext.urlOriginal,delete r.pageContext.urlOriginal),y(r.pageContext,"urlLogical")&&Et(r.pageContext.urlLogical,`${n} returned ${_.cyan("{ pageContext: { urlLogical } }")} but ${_.cyan("urlLogical")}`),Me(r.pageContext,{hookFilePath:e.hookFilePath,hookName:"onBeforeRoute"});const s={};return m(s,r.pageContext),s}var M;function Oe(...e){var t;M||(M=(t=globalThis.__brillout_debug_createDebugger)==null?void 0:t.call(globalThis,"vike:routing")),M&&M(...e)}J()&&B();async function ct(e){Oe("Pages routes:",e._pageRoutes),Qe(e);const t={},r=await Io(e);if(r){if(r._routingProvidedByOnBeforeRouteHook)return l(r._pageId),r;m(t,r)}const n={};m(n,e),m(n,r);const o=n._allPageIds;l(o.length>=0),g(n._pageFilesAll.length>0||n._pageConfigs.length>0,"No *.page.js file found. You must create at least one *.page.js file."),g(o.length>0,"You must create at least one *.page.js file that isn't _default.page.*");const{urlPathname:s}=n;l(s.startsWith("/"));const i=[];await Promise.all(n._pageRoutes.map(async c=>{const{pageId:f,routeType:v}=c;if(c.routeType==="FILESYSTEM"){const{routeString:d}=c,u=ne(d,s);if(u){const{routeParams:b}=u;i.push({pageId:f,routeParams:b,routeString:d,routeType:v})}return}if(c.routeType==="STRING"){const{routeString:d}=c,u=ne(d,s);if(u){const{routeParams:b}=u;l(v==="STRING"),i.push({pageId:f,routeString:d,routeParams:b,routeType:v})}return}if(c.routeType==="FUNCTION"){const{routeFunction:d,routeDefinedAt:u}=c,b=await ao(d,n,u);if(b){const{routeParams:T,precedence:V}=b;i.push({pageId:f,precedence:V,routeParams:T,routeType:v})}return}l(!1)})),Fo(i);const a=i[0];if(Oe(`Route matches for URL ${_.cyan(s)} (in precedence order):`,i),m(t,{_debugRouteMatches:i}),!a)return m(t,{_pageId:null,routeParams:{}}),t;{const{routeParams:c}=a;l(C(c)),m(t,{_pageId:a.pageId,routeParams:a.routeParams})}return t}B();const Re=j("prefetch.ts",{linkPrefetchHandlerAdded:new Map});async function Ho(e,t){try{await ae(e,t)}catch(r){if(le(r))oe(r,!0);else throw r}}function Do(e){Oo(e.urlPathname),[...document.getElementsByTagName("A")].forEach(r=>{if(Re.linkPrefetchHandlerAdded.has(r))return;Re.linkPrefetchHandlerAdded.set(r,!0);const n=r.getAttribute("href");if(ot(r)||(l(n),xo(n)))return;const{prefetchStaticAssets:o}=vo(e,r);if(o&&(o==="hover"&&(r.addEventListener("mouseover",()=>{ee(n)}),r.addEventListener("touchstart",()=>{ee(n)},{passive:!0})),o==="viewport")){const s=new IntersectionObserver(i=>{i.forEach(a=>{a.isIntersecting&&(ee(n),s.disconnect())})});s.observe(r)}})}async function ee(e){const t=await nt(e);let r;try{r=await ct(t)}catch{return}r!=null&&r._pageId&&await at(r._pageId,t)&&await Ho(r._pageId,t)}function dt(e){if(e==="preserve-scroll")return;let t;if(e==="scroll-to-top-or-hash"){const r=Vo();if(r&&r!=="top"){const n=document.getElementById(r)||document.getElementsByName(r)[0];if(n){n.scrollIntoView();return}}t={x:0,y:0}}else l("x"in e&&"y"in e),t=e;Bo(t)}function Bo(e){const t=()=>window.scrollTo(e.x,e.y),r=()=>window.scrollX===e.x&&window.scrollY===e.y;r()||(t(),!r()&&requestAnimationFrame(()=>{t(),!r()&&setTimeout(async()=>{if(t(),r())return;const n=new Date().getTime();for(;;)if(await xn(10),t(),r()||new Date().getTime()-n>100)return},0)}))}function Vo(){let{hash:e}=window.location;return e===""?null:(l(e.startsWith("#")),e=e.slice(1),e)}function zo(){window.addEventListener("scroll",On(be,Math.ceil(1e3/3)),{passive:!0}),De(be)}const N=j("onBrowserHistoryNavigation.ts",{previousState:K()});function Wo(){window.addEventListener("popstate",e=>{const t=K(),r=t.historyState.scrollPosition||"scroll-to-top-or-hash",n=t.historyState.triggedBy==="user",o=t.urlWithoutHash===N.previousState.urlWithoutHash,s=!t.historyState.timestamp||!N.previousState.historyState.timestamp?null:t.historyState.timestamp<N.previousState.historyState.timestamp;N.previousState=t,o&&!n?window.history.state===null?(Be(),N.previousState=K()):dt(r):D({scrollTarget:r,isBackwardNavigation:s,isUserLandPushStateNavigation:n})})}function K(){return{urlWithoutHash:ue({withoutHash:!0}),historyState:ce()}}function Mo(){N.previousState=K()}const ft=j("scrollRestoration.ts",{});function Uo(){we(),De(we),Rn(()=>ft.initialRenderIsDone&&pe())}function Go(){ft.initialRenderIsDone=!0}function pe(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual")}function we(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="auto")}const P=j("renderPageClientSide.ts",{renderCounter:0});async function D(e){var he;const{scrollTarget:t,urlOriginal:r=ue(),overwriteLastHistoryEntry:n=!1,isBackwardNavigation:o,pageContextsFromRewrite:s=[],redirectCount:i=0,isUserLandPushStateNavigation:a,isClientSideNavigation:c=!0}=e,{abortRender:f,setHydrationCanBeAborted:v,isFirstRender:d}=Jo();if(l(c===!d),Jn(s.length,i),P.clientRoutingIsDisabled){G(r);return}const u=await nt(r);if(f())return;m(u,{isBackwardNavigation:o,isClientSideNavigation:c});{const p=Kn(s);m(u,p)}let b={};const T=p=>{l(p),l(!("err"in b)),l(!("errorWhileRendering"in u)),b.err=p,u.errorWhileRendering=p};if(!d){try{b={pageContextFromRoute:await ct(u)}}catch(p){T(p)}if(f())return;if(b.pageContextFromRoute){const{pageContextFromRoute:p}=b;m(u,p);let S;if(!p._pageId)S=!1;else if(S=await at(p._pageId,u),f())return;if(!S){G(r);return}const w=p._pageId&&((he=P.previousPageContext)==null?void 0:he._pageId)&&p._pageId===P.previousPageContext._pageId;if(a&&w)return}}const V=!d;if(V&&!P.isTransitioning){if(P.onPageTransitionStart){const p=P.onPageTransitionStart,{hookFn:S}=p;await F(()=>S(u),p)}if(P.isTransitioning=!0,f())return}if(d){l(!b.pageContextFromRoute),l(!b.err);try{b.pageContextFromHooks=await qn(u)}catch(p){T(p)}if(f())return}else if(!b.err){const{pageContextFromRoute:p}=b;l(p),l(p._pageId),l(y(p,"_pageId","string")),m(u,p);try{b.pageContextFromHooks=await Xn(u)}catch(S){T(S)}if(f())return}if("err"in b){const{err:p}=b;if(ve(p)||console.error(p),Ee(p,u,d))return;if(ve(p)){const S=p;Gn(p,u._isProduction,u);const w=S._pageContextAbort;if(w._urlRewrite){await D({...e,scrollTarget:"scroll-to-top-or-hash",pageContextsFromRewrite:[...s,w]});return}if(w._urlRedirect){const q=w._urlRedirect.url;if(q.startsWith("http")){window.location.href=q;return}else await D({...e,scrollTarget:"scroll-to-top-or-hash",urlOriginal:q,overwriteLastHistoryEntry:!1,isBackwardNavigation:!1,redirectCount:i+1});return}l(w.abortStatusCode),m(u,w),w.abortStatusCode===404&&m(u,{is404:!0})}else m(u,{is404:!1});try{b.pageContextFromHooks=await Qn(u)}catch(S){if(Ee(S,u,d)||(d||setTimeout(()=>{window.location.pathname=r},0),Sn(p,S)))return;throw S}if(f())return}const{pageContextFromHooks:_e}=b;l(_e),m(u,_e),Q(u,"onPageTransitionStart");const gt=L(u,"onPageTransitionStart");if(P.onPageTransitionStart=gt,u.exports.hydrationCanBeAborted?v():x(!Pn(),"You seem to be using React; we recommend setting hydrationCanBeAborted to true, see https://vike.dev/hydrationCanBeAborted",{onlyOnce:!0}),!f()&&!(P.renderPromise&&(await P.renderPromise,l(P.renderPromise===void 0),f()))){if(Ko(r,n),P.previousPageContext=u,l(P.renderPromise===void 0),P.renderPromise=(async()=>{await Ct(u,!0),Do(u),P.renderPromise=void 0})(),await P.renderPromise,l(P.renderPromise===void 0),d){Q(u,"onHydrationEnd");const p=L(u,"onHydrationEnd");if(p){const{hookFn:S}=p;if(await F(()=>S(u),p),f(!0))return}}if(!f(!0)){if(V){Q(u,"onPageTransitionEnd");const p=L(u,"onPageTransitionEnd");if(p){const{hookFn:S}=p;if(await F(()=>S(u),p),f(!0))return}P.isTransitioning=void 0}dt(t),pe(),Go()}}}function Ko(e,t){ue()!==e&&(pe(),En(e,t),Mo())}function Ee(e,t,r){return!!(to(e)||Yo(e,t,r))}function Yo(e,t,r){if(!le(e))return!1;if(r)throw oe(e,!1),e;return oe(e,!0),G(t.urlOriginal),!0}function oe(e,t){l(le(e)),P.clientRoutingIsDisabled=!0,t&&console.log(e),ie(!1,["Failed to fetch static asset.","This usually happens when a new frontend is deployed.","Falling back to Server Routing.","(The next page navigation will use Server Routing instead of Client Routing.)"].filter(Boolean).join(" "),{onlyOnce:!0})}function Jo(){const e=++P.renderCounter;l(e>=1);let t=!1;return{abortRender:o=>!o&&e===1&&!t?!1:e!==P.renderCounter,setHydrationCanBeAborted:()=>{t=!0},isFirstRender:e===1}}function Ce(){return P.renderCounter}function qo(){document.addEventListener("click",Qo)}function Qo(e){if(!Xo(e))return;const t=Zo(e.target);if(!t)return;const r=t.getAttribute("href");if(ot(t))return;l(r),e.preventDefault();const o=![null,"false"].includes(t.getAttribute("keep-scroll-position"))?"preserve-scroll":"scroll-to-top-or-hash";D({scrollTarget:o,urlOriginal:r,isBackwardNavigation:!1})}function Xo(e){return e.button===0&&!e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey}function Zo(e){for(;e.tagName!=="A";){const{parentNode:t}=e;if(!t)return null;e=t}return e}function es(){Uo(),Be(),zo(),Tn(),l(Ce()===0),D({scrollTarget:"preserve-scroll",isBackwardNavigation:null,isClientSideNavigation:!1}),l(Ce()===1),qo(),Wo()}B();const ts=!0;Tt(ts);es();
