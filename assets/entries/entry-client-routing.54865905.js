import{j as ce,k as a,p as g,m as pt,b as d,_,s as _t,n as ht,q as U,r as N,t as I,u as v,v as je,d as R,w as X,x as V,y as Z,z,A as L,B as ke,C as mt,D as Ie,o as h,a as bt,E as Ae,F as Fe,G as yt,H as vt,I as J,J as Pt,K as St,L as xt,c as Ot,M as Le,N as Rt,O as He,P as wt,Q as A,R as Ct,S as Et,l as se,T as de,g as fe,i as te,U as Tt,h as $t,V as Nt}from"../chunks/chunk-73ff6cc9.js";function j(e){return typeof e!="object"||e===null?!1:Object.getPrototypeOf(e)===null?!0:e.constructor.name==="Object"}function be(e){return"["+e.map(t=>"'"+t+"'").join(", ")+"]"}function re(e,t){const r=Object.getOwnPropertyDescriptor(e,t);return!!r&&!("value"in r)&&!!r.get}function jt(e){return typeof e=="object"&&e!==null&&"then"in e&&ce(e.then)}function kt(e){return[null,void 0].includes(e)?String(e):["boolean","number","string"].includes(typeof e)?JSON.stringify(e):null}function It(e){return e.replace(/[/\-\\^$*+?.()|[\]{}]/g,"\\$&")}function H(e,t,r){const n=Ft(e,t);if(n===null)return null;const{value:o,definedAt:s}=n;return r&&At(o,r,t,s),n}function At(e,t,r,n){a(e!==null);const o=typeof e;if(o===t)return;const s=kt(e),i=s!==null?`value ${g.cyan(s)}`:`type ${g.cyan(o)}`,u=`${pt("Config",r,{definedAt:n})} has an invalid ${i}: it should be a ${g.cyan(t)} instead`;d(!1,u)}function Ft(e,t){const r=e.configValues[t];return!r||r.value===null?null:r}const Lt=["headings","default"],Ht=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Lt},Symbol.toStringTag,{value:"Module"})),Bt=["headings","default"],Dt=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Bt},Symbol.toStringTag,{value:"Module"})),Vt=["headings","default"],zt=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Vt},Symbol.toStringTag,{value:"Module"})),Wt=["headings","default"],Mt=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Wt},Symbol.toStringTag,{value:"Module"})),Ut=["headings","default"],Gt=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Ut},Symbol.toStringTag,{value:"Module"})),Kt=["headings","default"],Yt=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Kt},Symbol.toStringTag,{value:"Module"})),Jt=["headings","default"],qt=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Jt},Symbol.toStringTag,{value:"Module"})),Qt=["headings","default"],Xt=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Qt},Symbol.toStringTag,{value:"Module"})),Zt=["headings","default"],er=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Zt},Symbol.toStringTag,{value:"Module"})),tr=["headings","default"],rr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:tr},Symbol.toStringTag,{value:"Module"})),nr=["headings","default"],or=Object.freeze(Object.defineProperty({__proto__:null,exportNames:nr},Symbol.toStringTag,{value:"Module"})),sr=["headings","default"],ir=Object.freeze(Object.defineProperty({__proto__:null,exportNames:sr},Symbol.toStringTag,{value:"Module"})),ar=["Page"],lr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:ar},Symbol.toStringTag,{value:"Module"})),ur=["headings","default"],cr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:ur},Symbol.toStringTag,{value:"Module"})),dr=["headings","default"],fr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:dr},Symbol.toStringTag,{value:"Module"})),gr=["headings","default"],pr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:gr},Symbol.toStringTag,{value:"Module"})),_r=["headings","default"],hr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:_r},Symbol.toStringTag,{value:"Module"})),mr=["headings","default"],br=Object.freeze(Object.defineProperty({__proto__:null,exportNames:mr},Symbol.toStringTag,{value:"Module"})),yr=["headings","default"],vr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:yr},Symbol.toStringTag,{value:"Module"})),Pr=["headings","default"],Sr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Pr},Symbol.toStringTag,{value:"Module"})),xr=["headings","default"],Or=Object.freeze(Object.defineProperty({__proto__:null,exportNames:xr},Symbol.toStringTag,{value:"Module"})),Rr=["headings","default"],wr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Rr},Symbol.toStringTag,{value:"Module"})),Cr=["headings","default"],Er=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Cr},Symbol.toStringTag,{value:"Module"})),Tr=["headings","default"],$r=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Tr},Symbol.toStringTag,{value:"Module"})),Nr=["headings","default"],jr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Nr},Symbol.toStringTag,{value:"Module"})),kr=["headings","default"],Ir=Object.freeze(Object.defineProperty({__proto__:null,exportNames:kr},Symbol.toStringTag,{value:"Module"})),Ar=["headings","default"],Fr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Ar},Symbol.toStringTag,{value:"Module"})),Lr=["headings","default"],Hr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Lr},Symbol.toStringTag,{value:"Module"})),Br=["headings","default"],Dr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Br},Symbol.toStringTag,{value:"Module"})),Vr=["headings","default"],zr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Vr},Symbol.toStringTag,{value:"Module"})),Wr=["headings","default"],Mr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Wr},Symbol.toStringTag,{value:"Module"})),Ur=["headings","default"],Gr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Ur},Symbol.toStringTag,{value:"Module"})),Kr=["headings","default"],Yr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Kr},Symbol.toStringTag,{value:"Module"})),Jr=[],qr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Jr},Symbol.toStringTag,{value:"Module"})),Qr=["render"],Xr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Qr},Symbol.toStringTag,{value:"Module"})),Zr=[],en=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Zr},Symbol.toStringTag,{value:"Module"})),T={},Be={},tn={},$={},rn=[],De={},nn=!0,on=[],sn={configValuesImported:[]},an=Object.assign({}),ln={...an};T[".page"]=ln;const un=Object.assign({}),cn={...un};$[".page"]=cn;const dn=Object.assign({"/pages/Abort.page.server.mdx":Ht,"/pages/RPC-vs-GraphQL-REST.page.server.mdx":Dt,"/pages/RPC.page.server.mdx":zt,"/pages/abort-vs-error.page.server.mdx":Mt,"/pages/babel-plugin.page.server.mdx":Gt,"/pages/disableNamingConvention.page.server.mdx":Yt,"/pages/error-handling.page.server.mdx":qt,"/pages/event-based.page.server.mdx":Xt,"/pages/file-upload.page.server.mdx":er,"/pages/form-validation.page.server.mdx":rr,"/pages/getContext.page.server.mdx":or,"/pages/httpHeaders.page.server.mdx":ir,"/pages/index/index.page.server.tsx":lr,"/pages/initial-data.page.server.mdx":cr,"/pages/initial-page-data.page.server.mdx":fr,"/pages/install.page.server.mdx":pr,"/pages/next.page.server.mdx":hr,"/pages/nuxt.page.server.mdx":br,"/pages/onAbort.page.server.mdx":vr,"/pages/onBug.page.server.mdx":Sr,"/pages/permissions.page.server.mdx":Or,"/pages/react-native.page.server.mdx":wr,"/pages/root.page.server.mdx":Er,"/pages/shield.page.server.mdx":$r,"/pages/svelte-kit.page.server.mdx":jr,"/pages/telefunc.page.server.mdx":Ir,"/pages/telefuncFiles.page.server.mdx":Fr,"/pages/telefuncUrl.page.server.mdx":Hr,"/pages/transformer.page.server.mdx":Dr,"/pages/vike.page.server.mdx":zr,"/pages/vite-plugin.page.server.mdx":Mr,"/pages/vite.page.server.mdx":Gr,"/pages/webpack-plugin.page.server.mdx":Yr}),fn={...dn};$[".page.server"]=fn;const gn=Object.assign({}),pn={...gn};Be[".page.route"]=pn;const _n=Object.assign({"/pages/index/index.page.client.ts":()=>_(()=>import("./pages_index_index.page.client.d0c85e9b.js"),["assets/entries/pages_index_index.page.client.d0c85e9b.js","assets/chunks/chunk-a33cf6d6.js","assets/static/index.page.client.a95a6883.css"])}),hn={..._n};T[".page.client"]=hn;const mn=Object.assign({"/pages/index/index.page.client.ts":qr}),bn={...mn};$[".page.client"]=bn;const yn=Object.assign({"/pages/Abort.page.server.mdx":()=>_(()=>import("./pages_Abort.page.server.extractAssets.949d4f22.js").then(e=>e.A),[]),"/pages/RPC-vs-GraphQL-REST.page.server.mdx":()=>_(()=>import("./pages_RPC-vs-GraphQL-REST.page.server.extractAssets.4ed993c7.js"),[]),"/pages/RPC.page.server.mdx":()=>_(()=>import("./pages_RPC.page.server.extractAssets.4ed993c7.js"),[]),"/pages/abort-vs-error.page.server.mdx":()=>_(()=>import("./pages_abort-vs-error.page.server.extractAssets.4ed993c7.js"),[]),"/pages/babel-plugin.page.server.mdx":()=>_(()=>import("./pages_babel-plugin.page.server.extractAssets.4ed993c7.js"),[]),"/pages/disableNamingConvention.page.server.mdx":()=>_(()=>import("./pages_disableNamingConvention.page.server.extractAssets.4ed993c7.js"),[]),"/pages/error-handling.page.server.mdx":()=>_(()=>import("./pages_error-handling.page.server.extractAssets.4ed993c7.js"),[]),"/pages/event-based.page.server.mdx":()=>_(()=>import("./pages_event-based.page.server.extractAssets.4ed993c7.js"),[]),"/pages/file-upload.page.server.mdx":()=>_(()=>import("./pages_file-upload.page.server.extractAssets.4ed993c7.js"),[]),"/pages/form-validation.page.server.mdx":()=>_(()=>import("./pages_form-validation.page.server.extractAssets.4ed993c7.js"),[]),"/pages/getContext.page.server.mdx":()=>_(()=>import("./pages_getContext.page.server.extractAssets.4ed993c7.js"),[]),"/pages/httpHeaders.page.server.mdx":()=>_(()=>import("./pages_httpHeaders.page.server.extractAssets.4ed993c7.js"),[]),"/pages/index/index.page.server.tsx":()=>_(()=>import("./pages_index_index.page.server.extractAssets.3ce3e902.js"),["assets/entries/pages_index_index.page.server.extractAssets.3ce3e902.js","assets/static/index.page.server.6c2d1ceb.css"]),"/pages/initial-data.page.server.mdx":()=>_(()=>import("./pages_initial-data.page.server.extractAssets.4ed993c7.js"),[]),"/pages/initial-page-data.page.server.mdx":()=>_(()=>import("./pages_initial-page-data.page.server.extractAssets.4ed993c7.js"),[]),"/pages/install.page.server.mdx":()=>_(()=>import("./pages_install.page.server.extractAssets.4ed993c7.js"),[]),"/pages/next.page.server.mdx":()=>_(()=>import("./pages_next.page.server.extractAssets.4ed993c7.js"),[]),"/pages/nuxt.page.server.mdx":()=>_(()=>import("./pages_nuxt.page.server.extractAssets.4ed993c7.js"),[]),"/pages/onAbort.page.server.mdx":()=>_(()=>import("./pages_onAbort.page.server.extractAssets.4ed993c7.js"),[]),"/pages/onBug.page.server.mdx":()=>_(()=>import("./pages_onBug.page.server.extractAssets.4ed993c7.js"),[]),"/pages/permissions.page.server.mdx":()=>_(()=>import("./pages_permissions.page.server.extractAssets.4ed993c7.js"),[]),"/pages/react-native.page.server.mdx":()=>_(()=>import("./pages_react-native.page.server.extractAssets.4ed993c7.js"),[]),"/pages/root.page.server.mdx":()=>_(()=>import("./pages_root.page.server.extractAssets.4ed993c7.js"),[]),"/pages/shield.page.server.mdx":()=>_(()=>import("./pages_shield.page.server.extractAssets.4ed993c7.js"),[]),"/pages/svelte-kit.page.server.mdx":()=>_(()=>import("./pages_svelte-kit.page.server.extractAssets.4ed993c7.js"),[]),"/pages/telefunc.page.server.mdx":()=>_(()=>import("./pages_telefunc.page.server.extractAssets.4ed993c7.js"),[]),"/pages/telefuncFiles.page.server.mdx":()=>_(()=>import("./pages_telefuncFiles.page.server.extractAssets.4ed993c7.js"),[]),"/pages/telefuncUrl.page.server.mdx":()=>_(()=>import("./pages_telefuncUrl.page.server.extractAssets.4ed993c7.js"),[]),"/pages/transformer.page.server.mdx":()=>_(()=>import("./pages_transformer.page.server.extractAssets.4ed993c7.js"),[]),"/pages/vike.page.server.mdx":()=>_(()=>import("./pages_vike.page.server.extractAssets.4ed993c7.js"),[]),"/pages/vite-plugin.page.server.mdx":()=>_(()=>import("./pages_vite-plugin.page.server.extractAssets.4ed993c7.js"),[]),"/pages/vite.page.server.mdx":()=>_(()=>import("./pages_vite.page.server.extractAssets.4ed993c7.js"),[]),"/pages/webpack-plugin.page.server.mdx":()=>_(()=>import("./pages_webpack-plugin.page.server.extractAssets.4ed993c7.js"),[])}),vn={...yn};De[".page.server"]=vn;$[".page.server"]=$[".page.server"]??{};$[".page.server"]["@brillout/docpress/renderer/_default.page.server.js"]=Xr;T[".css"]=T[".css"]??{};T[".css"]["@brillout/docpress/renderer/_default.page.server.css"]=()=>_(()=>Promise.resolve({}),["assets/static/default.page.server.e70d4382.css"]);T[".page.client"]=T[".page.client"]??{};T[".page.client"]["@brillout/docpress/renderer/_default.page.client.js"]=()=>_(()=>import("../chunks/chunk-d6ef409d.js"),["assets/chunks/chunk-d6ef409d.js","assets/chunks/chunk-a33cf6d6.js"]);$[".page.client"]=$[".page.client"]??{};$[".page.client"]["@brillout/docpress/renderer/_default.page.client.js"]=en;T[".css"]=T[".css"]??{};T[".css"]["@brillout/docpress/renderer/_default.page.client.css"]=()=>_(()=>Promise.resolve({}),["assets/static/default.page.client.92e9337b.css"]);const Pn=Object.freeze(Object.defineProperty({__proto__:null,isGeneratedFile:nn,neverLoaded:De,pageConfigGlobalSerialized:sn,pageConfigsSerialized:on,pageFilesEager:Be,pageFilesExportNamesEager:$,pageFilesExportNamesLazy:tn,pageFilesLazy:T,pageFilesList:rn},Symbol.toStringTag,{value:"Module"}));_t(Pn);function Sn(){ht(),U()}function xn(){var n,o,s,i;const e=!!((o=(n=window.__REACT_DEVTOOLS_GLOBAL_HOOK__)==null?void 0:n.renderers)!=null&&o.size),t=!!((i=(s=window.__REACT_DEVTOOLS_GLOBAL_HOOK__)==null?void 0:s.rendererInterfaces)!=null&&i.size),r=!!window.__vite_plugin_react_preamble_installed__;return e||t||r}function On(e,t){return!N(e)||!N(t)?!1:e.message===t.message}function q(e){window.location.href=e}function Rn(e){return new Promise(t=>setTimeout(t,e))}function wn(e,t){let r=!1;return()=>{r||(r=!0,setTimeout(()=>{r=!1,e()},t))}}function Ve(e){window.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&e()})}function Cn(e){window.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&e()})}function En(e){return!e.startsWith("/")&&!e.startsWith(".")&&!e.startsWith("?")&&e!==""}Sn();const ie=I("history.ts",{});function ze(){let e=window.history.state;e||(e={});let t=!1;"timestamp"in e||(t=!0,e.timestamp=_e()),"scrollPosition"in e||(t=!0,e.scrollPosition=pe()),"triggedBy"in e||(e.triggedBy="browser"),We(e),t&&he(e)}function ge(){const e=window.history.state||{};return We(e),e}function pe(){return{x:window.scrollX,y:window.scrollY}}function _e(){return new Date().getTime()}function ye(){const e=pe(),t=ge();he({...t,scrollPosition:e})}function Tn(e,t){if(t)he(ge(),e);else{const r=_e();$n({timestamp:r,scrollPosition:null,triggedBy:"vike"},e)}}function We(e){if(a(N(e)),"timestamp"in e){const{timestamp:t}=e;a(typeof t=="number")}if("scrollPosition"in e){const{scrollPosition:t}=e;t!==null&&a(v(t,"x","number")&&v(t,"y","number"))}}function he(e,t){window.history.replaceState(e,"",t??null)}function $n(e,t){Me(e,"",t)}function Nn(){ie.pushStateOriginal=ie.pushStateOriginal??window.history.pushState,window.history.pushState=(e={},...t)=>{d(e==null||N(e),"history.pushState(state) argument state must be an object");const r={scrollPosition:pe(),timestamp:_e(),...e,triggedBy:"user"};return Me(r,...t)}}function Me(...e){ie.pushStateOriginal.apply(history,e)}async function jn(e,t){const n=je(e,t).filter(s=>s.fileType===".page.server");return await Promise.all(n.map(async s=>{s.exportNames||(a(s.loadExportNames,t),await s.loadExportNames())})),{hasOnBeforeRenderServerSideOnlyHook:n.some(({exportNames:s})=>(a(s),s.includes("onBeforeRender")))}}const ve=["urlPathname","urlParsed"],kn=["Page","pageExports","exports"];function In(e){[...kn,...ve].forEach(r=>{r in e&&(ve.includes(r)?(a(r.startsWith("url")),R(!1,`pageContext.${r} is already available in the browser when using Client Routing; adding '${r}' to passToClient has no effect`,{onlyOnce:!0})):R(!1,`pageContext.${r} is a built-in that cannot be overriden; adding '${r}' to passToClient has no effect`,{onlyOnce:!0}),delete e[r])})}const An="/";function Fn(e,t,r){const{pathnameOriginal:n,searchOriginal:o,hashOriginal:s}=X(e,An);e.startsWith("/")&&a(e===`${n}${o||""}${s||""}`,{url:e});const i=n.endsWith("/");let l;return r&&n!=="/"?(i?l=V(n,0,-1):l=n,a(!l.endsWith("/"),{url:e}),a(l!=="")):l=n+(i?"":"/")+"index",a(l),l=l+t,`${l}${o||""}${s||""}`}const Ln=".pageContext.json",Hn=!1;function Bn(e){return Fn(e,Ln,Hn)}function Ue(e,{hookName:t,hookFilePath:r}){if(e==null)return;a(!t.endsWith(")"));const n=`The ${g.cyan("pageContext")} object provided by the ${t}() hook defined by ${r}`;d(N(e),`${n} should be an object (but it's ${g.cyan(`typeof pageContext === ${JSON.stringify(typeof e)}`)} instead)`),d(!("_objectCreatedByVike"in e),`${n} shouldn't be the whole ${g.cyan("pageContext")} object, see https://vike.dev/pageContext-manipulation#do-not-return-entire-pagecontext`),R(!("_pageId"in e),`${n} sets ${g.cyan("pageContext._pageId")} which means that Vike's routing is overriden. This is an experimental feature: make sure to contact a vike maintainer before using this.`,{onlyOnce:!0}),d(!("is404"in e),`${n} sets ${g.cyan("pageContext.is404")} which is forbidden, use ${g.cyan("throw render()")} instead, see https://vike.dev/render`)}function Dn(e,t,r){a(!r.endsWith(" "));const n=[],o=Object.keys(e);for(const s of o)t.includes(s)||n.push(s);d(n.length===0,[r,"returned an object with following unknown keys:",be(n)+".","Only following keys are allowed:",be(t)+"."].join(" "))}function Vn(e,t){if(e==null)return;const r=`The onBeforeRender() hook defined by ${t}`;d(j(e),`${r} should return a plain JavaScript object, ${g.cyan("undefined")}, or ${g.cyan("null")}`),Dn(e,["pageContext"],r),e.pageContext&&Ue(e.pageContext,{hookName:"onBeforeRender",hookFilePath:t})}function zn(e,t){if(!j(e))return!1;for(const r of Object.keys(e))if(!t.includes(r))return!1;return!0}function Wn(e){return typeof e=="object"&&e!==null&&Object.values(e).every(t=>typeof t=="string")}function Mn(e,t,r=n=>n){if(a(e.length>0),e.length===1)return r(e[0]);const n=e.slice(0,e.length-1),o=e[e.length-1];return n.map(r).join(", ")+` ${t} `+r(o)}Z()&&U();async function Un(e,t){let r;if(e._pageFilesAll.length>0?(a(e._pageConfigs.length===0),r=Gn(e._pageId,e._pageFilesAll)):r=z(e,"guard"),!r)return;const n=r.hookFn;let o=e;const s=t(e);s&&(o=s);const i=await L(()=>n(o),r);d(i===void 0,`The guard() hook of ${r.hookFilePath} returns a value, but guard() doesn't accept any return value`)}function Gn(e,t){const r=t.find(u=>u.pageId===e&&u.fileType===".page.route");if(!r)return null;const{filePath:n,fileExports:o}=r;a(o);const s=o.guard;if(!s)return null;const i=n,l=ke("guard");return d(ce(s),`guard() defined by ${i} should be a function`),{hookFn:s,hookName:"guard",hookFilePath:i,hookTimeout:l}}function Kn(e){const t=new Error("AbortRender");return h(t,{_pageContextAbort:e,[Ge]:!0}),t}const Ge="_isAbortError";function Pe(e){return typeof e=="object"&&e!==null&&Ge in e}function Yn(e){return e._urlRewrite||e._urlRedirect||e.abortStatusCode?(a(v(e,"_abortCall","string")),!0):!1}function Jn(e,t,r){if(t)return;const n=r._urlRewrite??r.urlOriginal;a(n);const o=e._pageContextAbort._abortCall;a(o);const s=mt(e);let i="";s&&(i=` by ${g.cyan(`${s.hookName}()`)} hook defined at ${s.hookFilePath}`),Ie(!1,`${g.cyan(o)} thrown${i} while rendering ${g.cyan(n)}`,{onlyOnce:!1})}function qn(e){Qn(e);const t={_urlRewrite:null};return e.forEach(r=>{Object.assign(t,r)}),t}function Qn(e){const t=[];e.forEach(r=>{const n=r._urlRewrite;{const o=t.indexOf(n);if(o!==-1){const s=[...t.slice(o),n].map(i=>`render('${i}')`).join(" => ");d(!1,`Infinite loop of render() calls: ${s}`)}}t.push(n)})}function Xn(e,t){const r=[e>0&&g.cyan("throw render('/some-url')"),t>0&&g.cyan("throw redirect('/some-url')")].filter(Boolean).join(" and ");d(e+t<=7,`Maximum chain length of 7 ${r} exceeded. Did you define an infinite loop of ${r}?`)}const Zn="_pageContextInitIsPassedToClient",Ke="_isRenderFailure",Ye=I("router/getPageContext.ts",{});function eo(){const e=bt();return Qe(e),h(e,{_hasPageContextFromServer:!0}),e}async function to(e){const t={isHydration:!0,_hasPageContextFromClient:!1,_hasPageContextFromServer:!0};for(const r of["data","onBeforeRender"]){const n={...e,...t};if(qe(r,n)){const o=await Je(r,n);Object.assign(t,o)}}return t}async function Se(e,t){const r={isHydration:!1,_hasPageContextFromClient:!1};let n=!1;if(!t&&await no({...e,...r})){const o=await oo(e);if(n=!0,!o[Ke]||t)h(r,o);else return a(!("serverSideError"in o)),a(v(o,"is404","boolean")),a(v(o,"pageProps","object")),a(v(o.pageProps,"is404","boolean")),h(o,{_hasPageContextFromServer:!0,_hasPageContextFromClient:!1}),o}for(const o of["guard","data","onBeforeRender"]){const s={_hasPageContextFromServer:n,...e,...r};if(o==="guard")!t&&!n&&await Un(s,i=>Ae(i,!0));else if(a(o==="data"||o==="onBeforeRender"),qe(o,s)||!n){const i=await Je(o,s);h(r,i)}else a(n)}return h(r,{_hasPageContextFromServer:n}),r}async function Je(e,t){const r=z(t,e);if(!r)return null;const n=Ae(t,!0),o=await L(()=>r.hookFn(n),r),s={};if(e==="onBeforeRender"){Vn(o,r.hookFilePath);const i=o==null?void 0:o.pageContext;i&&(h(s,{_hasPageContextFromClient:!0}),h(s,i))}else{a(e==="data");const i={data:o};o&&h(s,{_hasPageContextFromClient:!0}),h(s,i)}return s}function ro(e){e[Zn]&&(Ye.pageContextInitIsPassedToClient=!0)}async function no(e){return!!Ye.pageContextInitIsPassedToClient||await xe("data",e)||await xe("onBeforeRender",e)}async function xe(e,t){var r;if(t._pageConfigs.length>0){const n=Fe(t._pageId,t._pageConfigs),o=((r=H(n,`${e}Env`))==null?void 0:r.value)??{};return a(N(o)),!!o.server&&!o.client}else{if(e==="data")return!1;a(e==="onBeforeRender");const{hasOnBeforeRenderServerSideOnlyHook:n}=await jn(t._pageFilesAll,t._pageId);return n}}function qe(e,t){var r;if(t._pageConfigs.length>0){const n=Fe(t._pageId,t._pageConfigs),o=((r=H(n,`${e}Env`))==null?void 0:r.value)??{};return a(N(o)),!!o.client&&!o.server}else return!1}async function oo(e){const t=Bn(e._urlRewrite??e.urlOriginal),r=await fetch(t);{const s=r.headers.get("content-type"),i="application/json",l=s&&s.includes(i);if(!l&&r.status===404)throw q(e.urlOriginal),io();d(l,`Wrong Content-Type for ${t}: it should be ${i} but it's ${s} instead. Make sure to properly use pageContext.httpResponse.headers, see https://vike.dev/renderPage`)}const n=await r.text(),o=yt(n);if(a(N(o)),"serverSideError"in o)throw vt("The pageContext object couldn't be fetched from the server as an error occurred on the server-side. Check your server logs.");if(Yn(o))throw Kn(o);return a(v(o,"_pageId","string")),Qe(o),o}function Qe(e){ro(e),In(e)}function so(e){return N(e)&&!!e._alreadyServerSideRouted}function io(){const e=new Error("Page doesn't exist");return Object.assign(e,{_alreadyServerSideRouted:!0}),e}function Xe(e,t=!0){a(e.urlOriginal),"urlPathname"in e&&(a(typeof e.urlPathname=="string"),a(re(e,"urlPathname"))),"urlParsed"in e&&a(re(e,"urlParsed")),"url"in e&&a(re(e,"url")),Object.defineProperty(e,"urlPathname",{get:et,enumerable:t,configurable:!0}),Object.defineProperty(e,"url",{get:ao,enumerable:!1,configurable:!0}),Object.defineProperty(e,"urlParsed",{get:lo,enumerable:t,configurable:!0})}function Ze(e){let t=e._urlHandler;t||(t=o=>o);let r=e._urlRewrite??e.urlLogical??e.urlOriginal;r=t(r);const n=e._baseServer;return a(r&&typeof r=="string"),a(n.startsWith("/")),X(r,n)}function et(){const{pathname:e}=Ze(this),t=e;return a(t.startsWith("/")),t}function ao(){return R(!1,"`pageContext.url` is outdated. Use `pageContext.urlPathname`, `pageContext.urlParsed`, or `pageContext.urlOriginal` instead. (See https://vike.dev/migration/0.4.23 for more information.)",{onlyOnce:!0,showStackTrace:!0}),et.call(this)}function lo(){const e=Ze(this),{origin:t,pathname:r,pathnameOriginal:n,search:o,searchAll:s,searchOriginal:i,hash:l,hashOriginal:u}=e,f=Z(),P=x=>{R(f,`pageContext.urlParsed.${x} isn't available on the server-side (HTTP requests don't include the URL hash by design)`,{onlyOnce:!0,showStackTrace:!0})},c={origin:t,pathname:r,pathnameOriginal:n,search:o,searchAll:s,searchOriginal:i,get hash(){return P("hash"),l},get hashOriginal(){return P("hashOriginal"),u},get hashString(){return R(!1,"pageContext.urlParsed.hashString has been renamed to pageContext.urlParsed.hashOriginal",{onlyOnce:!0,showStackTrace:!0}),P("hashString"),u},get searchString(){return R(!1,"pageContext.urlParsed.searchString has been renamed to pageContext.urlParsed.searchOriginal",{onlyOnce:!0,showStackTrace:!0}),i}};return G(c,"hashString"),G(c,"searchString"),f||(G(c,"hash"),G(c,"hashOriginal")),c}function G(e,t){const r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(e,t,{...r,enumerable:!1})}function uo(e){a(typeof e.urlOriginal=="string"),a(typeof e.urlPathname=="string"),a(j(e.urlParsed)),a(e.urlPathname===e.urlParsed.pathname)}function co(e,t){const n=t.filter(({filesystemRoot:s})=>e.startsWith(s)).sort(J(({filesystemRoot:s})=>s.length))[0];let o;if(n){const{filesystemRoot:s,urlRoot:i}=n,l={pageId:e,filesystemRoot:s,urlRoot:i};a(i.startsWith("/")&&e.startsWith("/")&&s.startsWith("/"),l),a(e.startsWith(s),l),s!=="/"?(a(!s.endsWith("/"),l),o=V(e,s.length,0)):o=e,a(o.startsWith("/"),l),o=i+(i.endsWith("/")?"":"/")+V(o,1,0)}else o=e;return a(o.startsWith("/")),o=o.split("/").filter(s=>s!=="pages"&&s!=="src"&&s!=="index").join("/"),a(!o.includes(".page.")),a(!o.endsWith(".")),o.endsWith("/index")&&(o=V(o,0,-6)),o===""&&(o="/"),a(o.startsWith("/")),a(!o.endsWith("/")||o==="/"),o}async function fo(e,t,r){uo(t);let n=e(t);if(tt(n,`The Route Function ${r}`),n=await n,n===!1)return null;if(n===!0&&(n={}),d(j(n),`The Route Function ${r} should return a boolean or a plain JavaScript object (but it's ${g.cyan(`typeof result === ${JSON.stringify(typeof n)}`)} instead)`),"match"in n){const{match:i}=n;if(d(typeof i=="boolean",`The ${g.cyan("match")} value returned by the Route Function ${r} should be a boolean.`),!i)return null}let o=null;"precedence"in n&&(o=n.precedence,d(typeof o=="number",`The ${g.cyan("precedence")} value returned by the Route Function ${r} should be a number.`)),rt(n,`The ${g.cyan("routeParams")} object returned by the Route Function ${r} should`);const s=n.routeParams||{};return d(!("pageContext"in n),`Providing ${g.cyan("pageContext")} in Route Functions is prohibited, see https://vike.dev/route-function#cannot-provide-pagecontext`),a(j(s)),Object.keys(n).forEach(i=>{d(i==="match"||i==="routeParams"||i==="precedence",`The Route Function ${r} returned an object with an unknown property ${g.cyan(i)} (the known properties are ${g.cyan("match")}, ${g.cyan("routeParams")}, and ${g.cyan("precedence")})`)}),{precedence:o,routeParams:s}}function tt(e,t){R(!jt(e),`${t} returned a promise, but asynchronous routing is deprecated and will be removed in the next major release, see https://vike.dev/route-function#async`,{onlyOnce:!0})}function Oe(){const e=g.cyan("iKnowThePerformanceRisksOfAsyncRouteFunctions");R(!1,`${e} is deprecated and will be removed in the next major release`,{onlyOnce:!0})}function rt(e,t){a(t.endsWith(" should")),v(e,"routeParams")&&(a(t.endsWith(" should")),d(j(e.routeParams),`${t} be a plain JavaScript object.`),d(Wn(e.routeParams),`${t} only hold string values.`))}async function go(e,t,r,n){await Promise.all(e.filter(l=>l.fileType===".page.route").map(l=>{var u;return(u=l.loadFile)==null?void 0:u.call(l)}));const{onBeforeRouteHook:o,filesystemRoots:s}=_o(e,t,r);return{pageRoutes:po(s,e,t,n),onBeforeRouteHook:o}}function po(e,t,r,n){const o=[];if(r.length>0){a(e===null);const s=!0;r.filter(i=>!i.isErrorPage).forEach(i=>{const l=i.pageId;let u=null;{const f="route",P=H(i,f);if(P){const c=P.value,x=Pt(P.definedAt,f);typeof c=="string"?u={pageId:l,comesFromV1PageConfig:s,routeString:c,routeDefinedAt:x,routeType:"STRING"}:(a(ce(c)),H(i,"iKnowThePerformanceRisksOfAsyncRouteFunctions","boolean")&&Oe(),u={pageId:l,comesFromV1PageConfig:s,routeFunction:c,routeDefinedAt:x,routeType:"FUNCTION"})}}if(!u){const{routeFilesystem:f}=i;a(f);const{routeString:P,definedBy:c}=f;a(f.routeString.startsWith("/")),u={pageId:l,routeFilesystemDefinedBy:c,comesFromV1PageConfig:s,routeString:P,routeDefinedAt:null,routeType:"FILESYSTEM"}}a(u),o.push(u)})}if(r.length===0){a(e);const s=!1;n.filter(i=>!St(i)).forEach(i=>{const l=t.find(u=>u.pageId===i&&u.fileType===".page.route");if(!l||!("default"in l.fileExports)){const u=co(i,e);a(u.startsWith("/")),a(!u.endsWith("/")||u==="/"),o.push({pageId:i,comesFromV1PageConfig:s,routeString:u,routeDefinedAt:null,routeFilesystemDefinedBy:`${i}.page.*`,routeType:"FILESYSTEM"})}else{const{filePath:u,fileExports:f}=l;if(a(f.default),v(f,"default","string")){const P=f.default;d(P.startsWith("/"),`A Route String should start with a leading slash '/' but ${u} has \`export default '${P}'\`. Make sure to \`export default '/${P}'\` instead.`),o.push({pageId:i,comesFromV1PageConfig:s,routeString:P,routeDefinedAt:u,routeType:"STRING"});return}if(v(f,"default","function")){const P=f.default;"iKnowThePerformanceRisksOfAsyncRouteFunctions"in f&&Oe(),o.push({pageId:i,comesFromV1PageConfig:s,routeFunction:P,routeDefinedAt:u,routeType:"FUNCTION"});return}d(!1,`The default export of ${u} should be a string or a function.`)}})}return o}function _o(e,t,r){if(t.length>0)return{onBeforeRouteHook:xt(r,"onBeforeRoute"),filesystemRoots:null};let n=null;const o=[];return e.filter(s=>s.fileType===".page.route"&&s.isDefaultPageFile).forEach(({filePath:s,fileExports:i})=>{if(a(i),"onBeforeRoute"in i){d(v(i,"onBeforeRoute","function"),`\`export { onBeforeRoute }\` of ${s} should be a function.`);const{onBeforeRoute:l}=i,u="onBeforeRoute";n={hookFilePath:s,hookFn:l,hookName:u,hookTimeout:ke(u)}}"filesystemRoutingRoot"in i&&(d(v(i,"filesystemRoutingRoot","string"),`\`export { filesystemRoutingRoot }\` of ${s} should be a string.`),d(v(i,"filesystemRoutingRoot","string"),`\`export { filesystemRoutingRoot }\` of ${s} is \`'${i.filesystemRoutingRoot}'\` but it should start with a leading slash \`/\`.`),o.push({filesystemRoot:ho(s),urlRoot:i.filesystemRoutingRoot}))}),{onBeforeRouteHook:n,filesystemRoots:o}}function ho(e){a(e.startsWith("/")),a(!e.endsWith("/"));const t=e.split("/"),r=V(t,0,-1).join("/")||"/";return a(r.startsWith("/")),a(!r.endsWith("/")||r==="/"),r}function nt(){const e="/";return a(mo(e)),e}function mo(e){return e.startsWith("/")}const ne=I("createPageContext.ts",{});async function ot(e){ne.pageFilesData||(ne.pageFilesData=await Ot(!0));const{pageFilesAll:t,allPageIds:r,pageConfigs:n,pageConfigGlobal:o}=ne.pageFilesData,{pageRoutes:s,onBeforeRouteHook:i}=await go(t,n,o,r),l=nt();a(Le(l));const u={urlOriginal:e,_objectCreatedByVike:!0,_urlHandler:null,_urlRewrite:null,_baseServer:l,_pageFilesAll:t,_pageConfigs:n,_pageConfigGlobal:o,_allPageIds:r,_pageRoutes:s,_onBeforeRouteHook:i};return Xe(u),u}function st(e){const t=e.getAttribute("href");return!!(t===null||t===""||En(t)||yo(e)||vo(t)||!Po(t)||!Rt(t)||!bo(e))}function bo(e){if(So()){const r=e.getAttribute("data-vike-link");return r!==null&&r!=="false"}else return!0}function yo(e){const t=e.getAttribute("target"),r=e.getAttribute("rel");return t==="_blank"||t==="_external"||r==="external"||e.hasAttribute("download")}function vo(e){if(e.startsWith("#"))return!0;const t=r=>r.split("#")[0];return!!(e.includes("#")&&t(e)===t(window.location.href))}function Po(e){const t=nt();a(Le(t));const{hasBaseServer:r}=X(e,t);return r}function So(){return!!window._disableAutomaticLinkInterception}function xo(e,t){let r=Oo(e,t);return{prefetchStaticAssets:r}}function Oo(e,t){{const r=Ro(t);if(r!==null)return r}if("prefetchLinks"in e.exports&&d(!1,"`export { prefetchLinks }` is deprecated, use `export { prefetchStaticAssets }` instead."),"prefetchStaticAssets"in e.exports){const{prefetchStaticAssets:r}=e.exports;if(r===!1)return!1;if(r==="hover")return"hover";if(r==="viewport")return"viewport";const n="prefetchStaticAssets value should be false, 'hover', or 'viewport'";d(j(r),n);const o=Object.keys(r);d(o.length===1&&o[0]==="when",n);const{when:s}=r;if(s==="HOVER"||s==="VIEWPORT"){const i=s.toLowerCase();return R(!1,`prefetchStaticAssets value \`{ when: '${s}' }\` is outdated: set prefetchStaticAssets to '${i}' instead`,{onlyOnce:!0}),i}d(!1,n)}return"hover"}function Ro(e){const t=e.getAttribute("data-prefetch-static-assets"),r=e.getAttribute("data-prefetch");if(t===null&&r===null)return null;const n="The attribute data-prefetch is outdated, use data-prefetch-static-assets instead.";if(t){if(d(r===null,n),t==="hover"||t==="viewport")return t;if(t==="false")return!1;d(!1,`data-prefetch-static-assets has value "${t}" but it should instead be "false", "hover", or "viewport"`)}if(r){if(a(!t),R(!1,n,{onlyOnce:!0}),r==="true")return"viewport";if(r==="false")return"hover";d(!1,`data-prefetch has value "${r}" but it should instead be "true" or "false"`)}a(!1)}const it=new Map;function wo(e){const t=at(e);return it.has(t)}function Co(e){const t=at(e);it.set(t,!0)}function at(e){return X(e,"/").pathname}function W(e){return e.fileType===".css"?[]:e.exportNames?e.exportNames:(a(e.fileExports,e.filePath),Object.keys(e.fileExports))}function Eo({pageFilesClientSide:e,pageFilesServerSide:t,pageId:r}){return{isHtmlOnly:n(),isClientRouting:s()};function n(){return t.some(l=>l.pageId===r&&l.fileType===".page")?(o(),!1):!(!t.some(l=>l.pageId===r&&l.fileType===".page.server")||e.some(l=>l.pageId===r&&l.fileType===".page.client"&&W(l).includes("render")))}function o(){const i=e.some(l=>W(l).includes("render"));d(i,["No client-side `render()` hook found.","See https://vike.dev/render-modes for more information.",["Loaded client-side page files (none of them `export { render }`):",...e.map((l,u)=>` (${u+1}): ${l.filePath}`)].join(`
`)].join(" "))}function s(){return e.some(l=>W(l).includes("clientRouting"))}}function To({pageFilesClientSide:e,pageFilesServerSide:t,isHtmlOnly:r,isClientRouting:n}){let o=[];const s=t.filter(l=>!e.includes(l)),i=[];if(i.push(...e.map(l=>({id:l.filePath,onlyAssets:!1,eagerlyImported:!1}))),i.push(...s.map(l=>({id:l.filePath,onlyAssets:!0,eagerlyImported:!1}))),r)o=e.map(l=>l.filePath);else{const l=$o(n);i.push({id:l,onlyAssets:!1,eagerlyImported:!1}),o=[l]}return{clientEntries:o,clientDependencies:i}}function $o(e){return e?"@@vike/dist/esm/client/client-routing-runtime/entry.js":"@@vike/dist/esm/client/server-routing-runtime/entry.js"}function No(e,t){let r=He(e,t);const n=je(e,t),{isHtmlOnly:o,isClientRouting:s}=Eo({pageFilesClientSide:r,pageFilesServerSide:n,pageId:t});o&&(r=r.filter(u=>u.isEnv("CLIENT_ONLY")&&!W(u).includes("render")),r=ko(r));const{clientEntries:i,clientDependencies:l}=To({pageFilesClientSide:r,pageFilesServerSide:n,isHtmlOnly:o,isClientRouting:s});return{isHtmlOnly:o,isClientRouting:s,clientEntries:i,clientDependencies:l,pageFilesClientSide:r,pageFilesServerSide:n}}async function jo(e,t,{sharedPageFilesAlreadyLoaded:r}){const n=He(e,t);await Promise.all(n.map(async o=>{var s;a(o.isEnv("CLIENT_ONLY")||o.isEnv("CLIENT_AND_SERVER")),!(r&&o.isEnv("CLIENT_AND_SERVER"))&&await((s=o.loadExportNames)==null?void 0:s.call(o))}))}function ko(e){const t=[];for(const r of e)if(t.push(r),W(r).includes("overrideDefaultPages"))break;return t}function Io(e,t,r){var n,o;if(e){const s=((n=H(e,"clientRouting","boolean"))==null?void 0:n.value)??!1;return{isClientSideRenderable:((o=H(e,"isClientSideRenderable","boolean"))==null?void 0:o.value)??!1,isClientRouting:s}}else{const{isHtmlOnly:s,isClientRouting:i}=No(t,r);return{isClientSideRenderable:!s,isClientRouting:i}}}async function lt(e,t){await jo(t._pageFilesAll,e,{sharedPageFilesAlreadyLoaded:!1});const r=wt(t._pageConfigs,e),{isClientSideRenderable:n,isClientRouting:o}=Io(r,t._pageFilesAll,e);return n&&o}const ut="@",ae=":";function Ao(e,t="Invalid"){let r=`${t} Route String ${k(e)}`;d(e!=="",`${r} (empty string): set it to ${k("/")} instead`),d(["/","*"].includes(e[0]),`${r}: it should start with ${k("/")} or ${k("*")}`),d(!e.includes("**"),`${r}: set it to ${k(e.split("**").join("*"))} instead`)}function le(e,t){Ao(e);const r=ct(e),n=r.map(c=>c.param?"[^/]+":c.glob?c.isLastDir?"|/.*":".*":It(c.static)).map(c=>`(${c})`).join(""),o=new RegExp(`^${n}/?$`),s=t.match(o);if(!s)return null;const i={},[l,...u]=s;let f=0;const P=r.filter(c=>c.glob).length>1;return r.forEach((c,x)=>{let w=u[x];if(c.param&&(i[c.param]=w),c.glob){const C=`*${P?++f:""}`;c.isLastDir&&(w=w.slice(1)),i[C]=w}}),{routeParams:i}}function ct(e){const t=[],r=o=>{const s=t[t.length-1];s!=null&&s.static?s.static+=o:t.push({static:o})},n=e.split("/");return n.forEach((o,s)=>{const i=s===0,l=s===n.length-1;Fo(o)?(R(!o.startsWith(ae),`Outdated Route String ${k(e)}, use ${k(e.split(ae).join(ut))} instead`,{onlyOnce:!0}),i||r("/"),t.push({param:o.slice(1)})):o==="*"&&l&&e!=="*"&&e!=="/*"?t.push({glob:!0,isLastDir:!0}):(i||r("/"),o.split("*").forEach((u,f)=>{f!==0&&t.push({glob:!0}),u!==""&&r(u)}))}),t}function K(e){const t=ct(e),r=l=>(l==null?void 0:l.split("/").filter(Boolean).length)||0;let n=0;for(const l of t){if(!l.static)break;n+=r(l.static)}const o=t.map(l=>r(l.static)).reduce((l,u)=>l+u,0),s=t.filter(l=>l.param).length,i=t.filter(l=>l.glob).length;return{numberOfStaticPartsBeginning:n,numberOfStaticParts:o,numberOfParams:s,numberOfGlobs:i}}function Fo(e){return e.startsWith(ut)||e.startsWith(ae)}function Re(e){const r=le(e,e);return a(r),Object.keys(r.routeParams).length===0}function k(e){return Z()?`'${e}'`:(e===""&&(e="''"),g.cyan(e))}function Lo(e){e.sort(Ho).sort(A(t=>t.routeType==="FUNCTION"&&!!t.precedence&&t.precedence<0)).sort(A(t=>t.routeType==="STRING"&&Re(t.routeString)===!1)).sort(A(t=>t.routeType==="FUNCTION"&&!t.precedence)).sort(A(t=>t.routeType==="STRING"&&Re(t.routeString)===!0)).sort(A(t=>t.routeType==="FILESYSTEM")).sort(A(t=>t.routeType==="FUNCTION"&&!!t.precedence&&t.precedence>0))}function Ho(e,t){{const r=e.precedence??0,n=t.precedence??0;if(r!==n)return r>n?-1:1}if(!t.routeString||!e.routeString)return 0;{const n=J(o=>K(o).numberOfStaticPartsBeginning)(e.routeString,t.routeString);if(n!==0)return n}{const n=J(o=>K(o).numberOfStaticParts)(e.routeString,t.routeString);if(n!==0)return n}{const n=Ct(o=>K(o).numberOfGlobs)(e.routeString,t.routeString);if(n!==0)return n}{const n=J(o=>K(o).numberOfParams)(e.routeString,t.routeString);if(n!==0)return n}return 0}async function Bo(e){const t={};if(!e._onBeforeRouteHook)return null;const r=await Do(e._onBeforeRouteHook,e);return r&&(h(t,r),v(t,"_pageId","string")||v(t,"_pageId","null"))?(v(t,"routeParams")?a(v(t,"routeParams","object")):h(t,{routeParams:{}}),h(t,{_routingProvidedByOnBeforeRouteHook:!0,_debugRouteMatches:"CUSTOM_ROUTING"}),t):(h(t,{_routingProvidedByOnBeforeRouteHook:!1}),t)}async function Do(e,t){let r=e.hookFn(t);tt(r,`The onBeforeRoute() hook ${e.hookFilePath}`),r=await L(()=>r,e);const n=`The onBeforeRoute() hook defined by ${e.hookFilePath}`;if(d(r==null||zn(r,["pageContext"])&&v(r,"pageContext"),`${n} should return ${g.cyan("null")}, ${g.cyan("undefined")}, or a plain JavaScript object ${g.cyan("{ pageContext: { /* ... */ } }")}`),r==null)return null;if(d(v(r,"pageContext","object"),`${n} returned ${g.cyan("{ pageContext }")} but pageContext should be a plain JavaScript object.`),v(r.pageContext,"_pageId")&&!v(r.pageContext,"_pageId","null")){const i=`${n} returned ${g.cyan("{ pageContext: { _pageId } }")} but ${g.cyan("_pageId")} should be`;d(v(r.pageContext,"_pageId","string"),`${i} a string or null`),d(t._allPageIds.includes(r.pageContext._pageId),`${i} ${Mn(t._allPageIds.map(l=>g.cyan(l)),"or")}`)}v(r.pageContext,"routeParams")&&rt(r.pageContext,`${n} returned ${g.cyan("{ pageContext: { routeParams } }")} but routeParams should`);const o=i=>`${n} returned ${g.cyan(`{ pageContext: { ${i} } }`)} which is deprecated. Return ${g.cyan("{ pageContext: { urlLogical } }")} instead.`;v(r.pageContext,"url")&&(R(!1,o("url"),{onlyOnce:!0}),r.pageContext.urlLogical=r.pageContext.url,delete r.pageContext.url),v(r.pageContext,"urlOriginal")&&(R(!1,o("urlOriginal"),{onlyOnce:!0}),r.pageContext.urlLogical=r.pageContext.urlOriginal,delete r.pageContext.urlOriginal),v(r.pageContext,"urlLogical")&&Et(r.pageContext.urlLogical,`${n} returned ${g.cyan("{ pageContext: { urlLogical } }")} but ${g.cyan("urlLogical")}`),Ue(r.pageContext,{hookFilePath:e.hookFilePath,hookName:"onBeforeRoute"});const s={};return h(s,r.pageContext),s}var Y;function we(...e){var t;Y||(Y=(t=globalThis.__brillout_debug_createDebugger)==null?void 0:t.call(globalThis,"vike:routing")),Y&&Y(...e)}Z()&&U();async function dt(e){we("Pages routes:",e._pageRoutes),Xe(e);const t={},r=await Bo(e);if(r){if(r._routingProvidedByOnBeforeRouteHook)return a(r._pageId),r;h(t,r)}const n={};h(n,e),h(n,r);const o=n._allPageIds;a(o.length>=0),d(n._pageFilesAll.length>0||n._pageConfigs.length>0,"No *.page.js file found. You must create at least one *.page.js file."),d(o.length>0,"You must create at least one *.page.js file that isn't _default.page.*");const{urlPathname:s}=n;a(s.startsWith("/"));const i=[];await Promise.all(n._pageRoutes.map(async u=>{const{pageId:f,routeType:P}=u;if(u.routeType==="FILESYSTEM"){const{routeString:c}=u,x=le(c,s);if(x){const{routeParams:w}=x;i.push({pageId:f,routeParams:w,routeString:c,routeType:P})}return}if(u.routeType==="STRING"){const{routeString:c}=u,x=le(c,s);if(x){const{routeParams:w}=x;a(P==="STRING"),i.push({pageId:f,routeString:c,routeParams:w,routeType:P})}return}if(u.routeType==="FUNCTION"){const{routeFunction:c,routeDefinedAt:x}=u,w=await fo(c,n,x);if(w){const{routeParams:C,precedence:B}=w;i.push({pageId:f,precedence:B,routeParams:C,routeType:P})}return}a(!1)})),Lo(i);const l=i[0];if(we(`Route matches for URL ${g.cyan(s)} (in precedence order):`,i),h(t,{_debugRouteMatches:i}),!l)return h(t,{_pageId:null,routeParams:{}}),t;{const{routeParams:u}=l;a(j(u)),h(t,{_pageId:l.pageId,routeParams:l.routeParams})}return t}U();const Ce=I("prefetch.ts",{linkPrefetchHandlerAdded:new Map});async function Vo(e,t){try{await se(e,t._pageFilesAll,t._pageConfigs)}catch(r){if(de(r))ue(r,!0);else throw r}}function zo(e){Co(e.urlPathname),[...document.getElementsByTagName("A")].forEach(r=>{if(Ce.linkPrefetchHandlerAdded.has(r))return;Ce.linkPrefetchHandlerAdded.set(r,!0);const n=r.getAttribute("href");if(st(r)||(a(n),wo(n)))return;const{prefetchStaticAssets:o}=xo(e,r);if(o&&(o==="hover"&&(r.addEventListener("mouseover",()=>{oe(n)}),r.addEventListener("touchstart",()=>{oe(n)},{passive:!0})),o==="viewport")){const s=new IntersectionObserver(i=>{i.forEach(l=>{l.isIntersecting&&(oe(n),s.disconnect())})});s.observe(r)}})}async function oe(e){const t=await ot(e);let r;try{r=await dt(t)}catch{return}r!=null&&r._pageId&&await lt(r._pageId,t)&&await Vo(r._pageId,t)}function ft(e){if(e==="preserve-scroll")return;let t;if(e==="scroll-to-top-or-hash"){const r=Mo();if(r&&r!=="top"){const n=document.getElementById(r)||document.getElementsByName(r)[0];if(n){n.scrollIntoView();return}}t={x:0,y:0}}else a("x"in e&&"y"in e),t=e;Wo(t)}function Wo(e){const t=()=>window.scrollTo(e.x,e.y),r=()=>window.scrollX===e.x&&window.scrollY===e.y;r()||(t(),!r()&&requestAnimationFrame(()=>{t(),!r()&&setTimeout(async()=>{if(t(),r())return;const n=new Date().getTime();for(;;)if(await Rn(10),t(),r()||new Date().getTime()-n>100)return},0)}))}function Mo(){let{hash:e}=window.location;return e===""?null:(a(e.startsWith("#")),e=e.slice(1),e)}function Uo(){window.addEventListener("scroll",wn(ye,Math.ceil(1e3/3)),{passive:!0}),Ve(ye)}const F=I("onBrowserHistoryNavigation.ts",{previousState:Q()});function Go(){window.addEventListener("popstate",async()=>{const e=Q(),t=e.historyState.scrollPosition||"scroll-to-top-or-hash",r=e.historyState.triggedBy==="user",n=e.urlWithoutHash===F.previousState.urlWithoutHash,o=!e.historyState.timestamp||!F.previousState.historyState.timestamp?null:e.historyState.timestamp<F.previousState.historyState.timestamp;F.previousState=e,n&&!r?window.history.state===null?(ze(),F.previousState=Q()):ft(t):await M({scrollTarget:t,isBackwardNavigation:o,isUserLandPushStateNavigation:r})})}function Q(){return{urlWithoutHash:fe({withoutHash:!0}),historyState:ge()}}function Ko(){F.previousState=Q()}const gt=I("scrollRestoration.ts",{});function Yo(){Ee(),Ve(Ee),Cn(()=>gt.initialRenderIsDone&&me())}function Jo(){gt.initialRenderIsDone=!0}function me(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual")}function Ee(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="auto")}const S=I("renderPageClientSide.ts",{renderCounter:0});async function M(e){const{scrollTarget:t,urlOriginal:r=fe(),overwriteLastHistoryEntry:n=!1,isBackwardNavigation:o,pageContextsFromRewrite:s=[],redirectCount:i=0,isUserLandPushStateNavigation:l,isClientSideNavigation:u=!0}=e,{isRenderOutdated:f,setHydrationCanBeAborted:P,isHydrationRender:c}=Qo();if(a(u===!c),Xn(s.length,i),S.clientRoutingIsDisabled){q(r);return}await x();return;async function x(){var O;const p=await w();if(f())return;let y;if(c)y=eo();else{let m;try{m=await dt(p)}catch(E){await C({err:E});return}if(f())return;let b;if(!m._pageId)b=!1;else if(b=await lt(m._pageId,p),f())return;if(!b){q(r);return}a(v(m,"_pageId","string"));const D=m._pageId&&((O=S.previousPageContext)==null?void 0:O._pageId)&&m._pageId===S.previousPageContext._pageId;if(l&&D)return;y=m}a(!("urlOriginal"in y)),h(p,y);try{h(p,await se(p._pageId,p._pageFilesAll,p._pageConfigs))}catch(m){if($e(m,p,c))return;throw m}if(!f()&&(p.exports.hydrationCanBeAborted?P():R(!xn(),"You seem to be using React; we recommend setting hydrationCanBeAborted to true, see https://vike.dev/hydrationCanBeAborted",{onlyOnce:!0}),!f())){if(!c&&(te(p,"onPageTransitionStart"),!S.isTransitioning)){S.isTransitioning=!0;const m=z(p,"onPageTransitionStart");if(m){const b=m,{hookFn:D}=b;try{await L(()=>D(p),b)}catch(E){await C({err:E});return}if(f())return}}if(c){a(v(p,"_hasPageContextFromServer","true"));let m;try{m=await to(p)}catch(b){await C({err:b});return}if(f())return;a(!("urlOriginal"in m)),h(p,m),await B(p)}else{let m;try{m=await Se(p,!1)}catch(b){await C({err:b});return}if(f())return;if(Ke in m){await C({pageContextError:m});return}a(!("urlOriginal"in m)),h(p,m),await B(p)}}}async function w(){const p=await ot(r);h(p,{isBackwardNavigation:o,isClientSideNavigation:u});{const y=qn(s);a(!("urlOriginal"in y)),h(p,y)}return p}async function C(p){const y=await w();if(f())return;if(p.pageContextError&&h(y,p.pageContextError),"err"in p){const{err:b}=p;if(a(b),a(!("errorWhileRendering"in y)),y.errorWhileRendering=b,Te(b))return;if(Pe(b)||console.error(b),Pe(b)){const D=b;Jn(b,!0,y);const E=D._pageContextAbort;if(E._urlRewrite){await M({...e,scrollTarget:"scroll-to-top-or-hash",pageContextsFromRewrite:[...s,E]});return}if(E._urlRedirect){const ee=E._urlRedirect.url;if(ee.startsWith("http")){window.location.href=ee;return}else await M({...e,scrollTarget:"scroll-to-top-or-hash",urlOriginal:ee,overwriteLastHistoryEntry:!1,isBackwardNavigation:!1,redirectCount:i+1});return}a(E.abortStatusCode),a(!("urlOriginal"in E)),h(y,E),E.abortStatusCode===404&&h(y,{is404:!0})}else h(y,{is404:!1})}const O=Tt(y._pageFilesAll,y._pageConfigs);if(!O)throw new Error("No error page defined.");h(y,{_pageId:O});try{h(y,await se(y._pageId,y._pageFilesAll,y._pageConfigs))}catch(b){if($e(b,y,c))return;throw b}if(f())return;let m;try{m=await Se(y,!0)}catch(b){if(Te(b))return;On(p.err,b)||console.error(b);return}f()||(a(m),a(!("urlOriginal"in m)),h(y,m),await B(y,!0))}async function B(p,y){if(!(S.renderPromise&&(await S.renderPromise,a(S.renderPromise===void 0),f()))){if(qo(r,n),S.previousPageContext=p,a(S.renderPromise===void 0),S.renderPromise=(async()=>{try{await $t(p,!0)}catch(O){if(!y)C({err:O});else throw O}zo(p),S.renderPromise=void 0})(),await S.renderPromise,a(S.renderPromise===void 0),c){te(p,"onHydrationEnd");const O=z(p,"onHydrationEnd");if(O){const{hookFn:m}=O;try{await L(()=>m(p),O)}catch(b){if(!y)C({err:b});else throw b}if(f(!0))return}}if(!f(!0)){if(S.isTransitioning){S.isTransitioning=void 0,te(p,"onPageTransitionEnd");const O=z(p,"onPageTransitionEnd");if(O){const{hookFn:m}=O;try{await L(()=>m(p),O)}catch(b){if(!y)C({err:b});else throw b}if(f(!0))return}}ft(t),me(),Jo()}}}}function qo(e,t){fe()!==e&&(me(),Tn(e,t),Ko())}function Te(e){return!!so(e)}function $e(e,t,r){if(!de(e))return!1;if(r)throw ue(e,!1),e;return ue(e,!0),q(t.urlOriginal),!0}function ue(e,t){a(de(e)),S.clientRoutingIsDisabled=!0,t&&console.log(e),Ie(!1,["Failed to fetch static asset.","This usually happens when a new frontend is deployed.","Falling back to Server Routing.","(The next page navigation will use Server Routing instead of Client Routing.)"].filter(Boolean).join(" "),{onlyOnce:!0})}function Qo(){const e=++S.renderCounter;a(e>=1);let t=!1;return{isRenderOutdated:o=>e===1&&!t&&!o?!1:e!==S.renderCounter,setHydrationCanBeAborted:()=>{t=!0},isHydrationRender:e===1}}function Ne(){return S.renderCounter}function Xo(){document.addEventListener("click",Zo)}async function Zo(e){if(!es(e))return;const t=ts(e.target);if(!t)return;const r=t.getAttribute("href");if(st(t))return;a(r),e.preventDefault();const o=![null,"false"].includes(t.getAttribute("keep-scroll-position"))?"preserve-scroll":"scroll-to-top-or-hash";await M({scrollTarget:o,urlOriginal:r,isBackwardNavigation:!1})}function es(e){return e.button===0&&!e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey}function ts(e){for(;e.tagName!=="A";){const{parentNode:t}=e;if(!t)return null;e=t}return e}async function rs(){Yo(),ze(),Uo(),Nn(),a(Ne()===0);const e=M({scrollTarget:"preserve-scroll",isBackwardNavigation:null,isClientSideNavigation:!1});a(Ne()===1),Xo(),Go(),await e}U();const ns=!0;Nt(ns);rs();
