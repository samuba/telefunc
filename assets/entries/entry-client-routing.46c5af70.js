import{j as ie,k as a,p as _,m as gt,b as g,_ as h,s as pt,n as _t,q as D,r as E,t as j,u as y,v as Ce,d as x,w as J,x as I,y as q,z as L,A as F,B as Te,C as ae,o as m,a as ht,l as G,D as $e,E as je,F as Ne,G as mt,H as bt,I as U,J as yt,K as vt,L as Pt,c as St,M as ke,N as xt,O as Fe,P as Ot,Q as N,R as Rt,S as wt,T as le,g as ue,i as X,h as Et,U as Ct}from"../chunks/chunk-80614d09.js";function C(e){return typeof e!="object"||e===null?!1:Object.getPrototypeOf(e)===null?!0:e.constructor.name==="Object"}function me(e){return"["+e.map(t=>"'"+t+"'").join(", ")+"]"}function Z(e,t){const r=Object.getOwnPropertyDescriptor(e,t);return!!r&&!("value"in r)&&!!r.get}function Tt(e){return typeof e=="object"&&e!==null&&"then"in e&&ie(e.then)}function $t(e){return[null,void 0].includes(e)?String(e):["boolean","number","string"].includes(typeof e)?JSON.stringify(e):null}function jt(e){return e.replace(/[/\-\\^$*+?.()|[\]{}]/g,"\\$&")}function A(e,t,r){const n=kt(e,t);if(n===null)return null;const{value:o,definedAt:s}=n;return r&&Nt(o,r,t,s),n}function Nt(e,t,r,n){a(e!==null);const o=typeof e;if(o===t)return;const s=$t(e),l=s!==null?`value ${_.cyan(s)}`:`type ${_.cyan(o)}`,c=`${gt("Config",r,{definedAt:n})} has an invalid ${l}: it should be a ${_.cyan(t)} instead`;g(!1,c)}function kt(e,t){const r=e.configValues[t];return!r||r.value===null?null:r}const Ft=["headings","default"],At=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Ft},Symbol.toStringTag,{value:"Module"})),It=["headings","default"],Lt=Object.freeze(Object.defineProperty({__proto__:null,exportNames:It},Symbol.toStringTag,{value:"Module"})),Ht=["headings","default"],Bt=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Ht},Symbol.toStringTag,{value:"Module"})),Dt=["headings","default"],Vt=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Dt},Symbol.toStringTag,{value:"Module"})),zt=["headings","default"],Wt=Object.freeze(Object.defineProperty({__proto__:null,exportNames:zt},Symbol.toStringTag,{value:"Module"})),Mt=["headings","default"],Ut=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Mt},Symbol.toStringTag,{value:"Module"})),Gt=["headings","default"],Kt=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Gt},Symbol.toStringTag,{value:"Module"})),Yt=["headings","default"],Jt=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Yt},Symbol.toStringTag,{value:"Module"})),qt=["headings","default"],Qt=Object.freeze(Object.defineProperty({__proto__:null,exportNames:qt},Symbol.toStringTag,{value:"Module"})),Xt=["headings","default"],Zt=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Xt},Symbol.toStringTag,{value:"Module"})),er=["headings","default"],tr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:er},Symbol.toStringTag,{value:"Module"})),rr=["headings","default"],nr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:rr},Symbol.toStringTag,{value:"Module"})),or=["Page"],sr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:or},Symbol.toStringTag,{value:"Module"})),ir=["headings","default"],ar=Object.freeze(Object.defineProperty({__proto__:null,exportNames:ir},Symbol.toStringTag,{value:"Module"})),lr=["headings","default"],ur=Object.freeze(Object.defineProperty({__proto__:null,exportNames:lr},Symbol.toStringTag,{value:"Module"})),cr=["headings","default"],dr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:cr},Symbol.toStringTag,{value:"Module"})),fr=["headings","default"],gr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:fr},Symbol.toStringTag,{value:"Module"})),pr=["headings","default"],_r=Object.freeze(Object.defineProperty({__proto__:null,exportNames:pr},Symbol.toStringTag,{value:"Module"})),hr=["headings","default"],mr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:hr},Symbol.toStringTag,{value:"Module"})),br=["headings","default"],yr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:br},Symbol.toStringTag,{value:"Module"})),vr=["headings","default"],Pr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:vr},Symbol.toStringTag,{value:"Module"})),Sr=["headings","default"],xr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Sr},Symbol.toStringTag,{value:"Module"})),Or=["headings","default"],Rr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Or},Symbol.toStringTag,{value:"Module"})),wr=["headings","default"],Er=Object.freeze(Object.defineProperty({__proto__:null,exportNames:wr},Symbol.toStringTag,{value:"Module"})),Cr=["headings","default"],Tr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Cr},Symbol.toStringTag,{value:"Module"})),$r=["headings","default"],jr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:$r},Symbol.toStringTag,{value:"Module"})),Nr=["headings","default"],kr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Nr},Symbol.toStringTag,{value:"Module"})),Fr=["headings","default"],Ar=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Fr},Symbol.toStringTag,{value:"Module"})),Ir=["headings","default"],Lr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Ir},Symbol.toStringTag,{value:"Module"})),Hr=["headings","default"],Br=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Hr},Symbol.toStringTag,{value:"Module"})),Dr=["headings","default"],Vr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Dr},Symbol.toStringTag,{value:"Module"})),zr=["headings","default"],Wr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:zr},Symbol.toStringTag,{value:"Module"})),Mr=["headings","default"],Ur=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Mr},Symbol.toStringTag,{value:"Module"})),Gr=[],Kr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Gr},Symbol.toStringTag,{value:"Module"})),Yr=["render"],Jr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:Yr},Symbol.toStringTag,{value:"Module"})),qr=[],Qr=Object.freeze(Object.defineProperty({__proto__:null,exportNames:qr},Symbol.toStringTag,{value:"Module"})),O={},Ae={},Xr={},R={},Zr=[],Ie={},en=!0,tn=[],rn={configValuesImported:[]},nn=Object.assign({}),on={...nn};O[".page"]=on;const sn=Object.assign({}),an={...sn};R[".page"]=an;const ln=Object.assign({"/pages/Abort.page.server.mdx":At,"/pages/RPC-vs-GraphQL-REST.page.server.mdx":Lt,"/pages/RPC.page.server.mdx":Bt,"/pages/abort-vs-error.page.server.mdx":Vt,"/pages/babel-plugin.page.server.mdx":Wt,"/pages/disableNamingConvention.page.server.mdx":Ut,"/pages/error-handling.page.server.mdx":Kt,"/pages/event-based.page.server.mdx":Jt,"/pages/file-upload.page.server.mdx":Qt,"/pages/form-validation.page.server.mdx":Zt,"/pages/getContext.page.server.mdx":tr,"/pages/httpHeaders.page.server.mdx":nr,"/pages/index/index.page.server.tsx":sr,"/pages/initial-data.page.server.mdx":ar,"/pages/initial-page-data.page.server.mdx":ur,"/pages/install.page.server.mdx":dr,"/pages/next.page.server.mdx":gr,"/pages/nuxt.page.server.mdx":_r,"/pages/onAbort.page.server.mdx":mr,"/pages/onBug.page.server.mdx":yr,"/pages/permissions.page.server.mdx":Pr,"/pages/react-native.page.server.mdx":xr,"/pages/root.page.server.mdx":Rr,"/pages/shield.page.server.mdx":Er,"/pages/svelte-kit.page.server.mdx":Tr,"/pages/telefunc.page.server.mdx":jr,"/pages/telefuncFiles.page.server.mdx":kr,"/pages/telefuncUrl.page.server.mdx":Ar,"/pages/transformer.page.server.mdx":Lr,"/pages/vike.page.server.mdx":Br,"/pages/vite-plugin.page.server.mdx":Vr,"/pages/vite.page.server.mdx":Wr,"/pages/webpack-plugin.page.server.mdx":Ur}),un={...ln};R[".page.server"]=un;const cn=Object.assign({}),dn={...cn};Ae[".page.route"]=dn;const fn=Object.assign({"/pages/index/index.page.client.ts":()=>h(()=>import("./pages_index_index.page.client.d0c85e9b.js"),["assets/entries/pages_index_index.page.client.d0c85e9b.js","assets/chunks/chunk-a33cf6d6.js","assets/static/index.page.client.a95a6883.css"])}),gn={...fn};O[".page.client"]=gn;const pn=Object.assign({"/pages/index/index.page.client.ts":Kr}),_n={...pn};R[".page.client"]=_n;const hn=Object.assign({"/pages/Abort.page.server.mdx":()=>h(()=>import("./pages_Abort.page.server.extractAssets.949d4f22.js").then(e=>e.A),[]),"/pages/RPC-vs-GraphQL-REST.page.server.mdx":()=>h(()=>import("./pages_RPC-vs-GraphQL-REST.page.server.extractAssets.4ed993c7.js"),[]),"/pages/RPC.page.server.mdx":()=>h(()=>import("./pages_RPC.page.server.extractAssets.4ed993c7.js"),[]),"/pages/abort-vs-error.page.server.mdx":()=>h(()=>import("./pages_abort-vs-error.page.server.extractAssets.4ed993c7.js"),[]),"/pages/babel-plugin.page.server.mdx":()=>h(()=>import("./pages_babel-plugin.page.server.extractAssets.4ed993c7.js"),[]),"/pages/disableNamingConvention.page.server.mdx":()=>h(()=>import("./pages_disableNamingConvention.page.server.extractAssets.4ed993c7.js"),[]),"/pages/error-handling.page.server.mdx":()=>h(()=>import("./pages_error-handling.page.server.extractAssets.4ed993c7.js"),[]),"/pages/event-based.page.server.mdx":()=>h(()=>import("./pages_event-based.page.server.extractAssets.4ed993c7.js"),[]),"/pages/file-upload.page.server.mdx":()=>h(()=>import("./pages_file-upload.page.server.extractAssets.4ed993c7.js"),[]),"/pages/form-validation.page.server.mdx":()=>h(()=>import("./pages_form-validation.page.server.extractAssets.4ed993c7.js"),[]),"/pages/getContext.page.server.mdx":()=>h(()=>import("./pages_getContext.page.server.extractAssets.4ed993c7.js"),[]),"/pages/httpHeaders.page.server.mdx":()=>h(()=>import("./pages_httpHeaders.page.server.extractAssets.4ed993c7.js"),[]),"/pages/index/index.page.server.tsx":()=>h(()=>import("./pages_index_index.page.server.extractAssets.3ce3e902.js"),["assets/entries/pages_index_index.page.server.extractAssets.3ce3e902.js","assets/static/index.page.server.6c2d1ceb.css"]),"/pages/initial-data.page.server.mdx":()=>h(()=>import("./pages_initial-data.page.server.extractAssets.4ed993c7.js"),[]),"/pages/initial-page-data.page.server.mdx":()=>h(()=>import("./pages_initial-page-data.page.server.extractAssets.4ed993c7.js"),[]),"/pages/install.page.server.mdx":()=>h(()=>import("./pages_install.page.server.extractAssets.4ed993c7.js"),[]),"/pages/next.page.server.mdx":()=>h(()=>import("./pages_next.page.server.extractAssets.4ed993c7.js"),[]),"/pages/nuxt.page.server.mdx":()=>h(()=>import("./pages_nuxt.page.server.extractAssets.4ed993c7.js"),[]),"/pages/onAbort.page.server.mdx":()=>h(()=>import("./pages_onAbort.page.server.extractAssets.4ed993c7.js"),[]),"/pages/onBug.page.server.mdx":()=>h(()=>import("./pages_onBug.page.server.extractAssets.4ed993c7.js"),[]),"/pages/permissions.page.server.mdx":()=>h(()=>import("./pages_permissions.page.server.extractAssets.4ed993c7.js"),[]),"/pages/react-native.page.server.mdx":()=>h(()=>import("./pages_react-native.page.server.extractAssets.4ed993c7.js"),[]),"/pages/root.page.server.mdx":()=>h(()=>import("./pages_root.page.server.extractAssets.4ed993c7.js"),[]),"/pages/shield.page.server.mdx":()=>h(()=>import("./pages_shield.page.server.extractAssets.4ed993c7.js"),[]),"/pages/svelte-kit.page.server.mdx":()=>h(()=>import("./pages_svelte-kit.page.server.extractAssets.4ed993c7.js"),[]),"/pages/telefunc.page.server.mdx":()=>h(()=>import("./pages_telefunc.page.server.extractAssets.4ed993c7.js"),[]),"/pages/telefuncFiles.page.server.mdx":()=>h(()=>import("./pages_telefuncFiles.page.server.extractAssets.4ed993c7.js"),[]),"/pages/telefuncUrl.page.server.mdx":()=>h(()=>import("./pages_telefuncUrl.page.server.extractAssets.4ed993c7.js"),[]),"/pages/transformer.page.server.mdx":()=>h(()=>import("./pages_transformer.page.server.extractAssets.4ed993c7.js"),[]),"/pages/vike.page.server.mdx":()=>h(()=>import("./pages_vike.page.server.extractAssets.4ed993c7.js"),[]),"/pages/vite-plugin.page.server.mdx":()=>h(()=>import("./pages_vite-plugin.page.server.extractAssets.4ed993c7.js"),[]),"/pages/vite.page.server.mdx":()=>h(()=>import("./pages_vite.page.server.extractAssets.4ed993c7.js"),[]),"/pages/webpack-plugin.page.server.mdx":()=>h(()=>import("./pages_webpack-plugin.page.server.extractAssets.4ed993c7.js"),[])}),mn={...hn};Ie[".page.server"]=mn;R[".page.server"]=R[".page.server"]??{};R[".page.server"]["@brillout/docpress/renderer/_default.page.server.js"]=Jr;O[".css"]=O[".css"]??{};O[".css"]["@brillout/docpress/renderer/_default.page.server.css"]=()=>h(()=>Promise.resolve({}),["assets/static/default.page.server.e70d4382.css"]);O[".page.client"]=O[".page.client"]??{};O[".page.client"]["@brillout/docpress/renderer/_default.page.client.js"]=()=>h(()=>import("../chunks/chunk-d6ef409d.js"),["assets/chunks/chunk-d6ef409d.js","assets/chunks/chunk-a33cf6d6.js"]);R[".page.client"]=R[".page.client"]??{};R[".page.client"]["@brillout/docpress/renderer/_default.page.client.js"]=Qr;O[".css"]=O[".css"]??{};O[".css"]["@brillout/docpress/renderer/_default.page.client.css"]=()=>h(()=>Promise.resolve({}),["assets/static/default.page.client.92e9337b.css"]);const bn=Object.freeze(Object.defineProperty({__proto__:null,isGeneratedFile:en,neverLoaded:Ie,pageConfigGlobalSerialized:rn,pageConfigsSerialized:tn,pageFilesEager:Ae,pageFilesExportNamesEager:R,pageFilesExportNamesLazy:Xr,pageFilesLazy:O,pageFilesList:Zr},Symbol.toStringTag,{value:"Module"}));pt(bn);function yn(){_t(),D()}function vn(){var n,o,s,l;const e=!!((o=(n=window.__REACT_DEVTOOLS_GLOBAL_HOOK__)==null?void 0:n.renderers)!=null&&o.size),t=!!((l=(s=window.__REACT_DEVTOOLS_GLOBAL_HOOK__)==null?void 0:s.rendererInterfaces)!=null&&l.size),r=!!window.__vite_plugin_react_preamble_installed__;return e||t||r}function Le(e,t){const r=Object.keys,n=typeof e;return e&&t&&n==="object"&&n===typeof t?r(e).length===r(t).length&&r(e).every(s=>Le(e[s],t[s])):e===t}function Pn(e,t){return E(e)&&E(t)&&e.constructor===t.constructor&&Le({...e,stack:null},{...t,stack:null})&&t.message===t.message}function K(e){window.location.href=e}function Sn(e){return new Promise(t=>setTimeout(t,e))}function xn(e,t){let r=!1;return()=>{r||(r=!0,setTimeout(()=>{r=!1,e()},t))}}function He(e){window.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&e()})}function On(e){window.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&e()})}function Rn(e){return!e.startsWith("/")&&!e.startsWith(".")&&!e.startsWith("?")&&e!==""}yn();const re=j("history.ts",{});function Be(){let e=window.history.state;e||(e={});let t=!1;"timestamp"in e||(t=!0,e.timestamp=fe()),"scrollPosition"in e||(t=!0,e.scrollPosition=de()),"triggedBy"in e||(e.triggedBy="browser"),De(e),t&&ge(e)}function ce(){const e=window.history.state||{};return De(e),e}function de(){return{x:window.scrollX,y:window.scrollY}}function fe(){return new Date().getTime()}function be(){const e=de(),t=ce();ge({...t,scrollPosition:e})}function wn(e,t){if(t)ge(ce(),e);else{const r=fe();En({timestamp:r,scrollPosition:null,triggedBy:"vike"},e)}}function De(e){if(a(E(e)),"timestamp"in e){const{timestamp:t}=e;a(typeof t=="number")}if("scrollPosition"in e){const{scrollPosition:t}=e;t!==null&&a(y(t,"x","number")&&y(t,"y","number"))}}function ge(e,t){window.history.replaceState(e,"",t??null)}function En(e,t){Ve(e,"",t)}function Cn(){re.pushStateOriginal=re.pushStateOriginal??window.history.pushState,window.history.pushState=(e={},...t)=>{g(e==null||E(e),"history.pushState(state) argument state must be an object");const r={scrollPosition:de(),timestamp:fe(),...e,triggedBy:"user"};return Ve(r,...t)}}function Ve(...e){re.pushStateOriginal.apply(history,e)}async function Tn(e,t){const n=Ce(e,t).filter(s=>s.fileType===".page.server");return await Promise.all(n.map(async s=>{s.exportNames||(a(s.loadExportNames,t),await s.loadExportNames())})),{hasOnBeforeRenderServerSideOnlyHook:n.some(({exportNames:s})=>(a(s),s.includes("onBeforeRender")))}}const ye=["urlPathname","urlParsed"],$n=["Page","pageExports","exports"];function ze(e){[...$n,...ye].forEach(r=>{r in e&&(ye.includes(r)?(a(r.startsWith("url")),x(!1,`pageContext.${r} is already available in the browser when using Client Routing; adding '${r}' to passToClient has no effect`,{onlyOnce:!0})):x(!1,`pageContext.${r} is a built-in that cannot be overriden; adding '${r}' to passToClient has no effect`,{onlyOnce:!0}),delete e[r])})}const jn="/";function Nn(e,t,r){const{pathnameOriginal:n,searchOriginal:o,hashOriginal:s}=J(e,jn);e.startsWith("/")&&a(e===`${n}${o||""}${s||""}`,{url:e});const l=n.endsWith("/");let i;return r&&n!=="/"?(l?i=I(n,0,-1):i=n,a(!i.endsWith("/"),{url:e}),a(i!=="")):i=n+(l?"":"/")+"index",a(i),i=i+t,`${i}${o||""}${s||""}`}const kn=".pageContext.json",Fn=!1;function An(e){return Nn(e,kn,Fn)}function We(e,{hookName:t,hookFilePath:r}){if(e==null)return;a(!t.endsWith(")"));const n=`The ${_.cyan("pageContext")} object provided by the ${t}() hook defined by ${r}`;g(E(e),`${n} should be an object (but it's ${_.cyan(`typeof pageContext === ${JSON.stringify(typeof e)}`)} instead)`),g(!("_objectCreatedByVike"in e),`${n} shouldn't be the whole ${_.cyan("pageContext")} object, see https://vike.dev/pageContext-manipulation#do-not-return-entire-pagecontext`),x(!("_pageId"in e),`${n} sets ${_.cyan("pageContext._pageId")} which means that Vike's routing is overriden. This is an experimental feature: make sure to contact a vike maintainer before using this.`,{onlyOnce:!0}),g(!("is404"in e),`${n} sets ${_.cyan("pageContext.is404")} which is forbidden, use ${_.cyan("throw render()")} instead, see https://vike.dev/render`)}function In(e,t,r){a(!r.endsWith(" "));const n=[],o=Object.keys(e);for(const s of o)t.includes(s)||n.push(s);g(n.length===0,[r,"returned an object with following unknown keys:",me(n)+".","Only following keys are allowed:",me(t)+"."].join(" "))}function Ln(e,t){if(e==null)return;const r=`The onBeforeRender() hook defined by ${t}`;g(C(e),`${r} should return a plain JavaScript object, ${_.cyan("undefined")}, or ${_.cyan("null")}`),In(e,["pageContext"],r),e.pageContext&&We(e.pageContext,{hookName:"onBeforeRender",hookFilePath:t})}function Hn(e,t){if(!C(e))return!1;for(const r of Object.keys(e))if(!t.includes(r))return!1;return!0}function Bn(e){return typeof e=="object"&&e!==null&&Object.values(e).every(t=>typeof t=="string")}function Dn(e,t,r=n=>n){if(a(e.length>0),e.length===1)return r(e[0]);const n=e.slice(0,e.length-1),o=e[e.length-1];return n.map(r).join(", ")+` ${t} `+r(o)}q()&&D();async function Vn(e,t){let r;if(e._pageFilesAll.length>0?(a(e._pageConfigs.length===0),r=zn(e._pageId,e._pageFilesAll)):r=L(e,"guard"),!r)return;const n=r.hookFn;let o=e;const s=t(e);s&&(o=s);const l=await F(()=>n(o),r);g(l===void 0,`The guard() hook of ${r.hookFilePath} returns a value, but guard() doesn't accept any return value`)}function zn(e,t){const r=t.find(c=>c.pageId===e&&c.fileType===".page.route");if(!r)return null;const{filePath:n,fileExports:o}=r;a(o);const s=o.guard;if(!s)return null;const l=n,i=Te("guard");return g(ie(s),`guard() defined by ${l} should be a function`),{hookFn:s,hookName:"guard",hookFilePath:l,hookTimeout:i}}function Wn(e){const t=new Error("AbortRender");return m(t,{_pageContextAbort:e,[Me]:!0}),t}const Me="_isAbortError";function ve(e){return typeof e=="object"&&e!==null&&Me in e}function Mn(e){return e._urlRewrite||e._urlRedirect||e.abortStatusCode?(a(y(e,"_abortCall","string")),!0):!1}function Un(e,t,r){if(t)return;const n=r._urlRewrite??r.urlOriginal;a(n);const o=e._pageContextAbort._abortCall;ae(!1,`${_.cyan(o)} intercepted while rendering ${_.cyan(n)}`,{onlyOnce:!1})}function Gn(e){Kn(e);const t={_urlRewrite:null};return e.forEach(r=>{Object.assign(t,r)}),t}function Kn(e){const t=[];e.forEach(r=>{const n=r._urlRewrite;{const o=t.indexOf(n);if(o!==-1){const s=[...t.slice(o),n].map(l=>`render('${l}')`).join(" => ");g(!1,`Infinite loop of render() calls: ${s}`)}}t.push(n)})}function Yn(e,t){const r=[e>0&&_.cyan("throw render('/some-url')"),t>0&&_.cyan("throw redirect('/some-url')")].filter(Boolean).join(" and ");g(e+t<=7,`Maximum chain length of 7 ${r} exceeded. Did you define an infinite loop of ${r}?`)}const Ue=j("router/getPageContext.ts",{});async function Jn(e){const t=ht();ze(t),m(t,{isHydration:!0,_hasPageContextFromClient:!1}),m(t,await G(t._pageId,e));{const r={...e,...t};if(Je(r)){const n=await Ke(r);m(t,n)}}return Ye(t),t}async function qn(e){const t=$e(e._pageFilesAll,e._pageConfigs);if(!t)throw new Error("No error page defined.");const r={isHydration:!1,_pageId:t};return m(r,await Ge({...e,...r},!0)),r}async function Qn(e){const t={isHydration:!1,_pageId:e._pageId};return m(t,await Ge({...e,...t},!1)),Ye(t),t}async function Ge(e,t){let r={};m(r,{_hasPageContextFromClient:!1}),m(r,await G(e._pageId,e));let n=!1;if(!t&&await Xn({...e,...r})){const o=await eo(e);if(n=!0,!o._isError)m(r,o);else{const s=$e(e._pageFilesAll,e._pageConfigs);a(s),r={},m(r,{_hasPageContextFromClient:!1,isHydration:!1,_pageId:s}),m(r,await G(r._pageId,e)),a(y(o,"is404","boolean")),a(y(o,"pageProps","object")),a(y(o.pageProps,"is404","boolean")),a(!("serverSideError"in o)),m(r,o)}}else m(r,{_hasPageContextFromServer:!1}),t||await Vn({...e,...r},o=>je(o,!0));{const o={...e,...r};if(Je(o)||!n){const s=await Ke(o);m(r,s)}else a(n)}return r}async function Ke(e){const t=L(e,"onBeforeRender");if(!t)return{_hasPageContextFromClient:!1};const r=t.hookFn,n={_hasPageContextFromClient:!0},o=je({...e,...n},!0),s=await F(()=>r(o),t);Ln(s,t.hookFilePath);const l=s==null?void 0:s.pageContext;return m(n,l),n}function Ye(e){e._pageContextInitHasClientData&&(Ue.pageContextInitHasClientData=!0)}async function Xn(e){return!!Ue.pageContextInitHasClientData||await Zn(e)}async function Zn(e){var t;if(e._pageConfigs.length>0){const r=Ne(e._pageId,e._pageConfigs),n=((t=A(r,"onBeforeRenderEnv"))==null?void 0:t.value)??{};return a(E(n)),!!n.server&&!n.client}else{const{hasOnBeforeRenderServerSideOnlyHook:r}=await Tn(e._pageFilesAll,e._pageId);return r}}function Je(e){var t;if(e._pageConfigs.length>0){const r=Ne(e._pageId,e._pageConfigs),n=((t=A(r,"onBeforeRenderEnv"))==null?void 0:t.value)??{};return a(E(n)),!!n.client&&!n.server}else return!1}async function eo(e){const t=An(e._urlRewrite??e.urlOriginal),r=await fetch(t);{const s=r.headers.get("content-type"),l="application/json",i=s&&s.includes(l);if(!i&&r.status===404)throw K(e.urlOriginal),ro();g(i,`Wrong Content-Type for ${t}: it should be ${l} but it's ${s} instead. Make sure to properly use pageContext.httpResponse.headers, see https://vike.dev/renderPage`)}const n=await r.text(),o=mt(n);if(a(E(o)),"serverSideError"in o)throw bt("The pageContext object couldn't be fetched from the server as an error occurred on the server-side. Check your server logs.");if(Mn(o))throw Wn(o);return a(y(o,"_pageId","string")),ze(o),m(o,{_hasPageContextFromServer:!0}),o}function to(e){return E(e)&&!!e._alreadyServerSideRouted}function ro(){const e=new Error("Page doesn't exist");return Object.assign(e,{_alreadyServerSideRouted:!0}),e}function qe(e,t=!0){a(e.urlOriginal),"urlPathname"in e&&(a(typeof e.urlPathname=="string"),a(Z(e,"urlPathname"))),"urlParsed"in e&&a(Z(e,"urlParsed")),"url"in e&&a(Z(e,"url")),Object.defineProperty(e,"urlPathname",{get:Xe,enumerable:t,configurable:!0}),Object.defineProperty(e,"url",{get:no,enumerable:!1,configurable:!0}),Object.defineProperty(e,"urlParsed",{get:oo,enumerable:t,configurable:!0})}function Qe(e){let t=e._urlHandler;t||(t=o=>o);let r=e._urlRewrite??e.urlLogical??e.urlOriginal;r=t(r);const n=e._baseServer;return a(r&&typeof r=="string"),a(n.startsWith("/")),J(r,n)}function Xe(){const{pathname:e}=Qe(this),t=e;return a(t.startsWith("/")),t}function no(){return x(!1,"`pageContext.url` is outdated. Use `pageContext.urlPathname`, `pageContext.urlParsed`, or `pageContext.urlOriginal` instead. (See https://vike.dev/migration/0.4.23 for more information.)",{onlyOnce:!0,showStackTrace:!0}),Xe.call(this)}function oo(){const e=Qe(this),{origin:t,pathname:r,pathnameOriginal:n,search:o,searchAll:s,searchOriginal:l,hash:i,hashOriginal:c}=e,f=q(),v=u=>{x(f,`pageContext.urlParsed.${u} isn't available on the server-side (HTTP requests don't include the URL hash by design)`,{onlyOnce:!0,showStackTrace:!0})},d={origin:t,pathname:r,pathnameOriginal:n,search:o,searchAll:s,searchOriginal:l,get hash(){return v("hash"),i},get hashOriginal(){return v("hashOriginal"),c},get hashString(){return x(!1,"pageContext.urlParsed.hashString has been renamed to pageContext.urlParsed.hashOriginal",{onlyOnce:!0,showStackTrace:!0}),v("hashString"),c},get searchString(){return x(!1,"pageContext.urlParsed.searchString has been renamed to pageContext.urlParsed.searchOriginal",{onlyOnce:!0,showStackTrace:!0}),l}};return z(d,"hashString"),z(d,"searchString"),f||(z(d,"hash"),z(d,"hashOriginal")),d}function z(e,t){const r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(e,t,{...r,enumerable:!1})}function so(e){a(typeof e.urlOriginal=="string"),a(typeof e.urlPathname=="string"),a(C(e.urlParsed)),a(e.urlPathname===e.urlParsed.pathname)}function io(e,t){const n=t.filter(({filesystemRoot:s})=>e.startsWith(s)).sort(U(({filesystemRoot:s})=>s.length))[0];let o;if(n){const{filesystemRoot:s,urlRoot:l}=n,i={pageId:e,filesystemRoot:s,urlRoot:l};a(l.startsWith("/")&&e.startsWith("/")&&s.startsWith("/"),i),a(e.startsWith(s),i),s!=="/"?(a(!s.endsWith("/"),i),o=I(e,s.length,0)):o=e,a(o.startsWith("/"),i),o=l+(l.endsWith("/")?"":"/")+I(o,1,0)}else o=e;return a(o.startsWith("/")),o=o.split("/").filter(s=>s!=="pages"&&s!=="src"&&s!=="index").join("/"),a(!o.includes(".page.")),a(!o.endsWith(".")),o.endsWith("/index")&&(o=I(o,0,-6)),o===""&&(o="/"),a(o.startsWith("/")),a(!o.endsWith("/")||o==="/"),o}async function ao(e,t,r){so(t);let n=e(t);if(Ze(n,`The Route Function ${r}`),n=await n,n===!1)return null;if(n===!0&&(n={}),g(C(n),`The Route Function ${r} should return a boolean or a plain JavaScript object (but it's ${_.cyan(`typeof result === ${JSON.stringify(typeof n)}`)} instead)`),"match"in n){const{match:l}=n;if(g(typeof l=="boolean",`The ${_.cyan("match")} value returned by the Route Function ${r} should be a boolean.`),!l)return null}let o=null;"precedence"in n&&(o=n.precedence,g(typeof o=="number",`The ${_.cyan("precedence")} value returned by the Route Function ${r} should be a number.`)),et(n,`The ${_.cyan("routeParams")} object returned by the Route Function ${r} should`);const s=n.routeParams||{};return g(!("pageContext"in n),`Providing ${_.cyan("pageContext")} in Route Functions is prohibited, see https://vike.dev/route-function#cannot-provide-pagecontext`),a(C(s)),Object.keys(n).forEach(l=>{g(l==="match"||l==="routeParams"||l==="precedence",`The Route Function ${r} returned an object with an unknown property ${_.cyan(l)} (the known properties are ${_.cyan("match")}, ${_.cyan("routeParams")}, and ${_.cyan("precedence")})`)}),{precedence:o,routeParams:s}}function Ze(e,t){x(!Tt(e),`${t} returned a promise, but asynchronous routing is deprecated and will be removed in the next major release, see https://vike.dev/route-function#async`,{onlyOnce:!0})}function Pe(){const e=_.cyan("iKnowThePerformanceRisksOfAsyncRouteFunctions");x(!1,`${e} is deprecated and will be removed in the next major release`,{onlyOnce:!0})}function et(e,t){a(t.endsWith(" should")),y(e,"routeParams")&&(a(t.endsWith(" should")),g(C(e.routeParams),`${t} be a plain JavaScript object.`),g(Bn(e.routeParams),`${t} only hold string values.`))}async function lo(e,t,r,n){await Promise.all(e.filter(i=>i.fileType===".page.route").map(i=>{var c;return(c=i.loadFile)==null?void 0:c.call(i)}));const{onBeforeRouteHook:o,filesystemRoots:s}=co(e,t,r);return{pageRoutes:uo(s,e,t,n),onBeforeRouteHook:o}}function uo(e,t,r,n){const o=[];let s=[...n];if(r.length>0){a(e===null);const l=!0;r.filter(i=>!i.isErrorPage).forEach(i=>{const c=i.pageId;s=go(s,c);let f=null;{const v="route",d=A(i,v);if(d){const u=d.value,b=yt(d.definedAt,v);typeof u=="string"?f={pageId:c,comesFromV1PageConfig:l,routeString:u,routeDefinedAt:b,routeType:"STRING"}:(a(ie(u)),A(i,"iKnowThePerformanceRisksOfAsyncRouteFunctions","boolean")&&Pe(),f={pageId:c,comesFromV1PageConfig:l,routeFunction:u,routeDefinedAt:b,routeType:"FUNCTION"})}}if(!f){const{routeFilesystem:v}=i;a(v);const{routeString:d,definedBy:u}=v;a(v.routeString.startsWith("/")),f={pageId:c,routeFilesystemDefinedBy:u,comesFromV1PageConfig:l,routeString:d,routeDefinedAt:null,routeType:"FILESYSTEM"}}a(f),o.push(f)})}if(r.length===0){a(e);const l=!1;s.filter(i=>!vt(i)).forEach(i=>{const c=t.find(f=>f.pageId===i&&f.fileType===".page.route");if(!c||!("default"in c.fileExports)){const f=io(i,e);a(f.startsWith("/")),a(!f.endsWith("/")||f==="/"),o.push({pageId:i,comesFromV1PageConfig:l,routeString:f,routeDefinedAt:null,routeFilesystemDefinedBy:`${i}.page.*`,routeType:"FILESYSTEM"})}else{const{filePath:f,fileExports:v}=c;if(a(v.default),y(v,"default","string")){const d=v.default;g(d.startsWith("/"),`A Route String should start with a leading slash '/' but ${f} has \`export default '${d}'\`. Make sure to \`export default '/${d}'\` instead.`),o.push({pageId:i,comesFromV1PageConfig:l,routeString:d,routeDefinedAt:f,routeType:"STRING"});return}if(y(v,"default","function")){const d=v.default;"iKnowThePerformanceRisksOfAsyncRouteFunctions"in v&&Pe(),o.push({pageId:i,comesFromV1PageConfig:l,routeFunction:d,routeDefinedAt:f,routeType:"FUNCTION"});return}g(!1,`The default export of ${f} should be a string or a function.`)}})}return o}function co(e,t,r){if(t.length>0)return{onBeforeRouteHook:Pt(r,"onBeforeRoute"),filesystemRoots:null};let n=null;const o=[];return e.filter(s=>s.fileType===".page.route"&&s.isDefaultPageFile).forEach(({filePath:s,fileExports:l})=>{if(a(l),"onBeforeRoute"in l){g(y(l,"onBeforeRoute","function"),`\`export { onBeforeRoute }\` of ${s} should be a function.`);const{onBeforeRoute:i}=l,c="onBeforeRoute";n={hookFilePath:s,hookFn:i,hookName:c,hookTimeout:Te(c)}}"filesystemRoutingRoot"in l&&(g(y(l,"filesystemRoutingRoot","string"),`\`export { filesystemRoutingRoot }\` of ${s} should be a string.`),g(y(l,"filesystemRoutingRoot","string"),`\`export { filesystemRoutingRoot }\` of ${s} is \`'${l.filesystemRoutingRoot}'\` but it should start with a leading slash \`/\`.`),o.push({filesystemRoot:fo(s),urlRoot:l.filesystemRoutingRoot}))}),{onBeforeRouteHook:n,filesystemRoots:o}}function fo(e){a(e.startsWith("/")),a(!e.endsWith("/"));const t=e.split("/"),r=I(t,0,-1).join("/")||"/";return a(r.startsWith("/")),a(!r.endsWith("/")||r==="/"),r}function go(e,t){const{length:r}=e;return e=e.filter(n=>n!==t),a(e.length===r-1),e}function tt(){const e="/";return a(po(e)),e}function po(e){return e.startsWith("/")}const ee=j("createPageContext.ts",{});async function rt(e){ee.pageFilesData||(ee.pageFilesData=await St(!0));const{pageFilesAll:t,allPageIds:r,pageConfigs:n,pageConfigGlobal:o}=ee.pageFilesData,{pageRoutes:s,onBeforeRouteHook:l}=await lo(t,n,o,r),i=tt();a(ke(i));const f={urlOriginal:e,_objectCreatedByVike:!0,_urlHandler:null,_urlRewrite:null,_baseServer:i,_isProduction:!0,_pageFilesAll:t,_pageConfigs:n,_pageConfigGlobal:o,_allPageIds:r,_pageRoutes:s,_onBeforeRouteHook:l};return qe(f),f}function nt(e){const t=e.getAttribute("href");return!!(t===null||t===""||Rn(t)||ho(e)||mo(t)||!bo(t)||!xt(t)||!_o(e))}function _o(e){if(yo()){const r=e.getAttribute("data-vike-link");return r!==null&&r!=="false"}else return!0}function ho(e){const t=e.getAttribute("target"),r=e.getAttribute("rel");return t==="_blank"||t==="_external"||r==="external"||e.hasAttribute("download")}function mo(e){if(e.startsWith("#"))return!0;const t=r=>r.split("#")[0];return!!(e.includes("#")&&t(e)===t(window.location.href))}function bo(e){const t=tt();a(ke(t));const{hasBaseServer:r}=J(e,t);return r}function yo(){return!!window._disableAutomaticLinkInterception}function vo(e,t){let r=Po(e,t);return r==="viewport"&&!e._isProduction&&(ae(!1,"Viewport prefetching is disabled in development",{onlyOnce:!0}),r="hover"),{prefetchStaticAssets:r}}function Po(e,t){{const r=So(t);if(r!==null)return r}if("prefetchLinks"in e.exports&&g(!1,"`export { prefetchLinks }` is deprecated, use `export { prefetchStaticAssets }` instead."),"prefetchStaticAssets"in e.exports){const{prefetchStaticAssets:r}=e.exports;if(r===!1)return!1;if(r==="hover")return"hover";if(r==="viewport")return"viewport";const n="prefetchStaticAssets value should be false, 'hover', or 'viewport'";g(C(r),n);const o=Object.keys(r);g(o.length===1&&o[0]==="when",n);const{when:s}=r;if(s==="HOVER"||s==="VIEWPORT"){const l=s.toLowerCase();return x(!1,`prefetchStaticAssets value \`{ when: '${s}' }\` is outdated: set prefetchStaticAssets to '${l}' instead`,{onlyOnce:!0}),l}g(!1,n)}return"hover"}function So(e){const t=e.getAttribute("data-prefetch-static-assets"),r=e.getAttribute("data-prefetch");if(t===null&&r===null)return null;const n="The attribute data-prefetch is outdated, use data-prefetch-static-assets instead.";if(t){if(g(r===null,n),t==="hover"||t==="viewport")return t;if(t==="false")return!1;g(!1,`data-prefetch-static-assets has value "${t}" but it should instead be "false", "hover", or "viewport"`)}if(r){if(a(!t),x(!1,n,{onlyOnce:!0}),r==="true")return"viewport";if(r==="false")return"hover";g(!1,`data-prefetch has value "${r}" but it should instead be "true" or "false"`)}a(!1)}const ot=new Map;function xo(e){const t=st(e);return ot.has(t)}function Oo(e){const t=st(e);ot.set(t,!0)}function st(e){return J(e,"/").pathname}function H(e){return e.fileType===".css"?[]:e.exportNames?e.exportNames:(a(e.fileExports,e.filePath),Object.keys(e.fileExports))}function Ro({pageFilesClientSide:e,pageFilesServerSide:t,pageId:r}){return{isHtmlOnly:n(),isClientRouting:s()};function n(){return t.some(i=>i.pageId===r&&i.fileType===".page")?(o(),!1):!(!t.some(i=>i.pageId===r&&i.fileType===".page.server")||e.some(i=>i.pageId===r&&i.fileType===".page.client"&&H(i).includes("render")))}function o(){const l=e.some(i=>H(i).includes("render"));g(l,["No client-side `render()` hook found.","See https://vike.dev/render-modes for more information.",["Loaded client-side page files (none of them `export { render }`):",...e.map((i,c)=>` (${c+1}): ${i.filePath}`)].join(`
`)].join(" "))}function s(){return e.some(i=>H(i).includes("clientRouting"))}}function wo({pageFilesClientSide:e,pageFilesServerSide:t,isHtmlOnly:r,isClientRouting:n}){let o=[];const s=t.filter(i=>!e.includes(i)),l=[];if(l.push(...e.map(i=>({id:i.filePath,onlyAssets:!1,eagerlyImported:!1}))),l.push(...s.map(i=>({id:i.filePath,onlyAssets:!0,eagerlyImported:!1}))),r)o=e.map(i=>i.filePath);else{const i=Eo(n);l.push({id:i,onlyAssets:!1,eagerlyImported:!1}),o=[i]}return{clientEntries:o,clientDependencies:l}}function Eo(e){return e?"@@vike/dist/esm/client/client-routing-runtime/entry.js":"@@vike/dist/esm/client/server-routing-runtime/entry.js"}function Co(e,t){let r=Fe(e,t);const n=Ce(e,t),{isHtmlOnly:o,isClientRouting:s}=Ro({pageFilesClientSide:r,pageFilesServerSide:n,pageId:t});o&&(r=r.filter(c=>c.isEnv("CLIENT_ONLY")&&!H(c).includes("render")),r=$o(r));const{clientEntries:l,clientDependencies:i}=wo({pageFilesClientSide:r,pageFilesServerSide:n,isHtmlOnly:o,isClientRouting:s});return{isHtmlOnly:o,isClientRouting:s,clientEntries:l,clientDependencies:i,pageFilesClientSide:r,pageFilesServerSide:n}}async function To(e,t,{sharedPageFilesAlreadyLoaded:r}){const n=Fe(e,t);await Promise.all(n.map(async o=>{var s;a(o.isEnv("CLIENT_ONLY")||o.isEnv("CLIENT_AND_SERVER")),!(r&&o.isEnv("CLIENT_AND_SERVER"))&&await((s=o.loadExportNames)==null?void 0:s.call(o))}))}function $o(e){const t=[];for(const r of e)if(t.push(r),H(r).includes("overrideDefaultPages"))break;return t}function jo(e,t,r){var n,o;if(e){const s=((n=A(e,"clientRouting","boolean"))==null?void 0:n.value)??!1;return{isClientSideRenderable:((o=A(e,"isClientSideRenderable","boolean"))==null?void 0:o.value)??!1,isClientRouting:s}}else{const{isHtmlOnly:s,isClientRouting:l}=Co(t,r);return{isClientSideRenderable:!s,isClientRouting:l}}}async function it(e,t){await To(t._pageFilesAll,e,{sharedPageFilesAlreadyLoaded:!1});const r=Ot(t._pageConfigs,e),{isClientSideRenderable:n,isClientRouting:o}=jo(r,t._pageFilesAll,e);return n&&o}const at="@",ne=":";function No(e,t="Invalid"){let r=`${t} Route String ${$(e)}`;g(e!=="",`${r} (empty string): set it to ${$("/")} instead`),g(["/","*"].includes(e[0]),`${r}: it should start with ${$("/")} or ${$("*")}`),g(!e.includes("**"),`${r}: set it to ${$(e.split("**").join("*"))} instead`)}function oe(e,t){No(e);const r=lt(e),n=r.map(d=>d.param?"[^/]+":d.glob?d.isLastDir?"|/.*":".*":jt(d.static)).map(d=>`(${d})`).join(""),o=new RegExp(`^${n}/?$`),s=t.match(o);if(!s)return null;const l={},[i,...c]=s;let f=0;const v=r.filter(d=>d.glob).length>1;return r.forEach((d,u)=>{let b=c[u];if(d.param&&(l[d.param]=b),d.glob){const T=`*${v?++f:""}`;d.isLastDir&&(b=b.slice(1)),l[T]=b}}),{routeParams:l}}function lt(e){const t=[],r=o=>{const s=t[t.length-1];s!=null&&s.static?s.static+=o:t.push({static:o})},n=e.split("/");return n.forEach((o,s)=>{const l=s===0,i=s===n.length-1;ko(o)?(x(!o.startsWith(ne),`Outdated Route String ${$(e)}, use ${$(e.split(ne).join(at))} instead`,{onlyOnce:!0}),l||r("/"),t.push({param:o.slice(1)})):o==="*"&&i&&e!=="*"&&e!=="/*"?t.push({glob:!0,isLastDir:!0}):(l||r("/"),o.split("*").forEach((c,f)=>{f!==0&&t.push({glob:!0}),c!==""&&r(c)}))}),t}function W(e){const t=lt(e),r=i=>(i==null?void 0:i.split("/").filter(Boolean).length)||0;let n=0;for(const i of t){if(!i.static)break;n+=r(i.static)}const o=t.map(i=>r(i.static)).reduce((i,c)=>i+c,0),s=t.filter(i=>i.param).length,l=t.filter(i=>i.glob).length;return{numberOfStaticPartsBeginning:n,numberOfStaticParts:o,numberOfParams:s,numberOfGlobs:l}}function ko(e){return e.startsWith(at)||e.startsWith(ne)}function Se(e){const r=oe(e,e);return a(r),Object.keys(r.routeParams).length===0}function $(e){return q()?`'${e}'`:(e===""&&(e="''"),_.cyan(e))}function Fo(e){e.sort(Ao).sort(N(t=>t.routeType==="FUNCTION"&&!!t.precedence&&t.precedence<0)).sort(N(t=>t.routeType==="STRING"&&Se(t.routeString)===!1)).sort(N(t=>t.routeType==="FUNCTION"&&!t.precedence)).sort(N(t=>t.routeType==="STRING"&&Se(t.routeString)===!0)).sort(N(t=>t.routeType==="FILESYSTEM")).sort(N(t=>t.routeType==="FUNCTION"&&!!t.precedence&&t.precedence>0))}function Ao(e,t){{const r=e.precedence??0,n=t.precedence??0;if(r!==n)return r>n?-1:1}if(!t.routeString||!e.routeString)return 0;{const n=U(o=>W(o).numberOfStaticPartsBeginning)(e.routeString,t.routeString);if(n!==0)return n}{const n=U(o=>W(o).numberOfStaticParts)(e.routeString,t.routeString);if(n!==0)return n}{const n=Rt(o=>W(o).numberOfGlobs)(e.routeString,t.routeString);if(n!==0)return n}{const n=U(o=>W(o).numberOfParams)(e.routeString,t.routeString);if(n!==0)return n}return 0}async function Io(e){const t={};if(!e._onBeforeRouteHook)return null;const r=await Lo(e._onBeforeRouteHook,e);return r&&(m(t,r),y(t,"_pageId","string")||y(t,"_pageId","null"))?(y(t,"routeParams")?a(y(t,"routeParams","object")):m(t,{routeParams:{}}),m(t,{_routingProvidedByOnBeforeRouteHook:!0,_debugRouteMatches:"CUSTOM_ROUTING"}),t):(m(t,{_routingProvidedByOnBeforeRouteHook:!1}),t)}async function Lo(e,t){let r=e.hookFn(t);Ze(r,`The onBeforeRoute() hook ${e.hookFilePath}`),r=await F(()=>r,e);const n=`The onBeforeRoute() hook defined by ${e.hookFilePath}`;if(g(r==null||Hn(r,["pageContext"])&&y(r,"pageContext"),`${n} should return ${_.cyan("null")}, ${_.cyan("undefined")}, or a plain JavaScript object ${_.cyan("{ pageContext: { /* ... */ } }")}`),r==null)return null;if(g(y(r,"pageContext","object"),`${n} returned ${_.cyan("{ pageContext }")} but pageContext should be a plain JavaScript object.`),y(r.pageContext,"_pageId")&&!y(r.pageContext,"_pageId","null")){const l=`${n} returned ${_.cyan("{ pageContext: { _pageId } }")} but ${_.cyan("_pageId")} should be`;g(y(r.pageContext,"_pageId","string"),`${l} a string or null`),g(t._allPageIds.includes(r.pageContext._pageId),`${l} ${Dn(t._allPageIds.map(i=>_.cyan(i)),"or")}`)}y(r.pageContext,"routeParams")&&et(r.pageContext,`${n} returned ${_.cyan("{ pageContext: { routeParams } }")} but routeParams should`);const o=l=>`${n} returned ${_.cyan(`{ pageContext: { ${l} } }`)} which is deprecated. Return ${_.cyan("{ pageContext: { urlLogical } }")} instead.`;y(r.pageContext,"url")&&(x(!1,o("url"),{onlyOnce:!0}),r.pageContext.urlLogical=r.pageContext.url,delete r.pageContext.url),y(r.pageContext,"urlOriginal")&&(x(!1,o("urlOriginal"),{onlyOnce:!0}),r.pageContext.urlLogical=r.pageContext.urlOriginal,delete r.pageContext.urlOriginal),y(r.pageContext,"urlLogical")&&wt(r.pageContext.urlLogical,`${n} returned ${_.cyan("{ pageContext: { urlLogical } }")} but ${_.cyan("urlLogical")}`),We(r.pageContext,{hookFilePath:e.hookFilePath,hookName:"onBeforeRoute"});const s={};return m(s,r.pageContext),s}var M;function xe(...e){var t;M||(M=(t=globalThis.__brillout_debug_createDebugger)==null?void 0:t.call(globalThis,"vike:routing")),M&&M(...e)}q()&&D();async function ut(e){xe("Pages routes:",e._pageRoutes),qe(e);const t={},r=await Io(e);if(r){if(r._routingProvidedByOnBeforeRouteHook)return a(r._pageId),r;m(t,r)}const n={};m(n,e),m(n,r);const o=n._allPageIds;a(o.length>=0),g(n._pageFilesAll.length>0||n._pageConfigs.length>0,"No *.page.js file found. You must create at least one *.page.js file."),g(o.length>0,"You must create at least one *.page.js file that isn't _default.page.*");const{urlPathname:s}=n;a(s.startsWith("/"));const l=[];await Promise.all(n._pageRoutes.map(async c=>{const{pageId:f,routeType:v}=c;if(c.routeType==="FILESYSTEM"){const{routeString:d}=c,u=oe(d,s);if(u){const{routeParams:b}=u;l.push({pageId:f,routeParams:b,routeString:d,routeType:v})}return}if(c.routeType==="STRING"){const{routeString:d}=c,u=oe(d,s);if(u){const{routeParams:b}=u;a(v==="STRING"),l.push({pageId:f,routeString:d,routeParams:b,routeType:v})}return}if(c.routeType==="FUNCTION"){const{routeFunction:d,routeDefinedAt:u}=c,b=await ao(d,n,u);if(b){const{routeParams:T,precedence:V}=b;l.push({pageId:f,precedence:V,routeParams:T,routeType:v})}return}a(!1)})),Fo(l);const i=l[0];if(xe(`Route matches for URL ${_.cyan(s)} (in precedence order):`,l),m(t,{_debugRouteMatches:l}),!i)return m(t,{_pageId:null,routeParams:{}}),t;{const{routeParams:c}=i;a(C(c)),m(t,{_pageId:i.pageId,routeParams:i.routeParams})}return t}D();const Oe=j("prefetch.ts",{linkPrefetchHandlerAdded:new Map});async function Ho(e,t){try{await G(e,t)}catch(r){if(le(r))se(r,!0);else throw r}}function Bo(e){Oo(e.urlPathname),[...document.getElementsByTagName("A")].forEach(r=>{if(Oe.linkPrefetchHandlerAdded.has(r))return;Oe.linkPrefetchHandlerAdded.set(r,!0);const n=r.getAttribute("href");if(nt(r)||(a(n),xo(n)))return;const{prefetchStaticAssets:o}=vo(e,r);if(o&&(o==="hover"&&(r.addEventListener("mouseover",()=>{te(n)}),r.addEventListener("touchstart",()=>{te(n)},{passive:!0})),o==="viewport")){const s=new IntersectionObserver(l=>{l.forEach(i=>{i.isIntersecting&&(te(n),s.disconnect())})});s.observe(r)}})}async function te(e){const t=await rt(e);let r;try{r=await ut(t)}catch{return}r!=null&&r._pageId&&await it(r._pageId,t)&&await Ho(r._pageId,t)}function ct(e){if(e==="preserve-scroll")return;let t;if(e==="scroll-to-top-or-hash"){const r=Vo();if(r&&r!=="top"){const n=document.getElementById(r)||document.getElementsByName(r)[0];if(n){n.scrollIntoView();return}}t={x:0,y:0}}else a("x"in e&&"y"in e),t=e;Do(t)}function Do(e){const t=()=>window.scrollTo(e.x,e.y),r=()=>window.scrollX===e.x&&window.scrollY===e.y;r()||(t(),!r()&&requestAnimationFrame(()=>{t(),!r()&&setTimeout(async()=>{if(t(),r())return;const n=new Date().getTime();for(;;)if(await Sn(10),t(),r()||new Date().getTime()-n>100)return},0)}))}function Vo(){let{hash:e}=window.location;return e===""?null:(a(e.startsWith("#")),e=e.slice(1),e)}function zo(){window.addEventListener("scroll",xn(be,Math.ceil(1e3/3)),{passive:!0}),He(be)}const k=j("onBrowserHistoryNavigation.ts",{previousState:Y()});function Wo(){window.addEventListener("popstate",e=>{const t=Y(),r=t.historyState.scrollPosition||"scroll-to-top-or-hash",n=t.historyState.triggedBy==="user",o=t.urlWithoutHash===k.previousState.urlWithoutHash,s=!t.historyState.timestamp||!k.previousState.historyState.timestamp?null:t.historyState.timestamp<k.previousState.historyState.timestamp;k.previousState=t,o&&!n?window.history.state===null?(Be(),k.previousState=Y()):ct(r):B({scrollTarget:r,isBackwardNavigation:s,isUserLandPushStateNavigation:n})})}function Y(){return{urlWithoutHash:ue({withoutHash:!0}),historyState:ce()}}function Mo(){k.previousState=Y()}const dt=j("scrollRestoration.ts",{});function Uo(){Re(),He(Re),On(()=>dt.initialRenderIsDone&&pe())}function Go(){dt.initialRenderIsDone=!0}function pe(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual")}function Re(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="auto")}const P=j("renderPageClientSide.ts",{renderCounter:0});async function B(e){var he;const{scrollTarget:t,urlOriginal:r=ue(),overwriteLastHistoryEntry:n=!1,isBackwardNavigation:o,pageContextsFromRewrite:s=[],redirectCount:l=0,isUserLandPushStateNavigation:i,isClientSideNavigation:c=!0}=e,{abortRender:f,setHydrationCanBeAborted:v,isFirstRender:d}=Jo();if(a(c===!d),Yn(s.length,l),P.clientRoutingIsDisabled){K(r);return}const u=await rt(r);if(f())return;m(u,{isBackwardNavigation:o,isClientSideNavigation:c});{const p=Gn(s);m(u,p)}let b={};const T=p=>{a(p),a(!("err"in b)),a(!("errorWhileRendering"in u)),b.err=p,u.errorWhileRendering=p};if(!d){try{b={pageContextFromRoute:await ut(u)}}catch(p){T(p)}if(f())return;if(b.pageContextFromRoute){const{pageContextFromRoute:p}=b;m(u,p);let S;if(!p._pageId)S=!1;else if(S=await it(p._pageId,u),f())return;if(!S){K(r);return}const w=p._pageId&&((he=P.previousPageContext)==null?void 0:he._pageId)&&p._pageId===P.previousPageContext._pageId;if(i&&w)return}}const V=!d;if(V&&!P.isTransitioning){if(P.onPageTransitionStart){const p=P.onPageTransitionStart,{hookFn:S}=p;await F(()=>S(u),p)}if(P.isTransitioning=!0,f())return}if(d){a(!b.pageContextFromRoute),a(!b.err);try{b.pageContextFromHooks=await Jn(u)}catch(p){T(p)}if(f())return}else if(!b.err){const{pageContextFromRoute:p}=b;a(p),a(p._pageId),a(y(p,"_pageId","string")),m(u,p);try{b.pageContextFromHooks=await Qn(u)}catch(S){T(S)}if(f())return}if("err"in b){const{err:p}=b;if(ve(p)||console.error(p),we(p,u,d))return;if(ve(p)){const S=p;Un(p,u._isProduction,u);const w=S._pageContextAbort;if(w._urlRewrite){await B({...e,scrollTarget:"scroll-to-top-or-hash",pageContextsFromRewrite:[...s,w]});return}if(w._urlRedirect){const Q=w._urlRedirect.url;if(Q.startsWith("http")){window.location.href=Q;return}else await B({...e,scrollTarget:"scroll-to-top-or-hash",urlOriginal:Q,overwriteLastHistoryEntry:!1,isBackwardNavigation:!1,redirectCount:l+1});return}a(w.abortStatusCode),m(u,w),w.abortStatusCode===404&&m(u,{is404:!0})}else m(u,{is404:!1});try{b.pageContextFromHooks=await qn(u)}catch(S){if(we(S,u,d)||(d||setTimeout(()=>{window.location.pathname=r},0),Pn(p,S)))return;throw S}if(f())return}const{pageContextFromHooks:_e}=b;a(_e),m(u,_e),X(u,"onPageTransitionStart");const ft=L(u,"onPageTransitionStart");if(P.onPageTransitionStart=ft,u.exports.hydrationCanBeAborted?v():x(!vn(),"You seem to be using React; we recommend setting hydrationCanBeAborted to true, see https://vike.dev/hydrationCanBeAborted",{onlyOnce:!0}),!f()&&!(P.renderPromise&&(await P.renderPromise,a(P.renderPromise===void 0),f()))){if(Ko(r,n),P.previousPageContext=u,a(P.renderPromise===void 0),P.renderPromise=(async()=>{await Et(u,!0),Bo(u),P.renderPromise=void 0})(),await P.renderPromise,a(P.renderPromise===void 0),d){X(u,"onHydrationEnd");const p=L(u,"onHydrationEnd");if(p){const{hookFn:S}=p;if(await F(()=>S(u),p),f(!0))return}}if(!f(!0)){if(V){X(u,"onPageTransitionEnd");const p=L(u,"onPageTransitionEnd");if(p){const{hookFn:S}=p;if(await F(()=>S(u),p),f(!0))return}P.isTransitioning=void 0}ct(t),pe(),Go()}}}function Ko(e,t){ue()!==e&&(pe(),wn(e,t),Mo())}function we(e,t,r){return!!(to(e)||Yo(e,t,r))}function Yo(e,t,r){if(!le(e))return!1;if(r)throw se(e,!1),e;return se(e,!0),K(t.urlOriginal),!0}function se(e,t){a(le(e)),P.clientRoutingIsDisabled=!0,t&&console.log(e),ae(!1,["Failed to fetch static asset.","This usually happens when a new frontend is deployed.","Falling back to Server Routing.","(The next page navigation will use Server Routing instead of Client Routing.)"].filter(Boolean).join(" "),{onlyOnce:!0})}function Jo(){const e=++P.renderCounter;a(e>=1);let t=!1;return{abortRender:o=>!o&&e===1&&!t?!1:e!==P.renderCounter,setHydrationCanBeAborted:()=>{t=!0},isFirstRender:e===1}}function Ee(){return P.renderCounter}function qo(){document.addEventListener("click",Qo)}function Qo(e){if(!Xo(e))return;const t=Zo(e.target);if(!t)return;const r=t.getAttribute("href");if(nt(t))return;a(r),e.preventDefault();const o=![null,"false"].includes(t.getAttribute("keep-scroll-position"))?"preserve-scroll":"scroll-to-top-or-hash";B({scrollTarget:o,urlOriginal:r,isBackwardNavigation:!1})}function Xo(e){return e.button===0&&!e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey}function Zo(e){for(;e.tagName!=="A";){const{parentNode:t}=e;if(!t)return null;e=t}return e}function es(){Uo(),Be(),zo(),Cn(),a(Ee()===0),B({scrollTarget:"preserve-scroll",isBackwardNavigation:null,isClientSideNavigation:!1}),a(Ee()===1),qo(),Wo()}D();const ts=!0;Ct(ts);es();
