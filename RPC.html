<!DOCTYPE html>
    <html>
      <head>
        <link rel="stylesheet" type="text/css" href="/assets/static/style-5b2d2e15.5QBHycto.css">
        <link rel="stylesheet" type="text/css" href="/assets/static/style-18dd10c2.C9gyJYuY.css">
        <link rel="stylesheet" type="text/css" href="/assets/static/style-9ded85f9.CjIy8Lid.css">
        <link rel="stylesheet" type="text/css" href="/assets/static/style-9f546cf2.CpP29ENp.css">
        <link rel="stylesheet" type="text/css" href="/assets/static/style-9272d1ab.C11RF7pK.css">
        <link rel="preload" href="/assets/static/Inter-Var.dulBMp8D.ttf" as="font" type="font/ttf" crossorigin>
        <meta charset="UTF-8" />
        <link rel="icon" href="data:image/svg+xml,%3csvg%20width=&#039;47.02&#039;%20height=&#039;47.02&#039;%20version=&#039;1.1&#039;%20viewBox=&#039;0%200%2047.02%2047.02&#039;%20xmlns=&#039;http://www.w3.org/2000/svg&#039;%3e%3ccircle%20cx=&#039;23.51&#039;%20cy=&#039;23.51&#039;%20r=&#039;21.95&#039;%20fill=&#039;%23f7e018&#039;%20stroke=&#039;%2331343d&#039;%20stroke-linejoin=&#039;round&#039;%20stroke-width=&#039;3.12&#039;%20style=&#039;paint-order:normal&#039;/%3e%3cg%20transform=&#039;matrix(.95503%200%200%20.95503%20.34405%201.0117)&#039;%20fill=&#039;%2331343d&#039;%20shape-rendering=&#039;auto&#039;%3e%3cpath%20d=&#039;m21.804%2013.913%206.4333%209.6458-6.4333%209.6441h5.8824l3.493-5.2352%203.4913%205.2352h5.8824l-12.867-19.29z&#039;%20color=&#039;%23000000&#039;%20color-rendering=&#039;auto&#039;%20dominant-baseline=&#039;auto&#039;%20image-rendering=&#039;auto&#039;%20solid-color=&#039;%23000000&#039;%20style=&#039;font-feature-settings:normal;font-variant-alternates:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal;font-variant-position:normal;isolation:auto;mix-blend-mode:normal;shape-padding:0;text-decoration-color:%23000000;text-decoration-line:none;text-decoration-style:solid;text-indent:0;text-orientation:mixed;text-transform:none;white-space:normal&#039;/%3e%3cpath%20d=&#039;m14.882%2013.913%206.4333%209.6458-6.4333%209.6441h5.8824c2.0855-3.2911%204.0452-6.2959%206.2221-9.9618l-6.2221-9.3281z&#039;%20color=&#039;%23000000&#039;%20color-rendering=&#039;auto&#039;%20dominant-baseline=&#039;auto&#039;%20fill-opacity=&#039;.57315&#039;%20image-rendering=&#039;auto&#039;%20solid-color=&#039;%23000000&#039;%20style=&#039;font-feature-settings:normal;font-variant-alternates:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal;font-variant-position:normal;isolation:auto;mix-blend-mode:normal;shape-padding:0;text-decoration-color:%23000000;text-decoration-line:none;text-decoration-style:solid;text-indent:0;text-orientation:mixed;text-transform:none;white-space:normal&#039;/%3e%3cpath%20d=&#039;m7.9604%2013.913%206.4333%209.6458-6.4333%209.6441h5.8824c2.0855-3.2911%204.0452-6.2959%206.2221-9.9618l-6.2221-9.3281z&#039;%20color=&#039;%23000000&#039;%20color-rendering=&#039;auto&#039;%20dominant-baseline=&#039;auto&#039;%20fill-opacity=&#039;.27655&#039;%20image-rendering=&#039;auto&#039;%20solid-color=&#039;%23000000&#039;%20style=&#039;font-feature-settings:normal;font-variant-alternates:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal;font-variant-position:normal;isolation:auto;mix-blend-mode:normal;shape-padding:0;text-decoration-color:%23000000;text-decoration-line:none;text-decoration-style:solid;text-indent:0;text-orientation:mixed;text-transform:none;white-space:normal&#039;/%3e%3c/g%3e%3c/svg%3e" />
        <title>RPC | Telefunc</title>
        
        <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no" />
        
        
      </head>
      <body>
        <div id="page-view"><div id="page-layout" class="doc-page"><div id="navigation-wrapper"><div id="navigation-container"><div id="navigation-header" style="display:flex;flex-direction:column;align-items:center;margin-bottom:-5px"><a id="navigation-header-logo" style="display:flex;align-items:center;color:inherit;justify-content:left;text-decoration:none;padding-top:12px;padding-bottom:7px" href="/"><img src="data:image/svg+xml,%3csvg%20width=&#x27;47.02&#x27;%20height=&#x27;47.02&#x27;%20version=&#x27;1.1&#x27;%20viewBox=&#x27;0%200%2047.02%2047.02&#x27;%20xmlns=&#x27;http://www.w3.org/2000/svg&#x27;%3e%3ccircle%20cx=&#x27;23.51&#x27;%20cy=&#x27;23.51&#x27;%20r=&#x27;21.95&#x27;%20fill=&#x27;%23f7e018&#x27;%20stroke=&#x27;%2331343d&#x27;%20stroke-linejoin=&#x27;round&#x27;%20stroke-width=&#x27;3.12&#x27;%20style=&#x27;paint-order:normal&#x27;/%3e%3cg%20transform=&#x27;matrix(.95503%200%200%20.95503%20.34405%201.0117)&#x27;%20fill=&#x27;%2331343d&#x27;%20shape-rendering=&#x27;auto&#x27;%3e%3cpath%20d=&#x27;m21.804%2013.913%206.4333%209.6458-6.4333%209.6441h5.8824l3.493-5.2352%203.4913%205.2352h5.8824l-12.867-19.29z&#x27;%20color=&#x27;%23000000&#x27;%20color-rendering=&#x27;auto&#x27;%20dominant-baseline=&#x27;auto&#x27;%20image-rendering=&#x27;auto&#x27;%20solid-color=&#x27;%23000000&#x27;%20style=&#x27;font-feature-settings:normal;font-variant-alternates:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal;font-variant-position:normal;isolation:auto;mix-blend-mode:normal;shape-padding:0;text-decoration-color:%23000000;text-decoration-line:none;text-decoration-style:solid;text-indent:0;text-orientation:mixed;text-transform:none;white-space:normal&#x27;/%3e%3cpath%20d=&#x27;m14.882%2013.913%206.4333%209.6458-6.4333%209.6441h5.8824c2.0855-3.2911%204.0452-6.2959%206.2221-9.9618l-6.2221-9.3281z&#x27;%20color=&#x27;%23000000&#x27;%20color-rendering=&#x27;auto&#x27;%20dominant-baseline=&#x27;auto&#x27;%20fill-opacity=&#x27;.57315&#x27;%20image-rendering=&#x27;auto&#x27;%20solid-color=&#x27;%23000000&#x27;%20style=&#x27;font-feature-settings:normal;font-variant-alternates:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal;font-variant-position:normal;isolation:auto;mix-blend-mode:normal;shape-padding:0;text-decoration-color:%23000000;text-decoration-line:none;text-decoration-style:solid;text-indent:0;text-orientation:mixed;text-transform:none;white-space:normal&#x27;/%3e%3cpath%20d=&#x27;m7.9604%2013.913%206.4333%209.6458-6.4333%209.6441h5.8824c2.0855-3.2911%204.0452-6.2959%206.2221-9.9618l-6.2221-9.3281z&#x27;%20color=&#x27;%23000000&#x27;%20color-rendering=&#x27;auto&#x27;%20dominant-baseline=&#x27;auto&#x27;%20fill-opacity=&#x27;.27655&#x27;%20image-rendering=&#x27;auto&#x27;%20solid-color=&#x27;%23000000&#x27;%20style=&#x27;font-feature-settings:normal;font-variant-alternates:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal;font-variant-position:normal;isolation:auto;mix-blend-mode:normal;shape-padding:0;text-decoration-color:%23000000;text-decoration-line:none;text-decoration-style:solid;text-indent:0;text-orientation:mixed;text-transform:none;white-space:normal&#x27;/%3e%3c/g%3e%3c/svg%3e" height="55" width="55"/><span style="font-size:2.55em;margin-left:7px;font-weight:600">Telefunc</span></a><div style="display:flex;align-items:center;padding-top:0;justify-content:left"><a class="colorize-on-hover decolorize-4" href="https://github.com/brillout/telefunc" style="padding:3px;display:inline-block;line-height:0"><img src="/assets/static/github.DMhKVcme.svg" height="20"/></a><a class="colorize-on-hover decolorize-7" href="https://twitter.com/brillout" style="padding:3px;display:inline-block;line-height:0"><img src="data:image/svg+xml,%3c?xml%20version=&#x27;1.0&#x27;%20encoding=&#x27;utf-8&#x27;?%3e%3c!--%20Generator:%20Adobe%20Illustrator%2024.2.0,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%206.00%20Build%200)%20--%3e%3csvg%20version=&#x27;1.1&#x27;%20id=&#x27;Logo&#x27;%20xmlns=&#x27;http://www.w3.org/2000/svg&#x27;%20xmlns:xlink=&#x27;http://www.w3.org/1999/xlink&#x27;%20x=&#x27;0px&#x27;%20y=&#x27;0px&#x27;%20viewBox=&#x27;0%200%20248%20204&#x27;%20style=&#x27;enable-background:new%200%200%20248%20204;&#x27;%20xml:space=&#x27;preserve&#x27;%3e%3cstyle%20type=&#x27;text/css&#x27;%3e%20.st0{fill:%231D9BF0;}%20%3c/style%3e%3cg%20id=&#x27;Logo_1_&#x27;%3e%3cpath%20id=&#x27;white_background&#x27;%20class=&#x27;st0&#x27;%20d=&#x27;M221.95,51.29c0.15,2.17,0.15,4.34,0.15,6.53c0,66.73-50.8,143.69-143.69,143.69v-0.04%20C50.97,201.51,24.1,193.65,1,178.83c3.99,0.48,8,0.72,12.02,0.73c22.74,0.02,44.83-7.61,62.72-21.66%20c-21.61-0.41-40.56-14.5-47.18-35.07c7.57,1.46,15.37,1.16,22.8-0.87C27.8,117.2,10.85,96.5,10.85,72.46c0-0.22,0-0.43,0-0.64%20c7.02,3.91,14.88,6.08,22.92,6.32C11.58,63.31,4.74,33.79,18.14,10.71c25.64,31.55,63.47,50.73,104.08,52.76%20c-4.07-17.54,1.49-35.92,14.61-48.25c20.34-19.12,52.33-18.14,71.45,2.19c11.31-2.23,22.15-6.38,32.07-12.26%20c-3.77,11.69-11.66,21.62-22.2,27.93c10.01-1.18,19.79-3.86,29-7.95C240.37,35.29,231.83,44.14,221.95,51.29z&#x27;/%3e%3c/g%3e%3c/svg%3e" height="20"/></a><div class="decolorize-6 colorize-on-hover" id="docsearch-desktop"></div><a href="https://github.com/brillout/telefunc/blob/main/CHANGELOG.md" class="button colorize-on-hover" style="display:flex;align-items:center;padding:1px 7px;margin-left:2px;font-size:0.97em;color:inherit"><span id="version-number" class="decolorize-7">v<!-- -->0.1.79</span><img class="decolorize-6" src="data:image/svg+xml,%3c?xml%20version=&#x27;1.0&#x27;%20encoding=&#x27;UTF-8&#x27;?%3e%3csvg%20width=&#x27;17.284&#x27;%20height=&#x27;17.284&#x27;%20version=&#x27;1.1&#x27;%20viewBox=&#x27;0%200%2017.284%2017.284&#x27;%20xml:space=&#x27;preserve&#x27;%20xmlns=&#x27;http://www.w3.org/2000/svg&#x27;%20xmlns:cc=&#x27;http://creativecommons.org/ns%23&#x27;%20xmlns:dc=&#x27;http://purl.org/dc/elements/1.1/&#x27;%20xmlns:rdf=&#x27;http://www.w3.org/1999/02/22-rdf-syntax-ns%23&#x27;%3e%3cdefs%3e%3cclipPath%20id=&#x27;clipPath1075&#x27;%3e%3cpath%20d=&#x27;m789.58%20466.67h62.5v62.5h-62.5z&#x27;%20clip-rule=&#x27;evenodd&#x27;/%3e%3c/clipPath%3e%3c/defs%3e%3cg%20fill=&#x27;%23323d48&#x27;%20transform=&#x27;matrix(.33185%200%200%20.33185%20-263.75%20-156.59)&#x27;%20clip-path=&#x27;url(%23clipPath1075)&#x27;%3e%3cg%20transform=&#x27;matrix(2.6042,0,0,2.6042,789.58,466.67)&#x27;%3e%3cpath%20d=&#x27;m12%202c5.523%200%2010%204.477%2010%2010s-4.477%2010-10%2010-10-4.477-10-10h2c0%204.418%203.582%208%208%208s8-3.582%208-8-3.582-8-8-8c-2.464%200-4.668%201.114-6.135%202.865l2.135%202.135h-6v-6l2.447%202.446c1.833-2.11%204.537-3.446%207.553-3.446zm1%205v4.585l3.243%203.243-1.415%201.415-3.828-3.83v-5.413z&#x27;/%3e%3c/g%3e%3c/g%3e%3c/svg%3e" height="16" style="margin-left:5px"/></a></div></div><div id="navigation-content-main" class="navigation-content"><div class="nav-column" style="position:relative"><div class="nav-items-level-1-group"><a class="nav-item nav-item-level-1 nav-item-first-of-its-kind nav-item-last-of-its-kind"><span style="font-size:1.4em"><img src="/assets/static/compass.DjvOaN2E.svg" style="vertical-align:text-top;font-size:1em;width:1.4em"/> <span style="font-size:1rem">Overview</span></span></a><a class="nav-item nav-item-level-2 nav-item-first-of-its-kind" href="/">Introduction</a><a class="nav-item nav-item-level-2  is-active  is-active-first nav-item-last-of-its-kind" href="/RPC">RPC</a><a class="nav-item nav-item-level-3  is-active nav-item-first-of-its-kind" href="#basic-example">Basic example</a><a class="nav-item nav-item-level-3  is-active" href="#orm-sql">ORM &amp; SQL</a><a class="nav-item nav-item-level-3  is-active" href="#how-it-works">How it works</a><a class="nav-item nav-item-level-3  is-active" href="#telefunctions-need-protection">Telefunctions need protection</a><a class="nav-item nav-item-level-3  is-active" href="#throw-abort"><code>throw Abort()</code></a><a class="nav-item nav-item-level-3  is-active" href="#shield"><code>shield()</code></a><a class="nav-item nav-item-level-3  is-active  is-active-last nav-item-last-of-its-kind" href="#random-telefunction-calls">Random telefunction calls</a></div><div class="nav-items-level-1-group"><a class="nav-item nav-item-level-1 nav-item-first-of-its-kind nav-item-last-of-its-kind"><span style="font-size:1.4em">🌱<!-- --> <span style="font-size:1rem">Get started</span></span></a><a class="nav-item nav-item-level-2 nav-item-first-of-its-kind" href="/next">Next.js</a><a class="nav-item nav-item-level-2" href="/svelte-kit">SvelteKit</a><a class="nav-item nav-item-level-2" href="/vite">Vite</a><a class="nav-item nav-item-level-2" href="/vike">Vike</a><a class="nav-item nav-item-level-2" href="/nuxt">Nuxt</a><a class="nav-item nav-item-level-2" href="/react-native">React Native</a><a class="nav-item nav-item-level-2" href="/remix">Remix</a><a class="nav-item nav-item-level-2 nav-item-last-of-its-kind" href="/install">Other</a></div><div class="nav-items-level-1-group"><a class="nav-item nav-item-level-1 nav-item-first-of-its-kind nav-item-last-of-its-kind"><span style="font-size:1.4em">📚<!-- --> <span style="font-size:1rem">Guides</span></span></a><a class="nav-item nav-item-level-2 nav-item-first-of-its-kind" href="/permissions">Permissions</a><a class="nav-item nav-item-level-2" href="/error-handling">Error handling</a><a class="nav-item nav-item-level-2" href="/form-validation">Form validation</a><a class="nav-item nav-item-level-2" href="/event-based">Event-based telefunctions</a><a class="nav-item nav-item-level-2 nav-item-last-of-its-kind" href="/file-upload">File upload</a></div><div class="nav-items-level-1-group"><a class="nav-item nav-item-level-1 nav-item-first-of-its-kind nav-item-last-of-its-kind"><span style="font-size:1.4em">⚙<!-- --> <span style="font-size:1rem">API</span></span></a><a class="nav-item nav-item-level-4 nav-item-first-of-its-kind nav-item-last-of-its-kind">Context</a><a class="nav-item nav-item-level-2 nav-item-first-of-its-kind nav-item-last-of-its-kind" href="/getContext"><code>getContext()</code></a><a class="nav-item nav-item-level-4 nav-item-first-of-its-kind nav-item-last-of-its-kind">Protection</a><a class="nav-item nav-item-level-2 nav-item-first-of-its-kind" href="/Abort"><code>throw Abort()</code></a><a class="nav-item nav-item-level-2 nav-item-last-of-its-kind" href="/shield"><code>shield()</code></a><a class="nav-item nav-item-level-4 nav-item-first-of-its-kind nav-item-last-of-its-kind">Server Middleware</a><a class="nav-item nav-item-level-2 nav-item-first-of-its-kind nav-item-last-of-its-kind" href="/telefunc"><code>telefunc()</code></a><a class="nav-item nav-item-level-4 nav-item-first-of-its-kind nav-item-last-of-its-kind">Error Handling</a><a class="nav-item nav-item-level-2 nav-item-first-of-its-kind" href="/onBug"><code>onBug()</code></a><a class="nav-item nav-item-level-2 nav-item-last-of-its-kind" href="/onAbort"><code>onAbort()</code></a><a class="nav-item nav-item-level-4 nav-item-first-of-its-kind nav-item-last-of-its-kind">Config</a><a class="nav-item nav-item-level-2 nav-item-first-of-its-kind" href="/telefuncUrl"><code>telefuncUrl</code></a><a class="nav-item nav-item-level-2" href="/disableNamingConvention"><code>disableNamingConvention</code></a><a class="nav-item nav-item-level-2" href="/httpHeaders"><code>httpHeaders</code></a><a class="nav-item nav-item-level-2" href="/telefuncFiles"><code>telefuncFiles</code></a><a class="nav-item nav-item-level-2" href="/root"><code>root</code></a><a class="nav-item nav-item-level-2 nav-item-last-of-its-kind" href="/shield-config"><code>shield</code></a><a class="nav-item nav-item-level-4 nav-item-first-of-its-kind nav-item-last-of-its-kind">Plugins</a><a class="nav-item nav-item-level-2 nav-item-first-of-its-kind" href="/vite-plugin">Vite Plugin</a><a class="nav-item nav-item-level-2" href="/webpack-plugin">Webpack Plugin</a><a class="nav-item nav-item-level-2 nav-item-last-of-its-kind" href="/babel-plugin">Babel Plugin</a></div></div></div><a id="navigation-fullscreen-close" style="position:absolute;top:11px;right:11px;z-index:10" aria-label="Press &lt;Esc&gt;" data-balloon-pos="left"><img src="data:image/svg+xml,%3csvg%20width=&#x27;48.855&#x27;%20height=&#x27;48.855&#x27;%20version=&#x27;1.1&#x27;%20viewBox=&#x27;0%200%2022.901%2022.901&#x27;%20xmlns=&#x27;http://www.w3.org/2000/svg&#x27;%3e%3ccircle%20cx=&#x27;11.45&#x27;%20cy=&#x27;11.45&#x27;%20r=&#x27;10.607&#x27;%20fill=&#x27;%23fff&#x27;%20stroke=&#x27;%23666&#x27;%20stroke-dashoffset=&#x27;251.44&#x27;%20stroke-linecap=&#x27;round&#x27;%20stroke-linejoin=&#x27;round&#x27;%20stroke-width=&#x27;1.6875&#x27;%20style=&#x27;paint-order:normal&#x27;/%3e%3cpath%20d=&#x27;m7.5904%206.2204%203.86%203.86%203.84-3.84a0.92%200.92%200%200%201%200.66-0.29%201%201%200%200%201%201%201%200.9%200.9%200%200%201-0.27%200.66l-3.89%203.84%203.89%203.89a0.9%200.9%200%200%201%200.27%200.61%201%201%200%200%201-1%201%200.92%200.92%200%200%201-0.69-0.27l-3.81-3.86-3.85%203.85a0.92%200.92%200%200%201-0.65%200.28%201%201%200%200%201-1-1%200.9%200.9%200%200%201%200.27-0.66l3.89-3.84-3.89-3.89a0.9%200.9%200%200%201-0.27-0.61%201%201%200%200%201%201-1c0.24%203e-3%200.47%200.1%200.64%200.27z&#x27;%20fill=&#x27;%23666&#x27;%20stroke=&#x27;%23666&#x27;%20stroke-width=&#x27;.11719&#x27;/%3e%3c/svg%3e" height="50" width="50" style="display:block"/></a></div></div><a id="navigation-fullscreen-button"><div style="position:fixed;cursor:pointer;height:100vh;width:20px;overflow:hidden"><div></div></div><div style="position:fixed;height:100vh;width:20px" aria-label="Press &lt;Esc&gt;" data-balloon-pos="right"></div></a><div id="page-wrapper"><div id="page-container"><div id="mobile-header" style="height:var(--mobile-header-height);width:100%;position:relative"><div style="position:fixed;display:flex;align-items:center;background:white;z-index:99;top:0;left:0;height:var(--mobile-header-height);width:100%;border-bottom:1px solid #ddd"><div style="padding:20px;line-height:0;cursor:pointer" id="mobile-show-navigation-toggle"><svg style="width:20px" class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/" style="color:inherit;display:flex;align-items:center;justify-content:left;text-decoration:none"><img src="data:image/svg+xml,%3csvg%20width=&#x27;47.02&#x27;%20height=&#x27;47.02&#x27;%20version=&#x27;1.1&#x27;%20viewBox=&#x27;0%200%2047.02%2047.02&#x27;%20xmlns=&#x27;http://www.w3.org/2000/svg&#x27;%3e%3ccircle%20cx=&#x27;23.51&#x27;%20cy=&#x27;23.51&#x27;%20r=&#x27;21.95&#x27;%20fill=&#x27;%23f7e018&#x27;%20stroke=&#x27;%2331343d&#x27;%20stroke-linejoin=&#x27;round&#x27;%20stroke-width=&#x27;3.12&#x27;%20style=&#x27;paint-order:normal&#x27;/%3e%3cg%20transform=&#x27;matrix(.95503%200%200%20.95503%20.34405%201.0117)&#x27;%20fill=&#x27;%2331343d&#x27;%20shape-rendering=&#x27;auto&#x27;%3e%3cpath%20d=&#x27;m21.804%2013.913%206.4333%209.6458-6.4333%209.6441h5.8824l3.493-5.2352%203.4913%205.2352h5.8824l-12.867-19.29z&#x27;%20color=&#x27;%23000000&#x27;%20color-rendering=&#x27;auto&#x27;%20dominant-baseline=&#x27;auto&#x27;%20image-rendering=&#x27;auto&#x27;%20solid-color=&#x27;%23000000&#x27;%20style=&#x27;font-feature-settings:normal;font-variant-alternates:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal;font-variant-position:normal;isolation:auto;mix-blend-mode:normal;shape-padding:0;text-decoration-color:%23000000;text-decoration-line:none;text-decoration-style:solid;text-indent:0;text-orientation:mixed;text-transform:none;white-space:normal&#x27;/%3e%3cpath%20d=&#x27;m14.882%2013.913%206.4333%209.6458-6.4333%209.6441h5.8824c2.0855-3.2911%204.0452-6.2959%206.2221-9.9618l-6.2221-9.3281z&#x27;%20color=&#x27;%23000000&#x27;%20color-rendering=&#x27;auto&#x27;%20dominant-baseline=&#x27;auto&#x27;%20fill-opacity=&#x27;.57315&#x27;%20image-rendering=&#x27;auto&#x27;%20solid-color=&#x27;%23000000&#x27;%20style=&#x27;font-feature-settings:normal;font-variant-alternates:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal;font-variant-position:normal;isolation:auto;mix-blend-mode:normal;shape-padding:0;text-decoration-color:%23000000;text-decoration-line:none;text-decoration-style:solid;text-indent:0;text-orientation:mixed;text-transform:none;white-space:normal&#x27;/%3e%3cpath%20d=&#x27;m7.9604%2013.913%206.4333%209.6458-6.4333%209.6441h5.8824c2.0855-3.2911%204.0452-6.2959%206.2221-9.9618l-6.2221-9.3281z&#x27;%20color=&#x27;%23000000&#x27;%20color-rendering=&#x27;auto&#x27;%20dominant-baseline=&#x27;auto&#x27;%20fill-opacity=&#x27;.27655&#x27;%20image-rendering=&#x27;auto&#x27;%20solid-color=&#x27;%23000000&#x27;%20style=&#x27;font-feature-settings:normal;font-variant-alternates:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal;font-variant-position:normal;isolation:auto;mix-blend-mode:normal;shape-padding:0;text-decoration-color:%23000000;text-decoration-line:none;text-decoration-style:solid;text-indent:0;text-orientation:mixed;text-transform:none;white-space:normal&#x27;/%3e%3c/g%3e%3c/svg%3e" height="40" width="40"/><span style="font-size:1.55em;margin-left:6px;font-weight:600">Telefunc</span></a></div></div><div id="page-content"><h1>RPC</h1><blockquote>
<p>This page explains:</p>
<ul>
<li>What RPC is</li>
<li>How RPC (such as Telefunc) works</li>
<li>Why RPC endpoints (such as telefunctions) need protection</li>
</ul>
<p>You can skip this page if you are already familiar with RPC.</p>
</blockquote>
<h2 id="basic-example">Basic example</h2>
<p>Telefunc enables functions defined on the server-side to be called remotely from the browser-side.</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line=""><span style="color:#6A737D">// hello.telefunc.js</span></span>
<span data-line=""><span style="color:#6A737D">// Environment: server</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">export</span><span style="color:#24292E"> { hello }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#6A737D">// hello() always runs on the server-side</span></span>
<span data-line=""><span style="color:#D73A49">async</span><span style="color:#D73A49"> function</span><span style="color:#6F42C1"> hello</span><span style="color:#24292E">({ </span><span style="color:#E36209">name</span><span style="color:#24292E"> }) {</span></span>
<span data-line=""><span style="color:#D73A49">  const</span><span style="color:#005CC5"> message</span><span style="color:#D73A49"> =</span><span style="color:#032F62"> &#x27;Welcome &#x27;</span><span style="color:#D73A49"> +</span><span style="color:#24292E"> name</span></span>
<span data-line=""><span style="color:#D73A49">  return</span><span style="color:#24292E"> { message }</span></span>
<span data-line=""><span style="color:#24292E">}</span></span></code></pre></figure>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="html" data-theme="github-light"><code data-language="html" data-theme="github-light" style="display:grid"><span data-line=""><span style="color:#6A737D">&lt;!-- index.html --&gt;</span></span>
<span data-line=""><span style="color:#6A737D">&lt;!-- Environment: client --&gt;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#24292E">&lt;</span><span style="color:#22863A">html</span><span style="color:#24292E">&gt;</span></span>
<span data-line=""><span style="color:#24292E">  &lt;</span><span style="color:#22863A">body</span><span style="color:#24292E">&gt;</span></span>
<span data-line=""><span style="color:#24292E">    &lt;</span><span style="color:#22863A">script</span><span style="color:#6F42C1"> type</span><span style="color:#24292E">=</span><span style="color:#032F62">&quot;module&quot;</span><span style="color:#24292E">&gt;</span></span>
<span data-line=""><span style="color:#6A737D">      // This import doesn&#x27;t actually load the hello.telefunc.js file: Telefunc transforms</span></span>
<span data-line=""><span style="color:#6A737D">      // hello.telefunc.js into a thin HTTP client.</span></span>
<span data-line=""><span style="color:#D73A49">      import</span><span style="color:#24292E"> { hello } </span><span style="color:#D73A49">from</span><span style="color:#032F62"> &#x27;./hello.telefunc.js&#x27;</span></span>
<span data-line=""><span style="color:#6A737D">      // This thin HTTP client makes an HTTP request when the hello() function is called.</span></span>
<span data-line=""><span style="color:#D73A49">      const</span><span style="color:#24292E"> { </span><span style="color:#005CC5">message</span><span style="color:#24292E"> } </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> await</span><span style="color:#6F42C1"> hello</span><span style="color:#24292E">({ name: </span><span style="color:#032F62">&#x27;Eva&#x27;</span><span style="color:#24292E"> })</span></span>
<span data-line=""><span style="color:#24292E">      console.</span><span style="color:#6F42C1">log</span><span style="color:#24292E">(message) </span><span style="color:#6A737D">// Prints &#x27;Welcome Eva&#x27;</span></span>
<span data-line=""><span style="color:#24292E">    &lt;/</span><span style="color:#22863A">script</span><span style="color:#24292E">&gt;</span></span>
<span data-line=""><span style="color:#24292E">  &lt;/</span><span style="color:#22863A">body</span><span style="color:#24292E">&gt;</span></span>
<span data-line=""><span style="color:#24292E">&lt;/</span><span style="color:#22863A">html</span><span style="color:#24292E">&gt;</span></span></code></pre></figure>
<blockquote>
<p>We will show later <a href="#how-it-works">how it works</a>.</p>
</blockquote>
<blockquote>
<p>This practice — calling functions remotely in a seamless fashion — is known as <a href="https://en.wikipedia.org/wiki/Remote_procedure_call"><em><strong>R</strong>emote <strong>P</strong>rocedure <strong>C</strong>all (RPC)</em></a>.</p>
</blockquote>
<p>The central aspect here is that <code>hello()</code> is always executed on the server side, which enables <code>hello()</code> (and telefunctions in general) to use server-side utilities such as SQL and ORMs.</p>
<h2 id="orm-sql">ORM &amp; SQL</h2>
<p>As we have seen in the previous section, telefunctions always run on the server-side and can therefore use server utilities such as SQL and ORMs.</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line=""><span style="color:#6A737D">// TodoList.telefunc.js</span></span>
<span data-line=""><span style="color:#6A737D">// Environment: server</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">export</span><span style="color:#24292E"> { onLoad }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">async</span><span style="color:#D73A49"> function</span><span style="color:#6F42C1"> onLoad</span><span style="color:#24292E">() {</span></span>
<span data-line=""><span style="color:#6A737D">  // ORM</span></span>
<span data-line=""><span style="color:#D73A49">  const</span><span style="color:#005CC5"> todoItems</span><span style="color:#D73A49"> =</span><span style="color:#D73A49"> await</span><span style="color:#24292E"> Todo.</span><span style="color:#6F42C1">findMany</span><span style="color:#24292E">({ select: </span><span style="color:#032F62">&#x27;text&#x27;</span><span style="color:#24292E"> })</span></span>
<span data-line=""><span style="color:#6A737D">  // SQL</span></span>
<span data-line=""><span style="color:#D73A49">  const</span><span style="color:#005CC5"> todoItems</span><span style="color:#D73A49"> =</span><span style="color:#D73A49"> await</span><span style="color:#6F42C1"> execute</span><span style="color:#24292E">(</span><span style="color:#032F62">&quot;SELECT text FROM todo_items;&quot;</span><span style="color:#24292E">)</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">  return</span><span style="color:#24292E"> todoItems</span></span>
<span data-line=""><span style="color:#24292E">}</span></span></code></pre></figure>
<blockquote>
<p><code>.telefunc.js</code> files are guaranteed to be loaded only on the server-side. You can therefore save secret information, such as the database passwords, in <code>.telefunc.js</code> files.</p>
</blockquote>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="jsx" data-theme="github-light"><code data-language="jsx" data-theme="github-light" style="display:grid"><span data-line=""><span style="color:#6A737D">// TodoList.jsx</span></span>
<span data-line=""><span style="color:#6A737D">// Environment: client</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#6A737D">// This doesn&#x27;t actually load CreateTodo.telefunc.js which we&#x27;ll explain in the next section</span></span>
<span data-line=""><span style="color:#D73A49">import</span><span style="color:#24292E"> { onLoad } </span><span style="color:#D73A49">from</span><span style="color:#032F62"> &#x27;./TodoList.telefunc.js&#x27;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">async</span><span style="color:#D73A49"> function</span><span style="color:#6F42C1"> TodoList</span><span style="color:#24292E">() {</span></span>
<span data-line=""><span style="color:#6A737D">  // The frontend uses the telefunction onLoad() to retrieve data by executing a SQL/ORM query</span></span>
<span data-line=""><span style="color:#D73A49">  const</span><span style="color:#005CC5"> todoItems</span><span style="color:#D73A49"> =</span><span style="color:#D73A49"> await</span><span style="color:#6F42C1"> onLoad</span><span style="color:#24292E">()</span></span>
<span data-line=""><span style="color:#D73A49">  return</span><span style="color:#24292E"> (</span></span>
<span data-line=""><span style="color:#24292E">    &lt;</span><span style="color:#22863A">ul</span><span style="color:#24292E">&gt;{ todoItems.</span><span style="color:#6F42C1">map</span><span style="color:#24292E">(</span><span style="color:#E36209">item</span><span style="color:#D73A49"> =&gt;</span></span>
<span data-line=""><span style="color:#24292E">      &lt;</span><span style="color:#22863A">li</span><span style="color:#24292E">&gt;{ item.text }&lt;/</span><span style="color:#22863A">li</span><span style="color:#24292E">&gt;</span></span>
<span data-line=""><span style="color:#24292E">    )}&lt;/</span><span style="color:#22863A">ul</span><span style="color:#24292E">&gt;</span></span>
<span data-line=""><span style="color:#24292E">  )</span></span>
<span data-line=""><span style="color:#24292E">}</span></span></code></pre></figure>
<blockquote>
<p>We collocate and name the <code>TodoList.telefunc.js</code> file after <code>TodoList.jsx</code>, which is a practice we recommend and explain at <a href="/event-based">Guides<!-- --> &gt; <!-- -->Event-based telefunctions</a>.</p>
</blockquote>
<blockquote>
<p>While the examples here use JSX, Telefunc works with any UI framework (React, Vue, Svelte, Solid, ...).</p>
</blockquote>
<p>Telefunctions can also be used to mutate data:</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line=""><span style="color:#6A737D">// CreateTodo.telefunc.js</span></span>
<span data-line=""><span style="color:#6A737D">// Environment: server</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">export</span><span style="color:#24292E"> { onNewTodo }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">import</span><span style="color:#24292E"> { shield } </span><span style="color:#D73A49">from</span><span style="color:#032F62"> &#x27;telefunc&#x27;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#6A737D">// We&#x27;ll talk about shield() later</span></span>
<span data-line=""><span style="color:#6F42C1">shield</span><span style="color:#24292E">(onNewTodo, [shield.type.string])</span></span>
<span data-line=""><span style="color:#D73A49">async</span><span style="color:#D73A49"> function</span><span style="color:#6F42C1"> onNewTodo</span><span style="color:#24292E">(</span><span style="color:#E36209">text</span><span style="color:#24292E">) {</span></span>
<span data-line=""><span style="color:#6A737D">  // ORM</span></span>
<span data-line=""><span style="color:#D73A49">  const</span><span style="color:#005CC5"> todoItem</span><span style="color:#D73A49"> =</span><span style="color:#D73A49"> new</span><span style="color:#6F42C1"> Todo</span><span style="color:#24292E">({ text })</span></span>
<span data-line=""><span style="color:#D73A49">  await</span><span style="color:#24292E"> todoItem.</span><span style="color:#6F42C1">save</span><span style="color:#24292E">()</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#6A737D">  // SQL</span></span>
<span data-line=""><span style="color:#D73A49">  await</span><span style="color:#6F42C1"> execute</span><span style="color:#24292E">(</span></span>
<span data-line=""><span style="color:#032F62">    &quot;INSERT INTO todo_items VALUES (:text)&quot;</span><span style="color:#24292E">,</span></span>
<span data-line=""><span style="color:#24292E">    { text }</span></span>
<span data-line=""><span style="color:#24292E">  )</span></span>
<span data-line=""><span style="color:#24292E">}</span></span></code></pre></figure>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="jsx" data-theme="github-light"><code data-language="jsx" data-theme="github-light" style="display:grid"><span data-line=""><span style="color:#6A737D">// CreateTodo.jsx</span></span>
<span data-line=""><span style="color:#6A737D">// Environment: client</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">import</span><span style="color:#24292E"> { onNewTodo } </span><span style="color:#D73A49">from</span><span style="color:#032F62"> &#x27;./CreateTodo.telefunc.js&#x27;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">async</span><span style="color:#D73A49"> function</span><span style="color:#6F42C1"> onClick</span><span style="color:#24292E">(</span><span style="color:#E36209">form</span><span style="color:#24292E">) {</span></span>
<span data-line=""><span style="color:#D73A49">  const</span><span style="color:#005CC5"> text</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> form.input.value</span></span>
<span data-line=""><span style="color:#D73A49">  await</span><span style="color:#6F42C1"> onNewTodo</span><span style="color:#24292E">(text)</span></span>
<span data-line=""><span style="color:#24292E">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">function</span><span style="color:#6F42C1"> CreateTodo</span><span style="color:#24292E">() {</span></span>
<span data-line=""><span style="color:#D73A49">  return</span><span style="color:#24292E"> (</span></span>
<span data-line=""><span style="color:#24292E">    &lt;</span><span style="color:#22863A">form</span><span style="color:#24292E">&gt;</span></span>
<span data-line=""><span style="color:#24292E">      &lt;</span><span style="color:#22863A">input</span><span style="color:#6F42C1"> input</span><span style="color:#D73A49">=</span><span style="color:#032F62">&quot;text&quot;</span><span style="color:#24292E">&gt;&lt;/</span><span style="color:#22863A">input</span><span style="color:#24292E">&gt;</span></span>
<span data-line=""><span style="color:#24292E">      &lt;</span><span style="color:#22863A">button</span><span style="color:#6F42C1"> onClick</span><span style="color:#D73A49">=</span><span style="color:#24292E">{onClick}&gt;Add To-Do&lt;/</span><span style="color:#22863A">button</span><span style="color:#24292E">&gt;</span></span>
<span data-line=""><span style="color:#24292E">    &lt;/</span><span style="color:#22863A">form</span><span style="color:#24292E">&gt;</span></span>
<span data-line=""><span style="color:#24292E">  )</span></span>
<span data-line=""><span style="color:#24292E">}</span></span></code></pre></figure>
<p>RPC enables your frontend to tap directly into the full power of the server such as SQL and ORMs. For most use cases it&#x27;s simpler, more flexible, and more performant than REST and GraphQL.</p>
<blockquote>
<p>GraphQL and RESTful can be better than RPC if:</p>
<ul>
<li>you want to give third parties generic access to your data, or</li>
<li>you are a very large company with highly complex databases.</li>
</ul>
<p>See <a href="/RPC-vs-GraphQL-REST">RPC vs GraphQL/REST</a>.</p>
</blockquote>
<h2 id="how-it-works">How it works</h2>
<blockquote>
<p>Understanding the basic mechanics of Telefunc is paramount in order to proficiently use it.</p>
</blockquote>
<p>Let&#x27;s see what happens when a telefunction is called.</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line=""><span style="color:#6A737D">// hello.telefunc.js</span></span>
<span data-line=""><span style="color:#6A737D">// Environment: server</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">export</span><span style="color:#24292E"> { hello }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">async</span><span style="color:#D73A49"> function</span><span style="color:#6F42C1"> hello</span><span style="color:#24292E">({ </span><span style="color:#E36209">name</span><span style="color:#24292E"> }) {</span></span>
<span data-line=""><span style="color:#D73A49">  const</span><span style="color:#005CC5"> message</span><span style="color:#D73A49"> =</span><span style="color:#032F62"> &#x27;Welcome &#x27;</span><span style="color:#D73A49"> +</span><span style="color:#24292E"> name</span></span>
<span data-line=""><span style="color:#D73A49">  return</span><span style="color:#24292E"> { message }</span></span>
<span data-line=""><span style="color:#24292E">}</span></span></code></pre></figure>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line=""><span style="color:#6A737D">// Environment: client</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">import</span><span style="color:#24292E"> { hello } </span><span style="color:#D73A49">from</span><span style="color:#032F62"> &#x27;./hello.telefunc.js&#x27;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">const</span><span style="color:#24292E"> { </span><span style="color:#005CC5">message</span><span style="color:#24292E"> } </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> await</span><span style="color:#6F42C1"> hello</span><span style="color:#24292E">(</span><span style="color:#032F62">&#x27;Eva&#x27;</span><span style="color:#24292E">)</span></span></code></pre></figure>
<p>The <code>hello.telefunc.js</code> file is never loaded in the browser: instead Telefunc transforms <code>hello.telefunc.js</code> into the following:</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line=""><span style="color:#6A737D">// hello.telefunc.js (after Telefunc transformation)</span></span>
<span data-line=""><span style="color:#6A737D">// Environement: Browser</span></span>
<span data-line=""><span style="color:#D73A49">import</span><span style="color:#24292E"> { __internal_makeHttpRequest } </span><span style="color:#032F62">&#x27;telefunc/client&#x27;</span></span>
<span data-line=""><span style="color:#24292E">export const hello = (...args) =&gt; __internal_makeHttpRequest(</span><span style="color:#032F62">&#x27;/hello.telefunc.js:hello&#x27;</span><span style="color:#24292E">, args)</span></span></code></pre></figure>
<p>When <code>hello(&#x27;Eva&#x27;)</code> is called in the browser-side, the following happens:</p>
<ol>
<li>On the browser-side, the <code>__internal_makeHttpRequest()</code> function makes an HTTP request to the server.<!-- -->
<pre><code>POST /_telefunc HTTP/1.1
{
  &quot;path&quot;: &quot;/hello.telefunc.js:hello&quot;,
  &quot;args&quot;: [{&quot;name&quot;: &quot;Eva&quot;}]
}
</code></pre>
</li>
<li>On the server-side, the Telefunc middleware:<!-- -->
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line=""><span style="color:#6A737D">// server.js</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#6A737D">// Server (Express.js/Hono/Fastify/...)</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">import</span><span style="color:#24292E"> { telefunc } </span><span style="color:#D73A49">from</span><span style="color:#032F62"> &#x27;telefunc&#x27;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#6A737D">// Telefunc middleware</span></span>
<span data-line=""><span style="color:#24292E">app.</span><span style="color:#6F42C1">use</span><span style="color:#24292E">(</span><span style="color:#032F62">&#x27;/_telefunc&#x27;</span><span style="color:#24292E">, </span><span style="color:#D73A49">async</span><span style="color:#24292E"> (</span><span style="color:#E36209">req</span><span style="color:#24292E">, </span><span style="color:#E36209">res</span><span style="color:#24292E">) </span><span style="color:#D73A49">=&gt;</span><span style="color:#24292E"> {</span></span>
<span data-line=""><span style="color:#D73A49">  const</span><span style="color:#005CC5"> httpResponse</span><span style="color:#D73A49"> =</span><span style="color:#D73A49"> await</span><span style="color:#6F42C1"> telefunc</span><span style="color:#24292E">(req)</span></span>
<span data-line=""><span style="color:#24292E">  res.</span><span style="color:#6F42C1">send</span><span style="color:#24292E">(httpResponse.body)</span></span>
<span data-line=""><span style="color:#24292E">})</span></span></code></pre></figure>
<!-- -->Replies following HTTP response:<!-- -->
<pre><code>HTTP/1.1 200 OK
{
  &quot;return&quot;: {
    &quot;message&quot;: &quot;Welcome Eva&quot;
  }
}
</code></pre>
</li>
</ol>
<p>In other words,
the <code>hello()</code> function is always executed on the server-side
while the browser-side can remotely call it in a seamless fashion.</p>
<blockquote>
<p>You can also call telefunctions from the server-side, in which case the telefunction is directly called (without making an HTTP request).</p>
</blockquote>
<h2 id="telefunctions-need-protection">Telefunctions need protection</h2>
<p>Your telefunctions can be remotely called not only by your frontend, but by anyone.</p>
<p>For example, anyone can call the <code>hello()</code> telefunction we&#x27;ve seen in the previous section by opening a Linux terminal and make this HTTP request:</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="bash" data-theme="github-light"><code data-language="bash" data-theme="github-light" style="display:grid"><span data-line=""><span style="color:#6F42C1">curl</span><span style="color:#032F62"> https://your-website.com/_telefunc</span><span style="color:#005CC5"> --data</span><span style="color:#032F62"> &#x27;{</span></span>
<span data-line=""><span style="color:#032F62">   &quot;path&quot;: &quot;/hello.telefunc.js:hello&quot;,</span></span>
<span data-line=""><span style="color:#032F62">   &quot;args&quot;: [{&quot;name&quot;: &quot;Elisabeth&quot;}]</span></span>
<span data-line=""><span style="color:#032F62"> }&#x27;</span></span></code></pre></figure>
<p>Thus, such telefunction is problematic:</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line=""><span style="color:#6A737D">// sql.telefunc.js</span></span>
<span data-line=""><span style="color:#6A737D">// Environment: server</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#6A737D">// run() is public: it can be called by anyone</span></span>
<span data-line=""><span style="color:#D73A49">export</span><span style="color:#24292E"> { run }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">async</span><span style="color:#D73A49"> function</span><span style="color:#6F42C1"> run</span><span style="color:#24292E">(</span><span style="color:#E36209">sql</span><span style="color:#24292E">) {</span></span>
<span data-line=""><span style="color:#D73A49">  return</span><span style="color:#D73A49"> await</span><span style="color:#24292E"> database.</span><span style="color:#6F42C1">execute</span><span style="color:#24292E">(sql)</span></span>
<span data-line=""><span style="color:#24292E">}</span></span></code></pre></figure>
<p>This <code>run()</code> telefunction essentially exposes the entire database to the world as
anyone can make this HTTP request:</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="bash" data-theme="github-light"><code data-language="bash" data-theme="github-light" style="display:grid"><span data-line=""><span style="color:#6F42C1">curl</span><span style="color:#032F62"> https://your-website.com/_telefunc</span><span style="color:#005CC5"> --data</span><span style="color:#032F62"> &#x27;{</span></span>
<span data-line=""><span style="color:#032F62">    &quot;path&quot;: &quot;/run.telefunc.js:run&quot;,</span></span>
<span data-line=""><span style="color:#032F62">    &quot;args&quot;: [&quot;SELECT login, password FROM users;&quot;]</span></span>
<span data-line=""><span style="color:#032F62">  }&#x27;</span></span></code></pre></figure>
<p>Always keep in mind that your telefunctions are public and need protection.</p>
<h2 id="throw-abort"><code>throw Abort()</code></h2>
<p>As we&#x27;ve seen in the previous section,
the following telefunction isn&#x27;t safe.</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line=""><span style="color:#6A737D">// run.telefunc.js</span></span>
<span data-line=""><span style="color:#6A737D">// Environment: server</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#6A737D">// run() is public: it can be called by anyone</span></span>
<span data-line=""><span style="color:#D73A49">export</span><span style="color:#24292E"> { run }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">async</span><span style="color:#D73A49"> function</span><span style="color:#6F42C1"> run</span><span style="color:#24292E">(</span><span style="color:#E36209">sql</span><span style="color:#24292E">) {</span></span>
<span data-line=""><span style="color:#D73A49">  return</span><span style="color:#D73A49"> await</span><span style="color:#24292E"> database.</span><span style="color:#6F42C1">execute</span><span style="color:#24292E">(sql)</span></span>
<span data-line=""><span style="color:#24292E">}</span></span></code></pre></figure>
<p>But we can use <code>throw Abort()</code> to protect it:</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line=""><span style="color:#6A737D">// run.telefunc.js</span></span>
<span data-line=""><span style="color:#6A737D">// Environment: server</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#6A737D">// run() is public: it can be called by anyone</span></span>
<span data-line=""><span style="color:#D73A49">export</span><span style="color:#24292E"> { run }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">import</span><span style="color:#24292E"> { Abort, getContext } </span><span style="color:#D73A49">from</span><span style="color:#032F62"> &#x27;telefunc&#x27;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">async</span><span style="color:#D73A49"> function</span><span style="color:#6F42C1"> run</span><span style="color:#24292E">(</span><span style="color:#E36209">sql</span><span style="color:#24292E">) {</span></span>
<span data-line=""><span style="color:#D73A49">  const</span><span style="color:#24292E"> { </span><span style="color:#005CC5">user</span><span style="color:#24292E"> } </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> getContext</span><span style="color:#24292E">()</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#6A737D">  // Only admins are allowed to run this telefunction</span></span>
<span data-line=""><span style="color:#D73A49">  if</span><span style="color:#24292E"> (user.isAdmin </span><span style="color:#D73A49">!==</span><span style="color:#005CC5"> true</span><span style="color:#24292E">) </span><span style="color:#D73A49">throw</span><span style="color:#6F42C1"> Abort</span><span style="color:#24292E">()</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">  return</span><span style="color:#D73A49"> await</span><span style="color:#24292E"> database.</span><span style="color:#6F42C1">execute</span><span style="color:#24292E">(sql)</span></span>
<span data-line=""><span style="color:#24292E">}</span></span></code></pre></figure>
<blockquote>
<p>Telefunctions can access contextual information by using <a href="/getContext"><code>getContext()</code></a>.</p>
</blockquote>
<p>We can use <code>throw Abort()</code> to avoid any forbidden telefunction call.</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line=""><span style="color:#6A737D">// TodoList.telefunc.js</span></span>
<span data-line=""><span style="color:#6A737D">// Environment: server</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">export</span><span style="color:#24292E"> { onLoad }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">import</span><span style="color:#24292E"> { Abort, getContext } </span><span style="color:#D73A49">from</span><span style="color:#032F62"> &#x27;telefunc&#x27;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">async</span><span style="color:#D73A49"> function</span><span style="color:#6F42C1"> onLoad</span><span style="color:#24292E">() {</span></span>
<span data-line=""><span style="color:#D73A49">  const</span><span style="color:#24292E"> { </span><span style="color:#005CC5">user</span><span style="color:#24292E"> } </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> getContext</span><span style="color:#24292E">()</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#6A737D">  // We forbid onLoad() to be called by a user that isn&#x27;t logged-in</span></span>
<span data-line=""><span style="color:#D73A49">  if</span><span style="color:#24292E"> (</span><span style="color:#D73A49">!</span><span style="color:#24292E">user) </span><span style="color:#D73A49">throw</span><span style="color:#6F42C1"> Abort</span><span style="color:#24292E">()</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">  const</span><span style="color:#005CC5"> todoList</span><span style="color:#D73A49"> =</span><span style="color:#D73A49"> await</span><span style="color:#24292E"> Todo.</span><span style="color:#6F42C1">findMany</span><span style="color:#24292E">({ authorId: user.id })</span></span>
<span data-line=""><span style="color:#D73A49">  return</span><span style="color:#24292E"> todoList</span></span>
<span data-line=""><span style="color:#24292E">}</span></span></code></pre></figure>
<blockquote>
<p>We essentially use <code>throw Abort()</code> to implement permission: only a logged-in user is allowed to fetch its to-do items.
We talk more about permissions at <a href="/permissions">Guides<!-- --> &gt; <!-- -->Permissions</a>.</p>
</blockquote>
<blockquote>
<p>In principle, we could also <code>throw new Error()</code> instead of <code>throw Abort()</code> as it also interupts the telefunction call. But we recommend <code>throw Abort()</code> as it comes with many conveniences.</p>
</blockquote>
<blockquote>
<p>If, upon aborting a telefunction call, you want to pass information to the frontend then use <code>return someValue</code> or <code>throw Abort(someValue)</code>, see <a href="/permissions">Guides<!-- --> &gt; <!-- -->Permissions</a>.</p>
</blockquote>
<h2 id="shield"><code>shield()</code></h2>
<p>Since telefunctions are public and can be called by anyone, we cannot assuming anything about arguments. We can use <code>throw Abort()</code> to ensure the type of telefunction arguments:</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line=""><span style="color:#6A737D">// CreateTodo.telefunc.js</span></span>
<span data-line=""><span style="color:#6A737D">// Environment: server</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">export</span><span style="color:#D73A49"> async</span><span style="color:#D73A49"> function</span><span style="color:#6F42C1"> onNewTodo</span><span style="color:#24292E">(</span><span style="color:#E36209">text</span><span style="color:#24292E">) {</span></span>
<span data-line=""><span style="color:#6A737D">  // ❌ This may throw:</span></span>
<span data-line=""><span style="color:#6A737D">  // ```</span></span>
<span data-line=""><span style="color:#6A737D">  // Uncaught TypeError: Cannot read properties of undefined (reading &#x27;toUpperCase&#x27;)</span></span>
<span data-line=""><span style="color:#6A737D">  // ```</span></span>
<span data-line=""><span style="color:#6A737D">  // While the frontend may always call onNewTodo(text) with `typeof text === &#x27;string&#x27;`,</span></span>
<span data-line=""><span style="color:#6A737D">  // because onNewTodo() is public, anyone can call onNewTodo(undefined) instead.</span></span>
<span data-line=""><span style="color:#24292E">  text </span><span style="color:#D73A49">=</span><span style="color:#24292E"> text.</span><span style="color:#6F42C1">toUpperCase</span><span style="color:#24292E">()</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#6A737D">  // ✅ We ensure `text` is a string</span></span>
<span data-line=""><span style="color:#D73A49">  if</span><span style="color:#24292E"> (</span><span style="color:#D73A49">typeof</span><span style="color:#24292E"> text </span><span style="color:#D73A49">!==</span><span style="color:#032F62"> &#x27;string&#x27;</span><span style="color:#24292E">) {</span></span>
<span data-line=""><span style="color:#D73A49">    throw</span><span style="color:#6F42C1"> Abort</span><span style="color:#24292E">()</span></span>
<span data-line=""><span style="color:#24292E">  }</span></span>
<span data-line=""><span style="color:#24292E">  text </span><span style="color:#D73A49">=</span><span style="color:#24292E"> text.</span><span style="color:#6F42C1">toUpperCase</span><span style="color:#24292E">()</span></span>
<span data-line=""><span style="color:#24292E">}</span></span></code></pre></figure>
<p>For more convenience, we can use <code>shield()</code> instead:</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line=""><span style="color:#6A737D">// CreateTodo.telefunc.js</span></span>
<span data-line=""><span style="color:#6A737D">// Environment: server</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">import</span><span style="color:#24292E"> { shield } </span><span style="color:#D73A49">from</span><span style="color:#032F62"> &#x27;telefunc&#x27;</span></span>
<span data-line=""><span style="color:#D73A49">const</span><span style="color:#005CC5"> t</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> shield.type</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#6F42C1">shield</span><span style="color:#24292E">(onNewTodo, [t.string])</span></span>
<span data-line=""><span style="color:#D73A49">export</span><span style="color:#D73A49"> async</span><span style="color:#D73A49"> function</span><span style="color:#6F42C1"> onNewTodo</span><span style="color:#24292E">(</span><span style="color:#E36209">text</span><span style="color:#24292E">) {</span></span>
<span data-line=""><span style="color:#6A737D">  // ...</span></span>
<span data-line=""><span style="color:#24292E">}</span></span></code></pre></figure>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line=""><span style="color:#6A737D">// CreateTodo.telefunc.js</span></span>
<span data-line=""><span style="color:#6A737D">// Environment: server</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">import</span><span style="color:#24292E"> { shield } </span><span style="color:#D73A49">from</span><span style="color:#032F62"> &#x27;telefunc&#x27;</span></span>
<span data-line=""><span style="color:#D73A49">const</span><span style="color:#005CC5"> t</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> shield.type</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#6F42C1">shield</span><span style="color:#24292E">(onNewTodo, [{ text: t.string, isCompleted: t.boolean }])</span></span>
<span data-line=""><span style="color:#D73A49">export</span><span style="color:#D73A49"> async</span><span style="color:#D73A49"> function</span><span style="color:#6F42C1"> onNewTodo</span><span style="color:#24292E">({ </span><span style="color:#E36209">text</span><span style="color:#24292E">, </span><span style="color:#E36209">isCompleted</span><span style="color:#24292E"> }) {</span></span>
<span data-line=""><span style="color:#6A737D">  // ...</span></span>
<span data-line=""><span style="color:#24292E">}</span></span></code></pre></figure>
<p>Not only does <code>shield()</code> call <code>throw Abort()</code> on our behalf, but it also infers the type of the arguments for TypeScript and IntelliSense.</p>
<h2 id="random-telefunction-calls">Random telefunction calls</h2>
<p>Any of your telefunctions can be called by anyone, at any time, and with any arguments. One way to think about it is that any random telefunction call can happen at any time.</p>
<p>You should always protect your telefunctions, even when your frontend calls a telefunction only in a certain way. For example:</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="jsx" data-theme="github-light"><code data-language="jsx" data-theme="github-light" style="display:grid"><span data-line=""><span style="color:#6A737D">// Comment.jsx</span></span>
<span data-line=""><span style="color:#6A737D">// Environment: client</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">import</span><span style="color:#24292E"> { onDelete } </span><span style="color:#D73A49">from</span><span style="color:#032F62"> &#x27;./Comment.telefunc.js&#x27;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">function</span><span style="color:#6F42C1"> Comment</span><span style="color:#24292E">({ </span><span style="color:#E36209">id</span><span style="color:#24292E">, </span><span style="color:#E36209">text</span><span style="color:#24292E"> }) {</span></span>
<span data-line=""><span style="color:#D73A49">  const</span><span style="color:#005CC5"> deleteButton</span><span style="color:#D73A49"> =</span></span>
<span data-line=""><span style="color:#6A737D">    // The delete button is only shown to admins</span></span>
<span data-line=""><span style="color:#D73A49">    !</span><span style="color:#24292E">user.isAdmin </span><span style="color:#D73A49">?</span><span style="color:#005CC5"> null</span><span style="color:#D73A49"> :</span><span style="color:#24292E"> &lt;</span><span style="color:#22863A">button</span><span style="color:#6F42C1"> onClick</span><span style="color:#D73A49">=</span><span style="color:#24292E">{() </span><span style="color:#D73A49">=&gt;</span><span style="color:#6F42C1"> onDelete</span><span style="color:#24292E">(id)}&gt;Delete&lt;/</span><span style="color:#22863A">button</span><span style="color:#24292E">&gt;</span></span>
<span data-line=""><span style="color:#D73A49">  return</span><span style="color:#24292E"> &lt;&gt;</span></span>
<span data-line=""><span style="color:#24292E">    &lt;</span><span style="color:#22863A">p</span><span style="color:#24292E">&gt;{ text }&lt;/</span><span style="color:#22863A">p</span><span style="color:#24292E">&gt;</span></span>
<span data-line=""><span style="color:#24292E">    { deleteButton }</span></span>
<span data-line=""><span style="color:#24292E">  &lt;/&gt;</span></span>
<span data-line=""><span style="color:#24292E">}</span></span></code></pre></figure>
<p>Because the frontend shows the delete button only to admins, we can assume the user to be an admin whenever the frontend calls <code>onDelete()</code>.
But we still need to use <code>throw Abort()</code> in order to protect the telefunction against calls that don&#x27;t originate from the frontend.</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line=""><span style="color:#6A737D">// Comment.telefunc.js</span></span>
<span data-line=""><span style="color:#6A737D">// Environment: server</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#D73A49">import</span><span style="color:#24292E"> { getContext, Abort, shield } </span><span style="color:#D73A49">from</span><span style="color:#032F62"> &#x27;telefunc&#x27;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#6F42C1">shield</span><span style="color:#24292E">(onDelete, [shield.type.number])</span></span>
<span data-line=""><span style="color:#D73A49">export</span><span style="color:#D73A49"> async</span><span style="color:#D73A49"> function</span><span style="color:#6F42C1"> onDelete</span><span style="color:#24292E">(</span><span style="color:#E36209">id</span><span style="color:#24292E">) {</span></span>
<span data-line=""><span style="color:#D73A49">  const</span><span style="color:#24292E"> { </span><span style="color:#005CC5">user</span><span style="color:#24292E"> } </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> getContext</span><span style="color:#24292E">()</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#6A737D">  // onDelete() is public and anyone can call it without being an admin.</span></span>
<span data-line=""><span style="color:#6A737D">  // We must abort if that happens.</span></span>
<span data-line=""><span style="color:#D73A49">  if</span><span style="color:#24292E"> (</span><span style="color:#D73A49">!</span><span style="color:#24292E">user.isAdmin) </span><span style="color:#D73A49">throw</span><span style="color:#6F42C1"> Abort</span><span style="color:#24292E">()</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#6A737D">  // ...</span></span>
<span data-line=""><span style="color:#24292E">}</span></span></code></pre></figure><div style="margin-top:50px"><a href="https://github.com/brillout/telefunc/tree/main/docs/pages/RPC/+Page.mdx">✍<!-- --> Edit this page</a></div></div></div><div id="mobile-navigation-mask"></div></div></div></div>
        
        <script src="/assets/entries/-brillout_docpress_renderer_client.X16ZZ_FC.js" type="module" async></script>
      </body>
    </html>