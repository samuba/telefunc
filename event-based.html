<!DOCTYPE html>
    <html>
      <head><link rel="stylesheet" type="text/css" href="/assets/_default.page.client.2a70f547.css"><link rel="stylesheet" type="text/css" href="/assets/P.59ef0673.css"><link rel="stylesheet" type="text/css" href="/assets/FeatureList.a95a6883.css"><link rel="stylesheet" type="text/css" href="/assets/../node_modules/.pnpm/@brillout+docpress@0.1.8_se7lxagkunlp4luyiouooh4dii/node_modules/@brillout/docpress/src/renderer/_default.page.server.8fa1a7c1.css"><link rel="preload" as="font" crossorigin type="font/ttf" href="/assets/Inter-Var.2bc54814.ttf">
        <meta charset="UTF-8" />
        <link rel="icon" href="/assets/telefunc-favicon.6013bce0.svg" />
        <title>Event-based telefunctions | Telefunc</title>
        
        <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no" />
        
        
      </head>
      <body>
        <div id="page-view"><div id="page-layout" class="doc-page"><div id="navigation-wrapper"><div id="navigation-container"><div id="navigation-header" style="display:flex;flex-direction:column;align-items:center;margin-bottom:-5px"><a id="navigation-header-logo" style="display:flex;align-items:center;color:inherit;justify-content:left;text-decoration:none;padding-top:12px;padding-bottom:7px" href="/"><img src="/assets/telefunc.6a5581b5.svg" height="55" width="55"/><span style="font-size:2.55em;margin-left:7px;font-weight:600">Telefunc</span></a><div style="display:flex;align-items:center;padding-top:0;justify-content:left"><a class="colorize-on-hover decolorize-4" href="https://github.com/brillout/telefunc" style="padding:3px;display:inline-block;line-height:0"><img src="/assets/github.86a91340.svg" height="20"/></a><a class="colorize-on-hover decolorize-6" href="https://discord.com/invite/dSDMGGJZQy" style="padding:3px;display:inline-block;line-height:0"><img src="/assets/discord.c14881e9.svg" height="20"/></a><a class="colorize-on-hover decolorize-7" href="https://twitter.com/brillout" style="padding:3px;display:inline-block;line-height:0"><img src="/assets/twitter.c1bd51e1.svg" height="20"/></a><div id="docsearch-desktop"></div><a href="https://github.com/brillout/telefunc/blob/main/CHANGELOG.md" class="button colorize-on-hover" style="display:flex;align-items:center;padding:1px 7px;margin-left:2px;font-size:0.97em;color:inherit"><span class="decolorize-7">v<!-- -->0.1.33</span><img class="decolorize-6" src="/assets/changelog.062bdc49.svg" height="16" style="margin-left:5px"/></a></div></div><div id="navigation-content"><div class="nav-column" style="position:relative"><div class="nav-h1-group"><a class="nav-item nav-item-h1 nav-item-first-of-its-kind nav-item-last-of-its-kind"><span style="font-size:1.4em"><img src="/assets/compass.023c5145.svg" style="vertical-align:text-top;font-size:1em;width:1.4em"/> <span style="font-size:1rem">Overview</span></span></a><a class="nav-item nav-item-h2 nav-item-first-of-its-kind nav-item-last-of-its-kind" href="/">Introduction</a></div><div class="nav-h1-group"><a class="nav-item nav-item-h1 nav-item-first-of-its-kind nav-item-last-of-its-kind"><span style="font-size:1.4em">üå±<!-- --> <span style="font-size:1rem">Get started</span></span></a><a class="nav-item nav-item-h2 nav-item-first-of-its-kind" href="/vite">Vite</a><a class="nav-item nav-item-h2" href="/next">Next.js</a><a class="nav-item nav-item-h2" href="/nuxt">Nuxt</a><a class="nav-item nav-item-h2" href="/react-native">React Native</a><a class="nav-item nav-item-h2 nav-item-last-of-its-kind" href="/install">Other</a></div><div class="nav-h1-group"><a class="nav-item nav-item-h1 nav-item-first-of-its-kind nav-item-last-of-its-kind"><span style="font-size:1.4em">üìö<!-- --> <span style="font-size:1rem">Guides</span></span></a><a class="nav-item nav-item-h2 nav-item-first-of-its-kind" href="/permissions">Permissions</a><a class="nav-item nav-item-h2" href="/error-handling">Error handling</a><a class="nav-item nav-item-h2" href="/form-validation">Form validation</a><a class="nav-item nav-item-h2  is-active  is-active-first nav-item-last-of-its-kind" href="/event-based">Event-based telefunctions</a><a class="nav-item nav-item-h3  is-active nav-item-first-of-its-kind" href="#example">Example</a><a class="nav-item nav-item-h3  is-active" href="#naming-convention">Naming convention</a><a class="nav-item nav-item-h3  is-active  is-active-last nav-item-last-of-its-kind" href="#exceptions">Exceptions</a><a class="nav-item nav-item-h2 nav-item-first-of-its-kind nav-item-last-of-its-kind" href="/file-upload">File upload</a></div><div class="nav-h1-group"><a class="nav-item nav-item-h1 nav-item-first-of-its-kind nav-item-last-of-its-kind"><span style="font-size:1.4em">‚öô<!-- --> <span style="font-size:1rem">API</span></span></a><a class="nav-item nav-item-h4 nav-item-first-of-its-kind nav-item-last-of-its-kind">Context</a><a class="nav-item nav-item-h2 nav-item-first-of-its-kind nav-item-last-of-its-kind" href="/getContext"><code>getContext()</code></a><a class="nav-item nav-item-h4 nav-item-first-of-its-kind nav-item-last-of-its-kind">Protection</a><a class="nav-item nav-item-h2 nav-item-first-of-its-kind" href="/Abort"><code>throw Abort()</code></a><a class="nav-item nav-item-h2 nav-item-last-of-its-kind" href="/shield"><code>shield()</code></a><a class="nav-item nav-item-h4 nav-item-first-of-its-kind nav-item-last-of-its-kind">Server Middleware</a><a class="nav-item nav-item-h2 nav-item-first-of-its-kind nav-item-last-of-its-kind" href="/telefunc"><code>telefunc()</code></a><a class="nav-item nav-item-h4 nav-item-first-of-its-kind nav-item-last-of-its-kind">Error Handling</a><a class="nav-item nav-item-h2 nav-item-first-of-its-kind" href="/onBug"><code>onBug()</code></a><a class="nav-item nav-item-h2 nav-item-last-of-its-kind" href="/onAbort"><code>onAbort()</code></a><a class="nav-item nav-item-h4 nav-item-first-of-its-kind nav-item-last-of-its-kind">Config</a><a class="nav-item nav-item-h2 nav-item-first-of-its-kind" href="/telefuncUrl"><code>telefuncUrl</code></a><a class="nav-item nav-item-h2" href="/disableNamingConvention"><code>disableNamingConvention</code></a><a class="nav-item nav-item-h2" href="/httpHeaders"><code>httpHeaders</code></a><a class="nav-item nav-item-h2" href="/telefuncFiles"><code>telefuncFiles</code></a><a class="nav-item nav-item-h2 nav-item-last-of-its-kind" href="/root"><code>root</code></a><a class="nav-item nav-item-h4 nav-item-first-of-its-kind nav-item-last-of-its-kind">Plugins</a><a class="nav-item nav-item-h2 nav-item-first-of-its-kind" href="/vite-plugin">Vite Plugin</a><a class="nav-item nav-item-h2" href="/webpack-plugin">Webpack Plugin</a><a class="nav-item nav-item-h2 nav-item-last-of-its-kind" href="/babel-plugin">Babel Plugin</a></div></div></div><a id="navigation-fullscreen-close" style="position:fixed;top:11px;right:15px;z-index:10" aria-label="Press &lt;Esc&gt;" data-balloon-pos="left"><img src="/assets/close.c1f95f98.svg" height="50" width="50" style="display:block"/></a></div></div><a id="navigation-fullscreen-button"><div style="position:fixed;cursor:pointer;height:100vh;width:20px;overflow:hidden"><div></div></div><div style="position:fixed;height:100vh;width:20px" aria-label="Press &lt;Esc&gt;" data-balloon-pos="right"></div></a><div id="page-wrapper"><div id="page-container"><div id="mobile-header" style="height:var(--mobile-header-height);width:100vw;position:relative"><div style="position:fixed;display:flex;align-items:center;background:white;z-index:99;top:0;left:0;height:var(--mobile-header-height);width:100%;border-bottom:1px solid #ddd"><div style="padding:20px;line-height:0" id="menu-toggle"><svg style="width:20px" class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/" style="color:inherit;display:flex;align-items:center;justify-content:left;text-decoration:none"><img src="/assets/telefunc.6a5581b5.svg" height="40" width="40"/><span style="font-size:1.55em;margin-left:6px;font-weight:600">Telefunc</span></a><div id="docsearch-mobile"></div></div></div><div id="page-content"><h1>Event-based telefunctions</h1><p>With REST/GraphQL, API endpoints are:</p>
<ul>
<li>Generic</li>
<li>Backend-owned</li>
</ul>
<p>With Telefunc, it&#x27;s usually the exact opposite because telefunctions are usually:</p>
<ul>
<li>Tailored</li>
<li>Frontend-owned</li>
</ul>
<p>This inversion leads to profound improvements in development speed, and we recommend to implement what we call <em>event-based telefunctions</em>.</p>
<blockquote>
<p>You may be tempted to create generic telefunctions but this is usually an anti-pattern as explained in the example below.</p>
</blockquote>
<h2 id="example">Example</h2>
<p>Let&#x27;s imagine a to-do app that wants to implement a new feature &quot;mark all tasks as completed&quot;.</p>
<p>With a RESTful API, the app does these requests:</p>
<pre><code>HTTP VERB       HTTP URL                                      HTTP BODY PAYLOAD
=========       =========================================     =====================
GET             https://api.todo.com/task?completed=false     ‚àÖ
POST            https://api.todo.com/task/42                  { &quot;completed&quot;: true }
POST            https://api.todo.com/task/1337                { &quot;completed&quot;: true }
POST            https://api.todo.com/task/7                   { &quot;completed&quot;: true }
</code></pre>
<blockquote>
<p>It&#x27;s usually the backend team that owns and is responsible of implementing and modelling such API.</p>
</blockquote>
<p>With Telefunc, we can do this instead:</p>
<div data-rehype-pretty-code-fragment=""><pre data-language="ts" data-theme="default"><code data-language="ts" data-theme="default"><span class="line"><span style="color:#6E7781">// TodoList.telefunc.ts</span></span>
<span class="line"><span style="color:#6E7781">// Environment: Server</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CF222E">export</span><span style="color:#24292F"> </span><span style="color:#CF222E">async</span><span style="color:#24292F"> </span><span style="color:#CF222E">function</span><span style="color:#24292F"> </span><span style="color:#8250DF">onMarkAllAsCompleted</span><span style="color:#24292F">() {</span></span>
<span class="line"><span style="color:#24292F">  </span><span style="color:#6E7781">// With SQL</span></span>
<span class="line"><span style="color:#24292F">  </span><span style="color:#CF222E">await</span><span style="color:#24292F"> </span><span style="color:#8250DF">sql</span><span style="color:#24292F">(</span><span style="color:#0A3069">&#x27;UPDATE tasks SET completed = true WHERE completed = false&#x27;</span><span style="color:#24292F">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F">  </span><span style="color:#6E7781">// With an ORM</span></span>
<span class="line"><span style="color:#24292F">  </span><span style="color:#CF222E">const</span><span style="color:#24292F"> </span><span style="color:#0550AE">updateUser</span><span style="color:#24292F"> </span><span style="color:#CF222E">=</span><span style="color:#24292F"> </span><span style="color:#CF222E">await</span><span style="color:#24292F"> Tasks.</span><span style="color:#8250DF">update</span><span style="color:#24292F">({</span></span>
<span class="line"><span style="color:#24292F">    where: {</span></span>
<span class="line"><span style="color:#24292F">      completed: </span><span style="color:#0550AE">false</span></span>
<span class="line"><span style="color:#24292F">    },</span></span>
<span class="line"><span style="color:#24292F">    data: {</span></span>
<span class="line"><span style="color:#24292F">      completed: </span><span style="color:#0550AE">true</span></span>
<span class="line"><span style="color:#24292F">    }</span></span>
<span class="line"><span style="color:#24292F">  })</span></span>
<span class="line"><span style="color:#24292F">}</span></span></code></pre></div>
<blockquote>
<p>With Telefunc, it&#x27;s the frontend team that owns and is responsible for defining telefunctions.</p>
</blockquote>
<p>The key difference is that our telefunction <code>onMarkAllAsCompleted()</code> is created specifically to serve the needs of our component <code>TodoList.tsx</code>, whereas the RESTful API is a set of generic endpoints that are agnostic to the frontend.</p>
<p>Not only is <code>onMarkAllAsCompleted()</code> more performant than using RESTful API, but it&#x27;s also faster to implement such tailored telefunction as the need arises while developing the frontend, instead of having to implement an entire RESTful API before even getting started writing the frontend.</p>
<p>That&#x27;s why, in general, we recommend to implement telefunctions that are tailored instead of generic.</p>
<p>We named our telefunction &quot;onMarkAllAsCompleted&quot; instead of &quot;markAllAsCompleted&quot; because it&#x27;s triggered by a user event:</p>
<div data-rehype-pretty-code-fragment=""><pre data-language="tsx" data-theme="default"><code data-language="tsx" data-theme="default"><span class="line"><span style="color:#6E7781">// TodoList.tsx</span></span>
<span class="line"><span style="color:#6E7781">// Environment: Browser</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CF222E">import</span><span style="color:#24292F"> { onMarkAllAsCompleted } </span><span style="color:#CF222E">from</span><span style="color:#24292F"> </span><span style="color:#0A3069">&#x27;./TodoList.telefunc.ts&#x27;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CF222E">function</span><span style="color:#24292F"> </span><span style="color:#8250DF">TodoList</span><span style="color:#24292F">() {</span></span>
<span class="line"><span style="color:#24292F">  </span><span style="color:#CF222E">return</span><span style="color:#24292F"> (</span></span>
<span class="line"><span style="color:#24292F">    &lt;&gt;</span></span>
<span class="line"><span style="color:#24292F">      &lt;</span><span style="color:#116329">button</span></span>
<span class="line"><span style="color:#24292F">        </span><span style="color:#0550AE">onClick</span><span style="color:#CF222E">=</span><span style="color:#24292F">{</span><span style="color:#CF222E">async</span><span style="color:#24292F"> () </span><span style="color:#CF222E">=&gt;</span><span style="color:#24292F"> </span><span style="color:#CF222E">await</span><span style="color:#24292F"> </span><span style="color:#8250DF">onMarkAllAsCompleted</span><span style="color:#24292F">()}</span></span>
<span class="line"><span style="color:#24292F">      &gt;</span></span>
<span class="line"><span style="color:#24292F">        Mark all as completed</span></span>
<span class="line"><span style="color:#24292F">      &lt;/</span><span style="color:#116329">button</span><span style="color:#24292F">&gt;</span></span>
<span class="line"><span style="color:#24292F">      {</span><span style="color:#6E7781">/* ... */</span><span style="color:#24292F">}</span></span>
<span class="line"><span style="color:#24292F">    &lt;/&gt;</span></span>
<span class="line"><span style="color:#24292F">  )</span></span>
<span class="line"><span style="color:#24292F">}</span></span></code></pre></div>
<p>While defining telefunctions tailored to serve the needs of a UI commponent, we soon realize that telefunctions are always triggered by some kind of event.</p>
<h2 id="naming-convention">Naming convention</h2>
<p>By default, we recommend to prefix all telefunction names with &quot;on&quot;:</p>
<div data-rehype-pretty-code-fragment=""><pre data-language="bash" data-theme="default"><code data-language="bash" data-theme="default"><span class="line"><span style="color:#24292F">    TELEFUNCTION NAME</span></span>
<span class="line"><span style="color:#24292F">    =================</span></span>
<span class="line"><span style="color:#24292F">    </span><span style="color:#6E7781"># Generic telefunction:</span></span>
<span class="line"><span style="color:#24292F">‚ùå  updateTodoItem</span></span>
<span class="line"><span style="color:#24292F">    </span><span style="color:#6E7781"># Tailored telefunction reacting to a specific user event:</span></span>
<span class="line"><span style="color:#24292F">‚úÖ  onTodoItemTextUpdate</span></span>
<span class="line"><span style="color:#24292F">‚úÖ  onTodoItemCompleteToggle</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F">    </span><span style="color:#6E7781"># Data-fetching telefunction</span></span>
<span class="line"><span style="color:#24292F">‚ùå  loadData</span></span>
<span class="line"><span style="color:#24292F">‚úÖ  onLoad</span></span>
<span class="line"><span style="color:#24292F">‚úÖ  onPagination</span></span>
<span class="line"><span style="color:#24292F">‚úÖ  onInfiniteScroll</span></span></code></pre></div>
<p>We also recommend to collocate <code>.telefunc.js</code> files with UI components:</p>
<div data-rehype-pretty-code-fragment=""><pre data-language="bash" data-theme="default"><code data-language="bash" data-theme="default"><span class="line"><span style="color:#24292F">    FILES</span></span>
<span class="line"><span style="color:#24292F">    ===============================</span></span>
<span class="line"><span style="color:#24292F">    </span><span style="color:#6E7781"># UI Component</span></span>
<span class="line"><span style="color:#24292F">    components/TodoItem.tsx</span></span>
<span class="line"><span style="color:#24292F">‚úÖ  components/TodoItem.telefunc.ts</span></span>
<span class="line"><span style="color:#24292F">‚ùå  db/todo.telefunc.ts</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F">    </span><span style="color:#6E7781"># UI Component</span></span>
<span class="line"><span style="color:#24292F">    pages/edit/Page.vue</span></span>
<span class="line"><span style="color:#24292F">‚úÖ  pages/edit/Page.telefunc.js</span></span>
<span class="line"><span style="color:#24292F">‚ùå  pages/edit/all.telefunc.js</span></span></code></pre></div>
<p>Telefunc displays a warning whenever the naming convention isn&#x27;t followed. We can opt-out with <a href="/disableNamingConvention"><code>config.disableNamingConvention</code></a>, but we recommend that you carefully consider whether you really want to opt-out.</p>
<blockquote>
<p>First-time Telefunc users often create generic telefunctions out of the habit of using REST/GraphQL, but defining tailored telefunctions instead is usually the better appraoch.</p>
</blockquote>
<h2 id="exceptions">Exceptions</h2>
<p>As explained above, we recommend implementing telefunctions that are tailored instead of generic, but there are exceptions.</p>
<p>The most common exception is if our telefunctions are consumed not only by one client but by several clients, and if these clients are deployed independently of each other. In that case it can make sense to define few generic telefunctions covering all clients, instead of defining different telefunctions for each client. An alternative is to deploy one Telefunc server per client; that way we can preserve the fast development speed of tailored telefunctions.</p><div style="margin-top:50px"><a href="https://github.com/brillout/telefunc/edit/main/docs/pages/event-based.page.server.mdx">‚úç<!-- --> Edit this page</a></div></div></div><div id="navigation-mask"></div></div></div></div>
        
      <script type="module" src="/assets/chunk-f9350749.js" async></script><link rel="preload" href="/assets/chevron.38e8d76a.svg" as="image" type="image/svg+xml"></body>
    </html>